/*
* Guides v1.0.0
* https://sunshine-themes.com/intersectionTrigger
*
* @license Copyright 2022, Sunshine. All rights reserved.
* Subject to the terms at https://sunshine-themes.com/intersectionTrigger/standard-licensew.
* @author: Sherif magdy, sherifmagdy@sunshine-themes.com
*/
                  
var R={enter:{trigger:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Enter"},root:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Root Enter"}},leave:{trigger:{backgroundColor:"#ff0000",color:"#000",text:"Leave"},root:{backgroundColor:"#ff0000",color:"#000",text:"Root Leave"}}};var g={function:t=>typeof t=="function",string:t=>typeof t=="string",boolean:t=>typeof t=="boolean",object:t=>t&&typeof t=="object"&&!(t instanceof Array),inObject:(t,e)=>g.object(t)&&e in t,num:t=>typeof t=="number",percent:t=>t&&t.includes("%"),pixel:t=>t&&t.includes("px"),array:t=>t instanceof Array,element:t=>t instanceof HTMLElement||t instanceof Element,doc:t=>t&&t.nodeType===9,scrollable:(t,e=null)=>e?e==="y"?t.scrollHeight>t.clientHeight:t.scrollWidth>t.clientWidth:t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth,anime:t=>g.object(t)&&t.hasOwnProperty("animatables")&&!t.hasOwnProperty("add"),tl:t=>g.object(t)&&t.hasOwnProperty("add")&&g.function(t.add),animeInstance:t=>g.anime(t)||g.tl(t)};var k=t=>{let e=[];for(t=t.parentNode;t&&t!==document&&t!==document.documentElement;t=t.parentNode)e.push(t);return e},P=(t,e)=>{let u=t,h=e;return Object.entries(u).forEach(([r,a])=>{g.object(a)?P(a,h[r]=h[r]||{}):r in h||(h[r]=a)}),h};var m=t=>{let e=t.getBoundingClientRect(),{top:u,bottom:h,right:r,left:a,height:c,width:d,x:p,y:f}=e;return{top:u,left:a,height:c,width:d,x:p,y:f,right:r-(r-a-t.clientWidth),bottom:h-(h-u-t.clientHeight)}};var T=class{constructor(e={}){return this.params=e,this._guides=[],this}_registerIntersectionTrigger(e){this._it=e,this._utils=this._it._utils,this._addResizeListener()}_addResizeListener(){!!this._onResizeHandler&&removeEventListener("resize",this._onResizeHandler,!1),this._onResizeHandler=()=>{this.refresh()},addEventListener("resize",this._onResizeHandler,!1)}createGuides(){let e=this._utils.isVirtical(),u=c=>{let{triggerGuide:d,trigger:p,enter:f,position:_,text:w,color:G,backgroundColor:C}=c,s=(l,i,o)=>l.style[i]=o,n=document.createElement("div"),L=e?"100px":"1px",z=e?"1px":"100px",H=e?"top":"left";s(n,"width",L),s(n,"height",z),s(n,"position","absolute"),s(n,"zIndex","9999"),s(n,"backgroundColor",C),s(n,H,_),(()=>{let l={dir:e?f?"bottom":"top":"bottom",value:e?"5px":"25px"},i={dir:e||f?"right":"left",value:e?d||this._it._root?"0px":"25px":"5px"},o=document.createElement("span");o.innerText=w,n.appendChild(o),s(o,"position","absolute"),s(o,"color",G),s(o,"fontSize","16px"),s(o,"fontWeight","bold"),s(o,"backgroundColor",C),s(o,"padding","5px"),s(o,"width","max-content"),s(o,l.dir,l.value),s(o,i.dir,i.value)})(),this._guides.push(n),document.body.append(n);let B=(l,i)=>{let o=[...n.style.transform.matchAll(/(-?\d*\.?\d+)\s*(px|%)?/g)],x=o.length?o[0][1]:0,y=o.length>1?o[1][1]:0,E=parseFloat(l)+parseFloat(x),b=parseFloat(i)+parseFloat(y);s(n,"transform",`translate(${E}px,${b}px)`)},v=(l=!0)=>{let i=n.getBoundingClientRect(),o=l?m(p):this._utils.getRootRect(this._it.observer.rootMargin),x=this._it._root?m(this._it._root):m(document.body),y=e?{x:o.right-i.right,y:o.top+_*o.height-i.top}:{x:o.left+_*o.width-i.left,y:o.top-i.top},E=e?f?{x:x.right-i.left,y:o.bottom-i.bottom}:{x:x.right-i.left,y:o.top-i.top}:f?{x:o.right-i.right,y:x.bottom-i.top}:{x:o.left-i.left,y:x.bottom-i.top},b=l?y:E;B(b.x,b.y)};if(!d){s(n,e?"width":"height",this._it._isRootViewport?e?"100vw":"100vh":"100px"),s(n,"position",this._it._isRootViewport?"fixed":"absolute"),this._it._isRootViewport&&!e&&s(n,"top","0px"),this._it._isRootViewport||v(!1);return}v(),k(p).forEach(l=>{!g.scrollable(l)||l.addEventListener("scroll",i=>v(),!1)})},r=(c=>{let d=R;return g.object(c)&&(d=P(d,c)),d})(this.params),a=this._it.name;u({triggerGuide:!1,enter:!0,position:this._it._positions.rootEnterPosition.guide,text:`${a} ${r.enter.root.text}`,color:r.enter.root.color,backgroundColor:r.enter.root.backgroundColor}),u({triggerGuide:!1,enter:!1,position:this._it._positions.rootLeavePosition.guide,text:`${a} ${r.leave.root.text}`,color:r.leave.root.color,backgroundColor:r.leave.root.backgroundColor}),this._it.triggers.forEach(c=>{let{enter:d,leave:p}=this._utils.getTriggerData(c);u({triggerGuide:!0,trigger:c,enter:!0,position:d,text:`${a} ${r.enter.trigger.text}`,color:r.enter.trigger.color,backgroundColor:r.enter.trigger.backgroundColor}),u({triggerGuide:!0,trigger:c,enter:!1,position:p,text:`${a} ${r.leave.trigger.text}`,color:r.leave.trigger.color,backgroundColor:r.leave.trigger.backgroundColor})})}removeGuides=()=>{this._guides.forEach(e=>e&&e.remove()),this._guides=[]};refresh=()=>{this.removeGuides(),this.createGuides()};kill=()=>{this.removeGuides(),this._it=null,this._utils=null,removeEventListener("resize",this._onResizeHandler,!1)}};export{T as default};
