/*
* Guides v1.0.0
* https://sunshine-themes.com/intersectionTrigger
*
* @license Copyright 2022, Sunshine. All rights reserved.
* Subject to the terms at https://sunshine-themes.com/intersectionTrigger/standard-licensew.
* @author: Sherif magdy, sherifmagdy@sunshine-themes.com
*/
                  
var v={enter:{trigger:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Enter"},root:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Root Enter"}},leave:{trigger:{backgroundColor:"#ff0000",color:"#000",text:"Leave"},root:{backgroundColor:"#ff0000",color:"#000",text:"Root Leave"}}};var y=class{constructor(o={}){return this.params=o,this._guides=[],this}_registerIntersectionTrigger(o){this._it=o,this._helpers=this._it._helpers,this._utils=this._it._utils,this._addResizeListener()}_addResizeListener(){!!this._onResizeHandler&&removeEventListener("resize",this._onResizeHandler,!1),this._onResizeHandler=()=>{this.refresh()},addEventListener("resize",this._onResizeHandler,!1)}createGuides(){let o=this._helpers.is.virtical(),c=l=>{let{triggerGuide:a,trigger:h,enter:u,position:f,text:k,color:C,backgroundColor:b}=l,r=(n,e,t)=>n.style[e]=t,s=document.createElement("div"),E=o?"100px":"1px",R=o?"1px":"100px",P=o?"top":"left";r(s,"width",E),r(s,"height",R),r(s,"position","absolute"),r(s,"zIndex","9999"),r(s,"backgroundColor",b),r(s,P,f),(()=>{let n={dir:o?u?"bottom":"top":"bottom",value:o?"5px":"25px"},e={dir:o||u?"right":"left",value:o?a||this._it._root?"0px":"25px":"5px"},t=document.createElement("span");t.innerText=k,s.appendChild(t),r(t,"position","absolute"),r(t,"color",C),r(t,"fontSize","16px"),r(t,"fontWeight","bold"),r(t,"backgroundColor",b),r(t,"padding","5px"),r(t,"width","max-content"),r(t,n.dir,n.value),r(t,e.dir,e.value)})(),this._guides.push(s),document.body.append(s);let G=(n,e)=>{let t=[...s.style.transform.matchAll(/(-?\d*\.?\d+)\s*(px|%)?/g)],d=t.length?t[0][1]:0,x=t.length>1?t[1][1]:0,m=parseFloat(n)+parseFloat(d),p=parseFloat(e)+parseFloat(x);r(s,"transform",`translate(${m}px,${p}px)`)},_=(n=!0)=>{let e=s.getBoundingClientRect(),t=n?this._helpers.boundsMinusScrollbar(h):this._utils.getRootRect(this._it.observer.rootMargin),d=this._it._root?this._helpers.boundsMinusScrollbar(this._it._root):this._helpers.boundsMinusScrollbar(document.body),x=o?{x:t.right-e.right,y:t.top+f*t.height-e.top}:{x:t.left+f*t.width-e.left,y:t.top-e.top},m=o?u?{x:d.right-e.left,y:t.bottom-e.bottom}:{x:d.right-e.left,y:t.top-e.top}:u?{x:t.right-e.right,y:d.bottom-e.top}:{x:t.left-e.left,y:d.bottom-e.top},p=n?x:m;G(p.x,p.y)};if(!a){r(s,o?"width":"height",this._it._isRootViewport?o?"100vw":"100vh":"100px"),r(s,"position",this._it._isRootViewport?"fixed":"absolute"),this._it._isRootViewport&&!o&&r(s,"top","0px"),this._it._isRootViewport||_(!1);return}_(),this._helpers.getParents(h).forEach(n=>{!this._helpers.is.scrollable(n)||n.addEventListener("scroll",e=>_(),!1)})},i=(l=>{let a=v;return this._helpers.is.object(l)&&(a=this._helpers.mergeOptions(a,l)),a})(this.params),g=this._it.name;c({triggerGuide:!1,enter:!0,position:this._it._positions.rootStartPosition.guide,text:`${g} ${i.enter.root.text}`,color:i.enter.root.color,backgroundColor:i.enter.root.backgroundColor}),c({triggerGuide:!1,enter:!1,position:this._it._positions.rootEndPosition.guide,text:`${g} ${i.leave.root.text}`,color:i.leave.root.color,backgroundColor:i.leave.root.backgroundColor}),this._it.triggers.forEach(l=>{let{enter:a,leave:h}=this._utils.getTriggerData(l);c({triggerGuide:!0,trigger:l,enter:!0,position:a,text:`${g} ${i.enter.trigger.text}`,color:i.enter.trigger.color,backgroundColor:i.enter.trigger.backgroundColor}),c({triggerGuide:!0,trigger:l,enter:!1,position:h,text:`${g} ${i.leave.trigger.text}`,color:i.leave.trigger.color,backgroundColor:i.leave.trigger.backgroundColor})})}removeGuides=()=>{this._guides.forEach(o=>o&&o.remove()),this._guides=[]};refresh=()=>{this.removeGuides(),this.createGuides()};kill=()=>{this.removeGuides(),this._it=null,this._helpers=null,this._utils=null,removeEventListener("resize",this._onResizeHandler,!1)}};export{y as default};
