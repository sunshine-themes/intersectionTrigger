/*
* Guides v1.0.0
* https://sunshine-themes.com/intersectionTrigger
*
* @license Copyright 2022, Sunshine. All rights reserved.
* Subject to the terms at https://sunshine-themes.com/intersectionTrigger/standard-licensew.
* @author: Sherif magdy, sherifmagdy@sunshine-themes.com
*/
                  
var C={enter:{trigger:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Enter"},root:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Root Enter"}},leave:{trigger:{backgroundColor:"#ff0000",color:"#000",text:"Leave"},root:{backgroundColor:"#ff0000",color:"#000",text:"Root Leave"}}};var l={function:t=>typeof t=="function",string:t=>typeof t=="string",boolean:t=>typeof t=="boolean",object:t=>t&&typeof t=="object"&&!(t instanceof Array),inObject:(t,e)=>l.object(t)&&e in t,num:t=>typeof t=="number",percent:t=>t&&t.includes("%"),pixel:t=>t&&t.includes("px"),array:t=>t instanceof Array,element:t=>t instanceof HTMLElement||t instanceof Element,doc:t=>t&&t.nodeType===9,scrollable:(t,e=null)=>e?e==="y"?t.scrollHeight>t.clientHeight:t.scrollWidth>t.clientWidth:t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth,anime:t=>l.object(t)&&t.hasOwnProperty("animatables")&&!t.hasOwnProperty("add"),tl:t=>l.object(t)&&t.hasOwnProperty("add")&&l.function(t.add),animeInstance:t=>l.anime(t)||l.tl(t)};var k=t=>{let e=[];for(t=t.parentNode;t&&t!==document&&t!==document.documentElement;t=t.parentNode)e.push(t);return e},E=(t,e)=>{let g=t,p=e;return Object.entries(g).forEach(([i,c])=>{l.object(c)?E(c,p[i]=p[i]||{}):i in p||(p[i]=c)}),p};var z=class{constructor(e={}){return this.params=e,this._guides=[],this}_registerIntersectionTrigger(e){this._it=e,this._utils=this._it._utils,this._addResizeListener()}_addResizeListener(){this._onResizeHandler=this.update,this._utils.getRoot().addEventListener("resize",this._onResizeHandler,!1)}_removeResizeListener(){this._utils.getRoot().removeEventListener("resize",this._onResizeHandler,!1)}createGuides(){let e=this._utils.isVirtical(),g=u=>{let{triggerGuide:d,trigger:f,enter:x,position:_,text:R,color:L,backgroundColor:P}=u,r=(a,s,o)=>a.style[s]=o,n=document.createElement("div"),w=e?"100px":"1px",$=e?"1px":"100px",G=e?"top":"left";r(n,"width",w),r(n,"height",$),r(n,"position","absolute"),r(n,"zIndex","9999"),r(n,"backgroundColor",P),r(n,G,_),(()=>{let a={dir:e?x?"bottom":"top":"bottom",value:e?"5px":"25px"},s={dir:e||x?"right":"left",value:e?d||this._it._root?"0px":"25px":"5px"},o=document.createElement("span");o.innerText=R,n.appendChild(o),r(o,"position","absolute"),r(o,"color",L),r(o,"fontSize","16px"),r(o,"fontWeight","bold"),r(o,"backgroundColor",P),r(o,"padding","5px"),r(o,"width","max-content"),r(o,a.dir,a.value),r(o,s.dir,s.value)})(),this._guides.push(n),document.body.append(n);let D=(a,s)=>{let o=[...n.style.transform.matchAll(/(-?\d*\.?\d+)\s*(px|%)?/g)],h=o.length?o[0][1]:0,v=o.length>1?o[1][1]:0,y=parseFloat(a)+parseFloat(h),m=parseFloat(s)+parseFloat(v);r(n,"transform",`translate(${y}px,${m}px)`)},b=(a=!0)=>{let s=n.getBoundingClientRect(),o=a?f.getBoundingClientRect():this._utils.getRootRect(this._it.observer.rootMargin),h=(this._it._root??document.body).getBoundingClientRect(),v=e?{x:o.right-s.right,y:o.top+_*o.height-s.top}:{x:o.left+_*o.width-s.left,y:o.top-s.top},y=e?x?{x:h.right-s.left,y:o.bottom-s.bottom}:{x:h.right-s.left,y:o.top-s.top}:x?{x:o.right-s.right,y:h.bottom-s.top}:{x:o.left-s.left,y:h.bottom-s.top},m=a?v:y;D(m.x,m.y)};if(!d){r(n,e?"width":"height",this._it._isViewport?e?"100vw":"100vh":"100px"),r(n,"position",this._it._isViewport?"fixed":"absolute"),this._it._isViewport&&!e&&r(n,"top","0px"),this._it._isViewport||b(!1);return}b(),k(f).forEach(a=>{!l.scrollable(a)||a.addEventListener("scroll",()=>b(),!1)})},i=(u=>{let d=C;return l.object(u)&&(d=E(d,u)),d})(this.params),c=this._it.name;g({triggerGuide:!1,enter:!0,position:`${this._it._positionsData.rEP.value}${this._it._positionsData.rEP.unit}`,text:`${c} ${i.enter.root.text}`,color:i.enter.root.color,backgroundColor:i.enter.root.backgroundColor}),g({triggerGuide:!1,enter:!1,position:`${this._it._positionsData.rLP.value}${this._it._positionsData.rLP.unit}`,text:`${c} ${i.leave.root.text}`,color:i.leave.root.color,backgroundColor:i.leave.root.backgroundColor}),this._it.triggers.forEach(u=>{let{enter:d,leave:f}=this._utils.getTriggerData(u);g({triggerGuide:!0,trigger:u,enter:!0,position:d,text:`${c} ${i.enter.trigger.text}`,color:i.enter.trigger.color,backgroundColor:i.enter.trigger.backgroundColor}),g({triggerGuide:!0,trigger:u,enter:!1,position:f,text:`${c} ${i.leave.trigger.text}`,color:i.leave.trigger.color,backgroundColor:i.leave.trigger.backgroundColor})})}removeGuides=()=>{this._guides.forEach(e=>e&&e.remove()),this._guides=[]};update=()=>{this.removeGuides(),this.createGuides()};kill=()=>{this._removeResizeListener(),this.removeGuides(),this._it=null,this._utils=null}};export{z as default};
