/*
* Guides v1.0.0
* https://sunshine-themes.com/intersectionTrigger
*
* @license Copyright 2022, Sunshine. All rights reserved.
* Subject to the terms at https://sunshine-themes.com/intersectionTrigger/standard-licensew.
* @author: Sherif magdy, sherifmagdy@sunshine-themes.com
*/
                  
var R={enter:{trigger:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Enter"},root:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Root Enter"}},leave:{trigger:{backgroundColor:"#ff0000",color:"#000",text:"Leave"},root:{backgroundColor:"#ff0000",color:"#000",text:"Root Leave"}}};var u={function:t=>typeof t=="function",string:t=>typeof t=="string",boolean:t=>typeof t=="boolean",object:t=>t&&typeof t=="object"&&!(t instanceof Array),inObject:(t,e)=>u.object(t)&&e in t,num:t=>typeof t=="number",percent:t=>t&&t.includes("%"),pixel:t=>t&&t.includes("px"),array:t=>t instanceof Array,element:t=>t instanceof HTMLElement||t instanceof Element,doc:t=>t&&t.nodeType===9,scrollable:(t,e=null)=>e?e==="y"?t.scrollHeight>t.clientHeight:t.scrollWidth>t.clientWidth:t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth,anime:t=>u.object(t)&&t.hasOwnProperty("animatables")&&!t.hasOwnProperty("add"),tl:t=>u.object(t)&&t.hasOwnProperty("add")&&u.function(t.add),animeInstance:t=>u.anime(t)||u.tl(t)};var k=t=>{let e=[];for(t=t.parentNode;t&&t!==document&&t!==document.documentElement;t=t.parentNode)e.push(t);return e},P=(t,e)=>{let g=t,p=e;return Object.entries(g).forEach(([r,l])=>{u.object(l)?P(l,p[r]=p[r]||{}):r in p||(p[r]=l)}),p};var b=t=>{let e=t.getBoundingClientRect(),{top:g,bottom:p,right:r,left:l,height:c,width:d,x:h,y:f}=e;return{top:g,left:l,height:c,width:d,x:h,y:f,right:r-(r-l-t.clientWidth),bottom:p-(p-g-t.clientHeight)}};var B=class{constructor(e={}){return this.params=e,this._guides=[],this}_registerIntersectionTrigger(e){this._it=e,this._utils=this._it._utils,this._addResizeListener()}_addResizeListener(){!!this._onResizeHandler&&removeEventListener("resize",this._onResizeHandler,!1),this._onResizeHandler=()=>{this.refresh()},addEventListener("resize",this._onResizeHandler,!1)}createGuides(){let e=this._utils.isVirtical(),g=c=>{let{triggerGuide:d,trigger:h,enter:f,position:_,text:w,color:G,backgroundColor:C}=c,s=(a,i,o)=>a.style[i]=o,n=document.createElement("div"),L=e?"100px":"1px",z=e?"1px":"100px",H=e?"top":"left";s(n,"width",L),s(n,"height",z),s(n,"position","absolute"),s(n,"zIndex","9999"),s(n,"backgroundColor",C),s(n,H,_),(()=>{let a={dir:e?f?"bottom":"top":"bottom",value:e?"5px":"25px"},i={dir:e||f?"right":"left",value:e?d||this._it._root?"0px":"25px":"5px"},o=document.createElement("span");o.innerText=w,n.appendChild(o),s(o,"position","absolute"),s(o,"color",G),s(o,"fontSize","16px"),s(o,"fontWeight","bold"),s(o,"backgroundColor",C),s(o,"padding","5px"),s(o,"width","max-content"),s(o,a.dir,a.value),s(o,i.dir,i.value)})(),this._guides.push(n),document.body.append(n);let T=(a,i)=>{let o=[...n.style.transform.matchAll(/(-?\d*\.?\d+)\s*(px|%)?/g)],x=o.length?o[0][1]:0,y=o.length>1?o[1][1]:0,E=parseFloat(a)+parseFloat(x),m=parseFloat(i)+parseFloat(y);s(n,"transform",`translate(${E}px,${m}px)`)},v=(a=!0)=>{let i=n.getBoundingClientRect(),o=a?b(h):this._utils.getRootRect(this._it.observer.rootMargin),x=this._it._root?b(this._it._root):b(document.body),y=e?{x:o.right-i.right,y:o.top+_*o.height-i.top}:{x:o.left+_*o.width-i.left,y:o.top-i.top},E=e?f?{x:x.right-i.left,y:o.bottom-i.bottom}:{x:x.right-i.left,y:o.top-i.top}:f?{x:o.right-i.right,y:x.bottom-i.top}:{x:o.left-i.left,y:x.bottom-i.top},m=a?y:E;T(m.x,m.y)};if(!d){s(n,e?"width":"height",this._it._isRootViewport?e?"100vw":"100vh":"100px"),s(n,"position",this._it._isRootViewport?"fixed":"absolute"),this._it._isRootViewport&&!e&&s(n,"top","0px"),this._it._isRootViewport||v(!1);return}v(),k(h).forEach(a=>{!u.scrollable(a)||a.addEventListener("scroll",i=>v(),!1)})},r=(c=>{let d=R;return u.object(c)&&(d=P(d,c)),d})(this.params),l=this._it.name;g({triggerGuide:!1,enter:!0,position:this._it._positions.rootEnterPosition.guide,text:`${l} ${r.enter.root.text}`,color:r.enter.root.color,backgroundColor:r.enter.root.backgroundColor}),g({triggerGuide:!1,enter:!1,position:this._it._positions.rootLeavePosition.guide,text:`${l} ${r.leave.root.text}`,color:r.leave.root.color,backgroundColor:r.leave.root.backgroundColor}),this._it.triggers.forEach(c=>{let{enter:d,leave:h}=this._utils.getTriggerData(c);g({triggerGuide:!0,trigger:c,enter:!0,position:d,text:`${l} ${r.enter.trigger.text}`,color:r.enter.trigger.color,backgroundColor:r.enter.trigger.backgroundColor}),g({triggerGuide:!0,trigger:c,enter:!1,position:h,text:`${l} ${r.leave.trigger.text}`,color:r.leave.trigger.color,backgroundColor:r.leave.trigger.backgroundColor})})}removeGuides=()=>{this._guides.forEach(e=>e&&e.remove()),this._guides=[]};refresh=()=>{this.removeGuides(),this.createGuides()};kill=()=>{this.removeGuides(),this._it=null,this._utils=null,removeEventListener("resize",this._onResizeHandler,!1)}};export{B as default};
