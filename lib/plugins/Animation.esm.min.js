/*
* Animation v1.0.0
* https://sunshine-themes.com/intersectionTrigger
*
* @license Copyright 2022, Sunshine. All rights reserved.
* Subject to the terms at https://sunshine-themes.com/intersectionTrigger/standard-licensew.
* @author: Sherif magdy, sherifmagdy@sunshine-themes.com
*/
                  
var L=()=>{};var Y=["play","complete","reverse","complete"],D={to:null,after:1,speed:100,maxDistance:500,onStart:L,onComplete:L};var S={instance:null,toggleActions:Y,control:!1,snap:!1};var n={function:t=>typeof t=="function",string:t=>typeof t=="string",boolean:t=>typeof t=="boolean",object:t=>t&&typeof t=="object"&&!(t instanceof Array),inObject:(t,e)=>n.object(t)&&e in t,num:t=>typeof t=="number",percent:t=>t&&t.includes("%"),pixel:t=>t&&t.includes("px"),array:t=>t instanceof Array,element:t=>t instanceof HTMLElement||t instanceof Element,doc:t=>t&&t.nodeType===9,scrollable:(t,e=null)=>e?e==="y"?t.scrollHeight>t.clientHeight:t.scrollWidth>t.clientWidth:t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth,anime:t=>n.object(t)&&t.hasOwnProperty("animatables")&&!t.hasOwnProperty("add"),tl:t=>n.object(t)&&t.hasOwnProperty("add")&&n.function(t.add),animeInstance:t=>n.anime(t)||n.tl(t)},I=(t,e,o)=>Math.min(Math.max(t,e),o),R=t=>t.split(/\s+/);var g=(t,e)=>{let o=t,a=e;return Object.entries(o).forEach(([s,l])=>{n.object(l)?g(l,a[s]=a[s]||{}):s in a||(a[s]=l)}),a},H=t=>{throw new Error(t)};var Z=class{constructor(e){return this._registerIntersectionTrigger(e),this}_registerIntersectionTrigger(e){this._it=e,this._utils=this._it._utils}animate(e,o,a){let{instance:s,toggleActions:l,control:i,snap:r}=o;if(!s)return;if(i){let{animate:u}=this._utils.getTriggerStates(e,"onScroll"),y=this._utils.getTriggerStates(e,"ids"),{enter:W,leave:F,minPosition:N,maxPosition:V}=this._utils.getTriggerData(e),{ref:q,refOpposite:G,length:p}=this._utils.dirProps(),$=this._utils.isVirtical(),P=e.getBoundingClientRect(),z=P[p]-(N*P[p]+(1-V)*P[p]),M=this._utils.getRoot(),O=s.duration,b=h=>s.seek(h),w=h=>{let J=h.getBoundingClientRect(),j=this._utils.getTriggerStates(h,"ids");this._it.rootBounds=this._utils.getRootRect(this._it.observer.rootMargin);let E=this._it.rootBounds,A=z+(this._it._isREPGreater?E[p]:-E[p]),_=0,[K,tt,Q,et]=this._utils.getPositions(J,E,{enter:W,leave:F,ref:q,refOpposite:G,length:p}),C=Q-K;if(C>0&&(_=O*C/A,n.num(i)?setTimeout(()=>b(_),i*1e3):b(_)),r){let k=Math.round(Math.max(r.speed*17/1e3,1)),v=0,x=(d,m=!1)=>{let f=m?-1:1;if($?M.scrollBy({top:k*f,behavior:"instant"}):M.scrollBy({left:k*f,behavior:"instant"}),v+=k,v>=d){v=0,r.onComplete(this._it);return}requestAnimationFrame(()=>x(d,m))};clearTimeout(j.snapTimeOutId);let U=setTimeout(()=>{let d=r.to.map(B=>_-B),m=d.map(B=>Math.abs(B)),f=Math.min(...m),X=d[m.indexOf(f)],T=A*f/O;if(!(T>=r.maxDistance||T<k)){if(r.onStart(this._it),X<0){x(T);return}x(T,!0)}},r.after*1e3);this._utils.setTriggerStates(h,{ids:{...j,snapTimeOutId:U}})}};switch(a){case 0:case 2:if(this._it._states.oCbFirstInvoke&&w(e),u)break;this._utils.setTriggerScrollStates(e,"animate",w);break;case 1:case 3:if(clearTimeout(y.snapTimeOutId),this._utils.setTriggerScrollStates(e,"animate",null),a===1){b(O);break}b(0);break}return}let c=l[a];if(c!=="none")switch(c){case"play":s.reversed&&s.reverse(),1>s.progress&&s[c]();break;case"restart":case"reset":s.reversed&&s.reverse(),s[c]();break;case"pause":s[c]();break;case"complete":s.pause(),s.seek(s.reversed?0:s.duration);break;case"reverse":if(s.reversed)break;s[c](),s.paused&&s.play();break;case"kill":n.inObject(s,"kill")&&s.kill(),this._utils.setTriggerData(e,null,{animation:{...S}});break}}parse(e){let o={};switch(!0){case n.animeInstance(e):o=g(S,{instance:e});break;case n.object(e):{this._params=g(S,e),n.animeInstance(this._params.instance)||H("Invalid anime instance");let{toggleActions:a,snap:s}=this._params;s&&this.parseSnap(),n.string(a)&&(this._params.toggleActions=R(a)),o=this._params}break}return n.inObject(o,"instance")&&o.instance.reset(),o}parseSnap(){let{instance:e,snap:o}=this._params,a=r=>{let c=[],u=r;for(;u<1;)c.push(I(u,0,1)),u=u+r;return c.map(y=>Math.round(y*e.duration))},s=r=>{if(n.num(r))return a(r);if(n.string(r))return l(r);if(n.array(r))return r},l=()=>n.inObject(e,"marks")?e.marks.map(u=>u.time):void 0,i={};switch(!0){case(n.boolean(o)&&o):i.to=l(o);break;case n.array(o):i.to=o;break;case n.num(o):i.to=a(o);break;case n.object(o):i=o,i.to=s(i.to);break}this._params.snap=g(D,i)}kill(){this._it=null,this._utils=null}};export{Z as default};
