/*
* Animation v1.0.0
* https://sunshine-themes.com/intersectionTrigger
*
* @license Copyright 2022, Sunshine. All rights reserved.
* Subject to the terms at https://sunshine-themes.com/intersectionTrigger/standard-licensew.
* @author: Sherif magdy, sherifmagdy@sunshine-themes.com
*/
                  
var G=["play","finish","reverse","finish"],R={to:null,after:1,speed:600,maxDistance:500};var O={instance:null,toggleActions:G,control:!1,snap:!1};var n={function:t=>typeof t=="function",string:t=>typeof t=="string",boolean:t=>typeof t=="boolean",object:t=>t&&typeof t=="object"&&!(t instanceof Array),inObject:(t,s)=>n.object(t)&&s in t,num:t=>typeof t=="number",percent:t=>t&&t.includes("%"),pixel:t=>t&&t.includes("px"),array:t=>t instanceof Array,element:t=>t instanceof HTMLElement||t instanceof Element,doc:t=>t&&t.nodeType===9,scrollable:(t,s=null)=>s?s==="y"?t.scrollHeight>t.clientHeight:t.scrollWidth>t.clientWidth:t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth,anime:t=>n.object(t)&&t.hasOwnProperty("animatables")&&!t.hasOwnProperty("add"),tl:t=>n.object(t)&&t.hasOwnProperty("add")&&n.function(t.add),animeInstance:t=>n.anime(t)||n.tl(t)},W=(t,s,a)=>Math.min(Math.max(t,s),a),F=t=>t.split(/\s+/);var k=(t,s)=>{let a=t,o=s;return Object.entries(a).forEach(([e,l])=>{n.object(l)?k(l,o[e]=o[e]||{}):e in o||(o[e]=l)}),o},N=t=>{throw new Error(t)};var J=class{constructor(s){return this._registerIntersectionTrigger(s),this}_registerIntersectionTrigger(s){this._it=s,this._utils=this._it._utils}animate(s,a,o){let{instance:e,toggleActions:l,control:r,snap:u}=a;if(!e)return;if(r){let{animate:T}=this._utils.getTriggerStates(s,"onScroll"),c=this._utils.getTriggerStates(s,"ids"),{enter:i,leave:g}=this._utils.getTriggerData(s),{ref:d,refOpposite:v,length:h}=this._utils.dirProps(),V=this._utils.isVirtical(),x=s.getBoundingClientRect(),q=x[h]-(i*x[h]+(1-g)*x[h]),M=this._utils.getRoot(),j=e.duration,A=B=>{let I=B.getBoundingClientRect(),C=this._utils.getTriggerStates(B,"ids");this._it.rootBounds=this._utils.getRootRect(this._it.observer.rootMargin);let D=this._it.rootBounds,L=q+D[h],_=0,H=D[v]-(I[d]+i*I[h]);if(H>0&&(_=j*H/L,n.num(r)?setTimeout(()=>e.seek(_),r*1e3):e.seek(_)),u){let y=Math.round(Math.max(u.speed*17/1e3,1)),w=0,E=(f,m=!1)=>{let b=m?-1:1;if(V?M.scrollBy({top:y*b,behavior:"instant"}):M.scrollBy({left:y*b,behavior:"instant"}),w+=y,w>=f){w=0;return}requestAnimationFrame(()=>E(f,m))};clearTimeout(C.snapTimeOutId);let $=setTimeout(()=>{let f=u.to.map(P=>_-P),m=f.map(P=>Math.abs(P)),b=Math.min(...m),z=f[m.indexOf(b)],S=L*b/j;if(!(S>=u.maxDistance||S<y)){if(z<0){E(S);return}E(S,!0)}},u.after*1e3);this._utils.setTriggerStates(B,{ids:{...C,snapTimeOutId:$}})}};switch(o){case 0:case 2:if(this._it._states.oCbFirstInvoke&&A(s),T)break;this._utils.setTriggerScrollStates(s,"animate",A);break;case 1:case 3:clearTimeout(c.snapTimeOutId),this._utils.setTriggerScrollStates(s,"animate",null);break}return}let p=l[o];if(p!=="none")switch(p){case"play":e.reversed&&e.reverse(),1>e.progress&&e[p]();break;case"restart":case"reset":e.reversed&&e.reverse(),e[p]();break;case"pause":break;case"finish":e.pause(),e.seek(e.reversed?0:e.duration);break;case"reverse":if(e.reversed)break;e[p](),e.paused&&e.play();break;case"kill":n.inObject(e,"kill")&&e.kill(),this._utils.setTriggerData(s,null,{animation:{...O}});break}}parse(s){let a={};switch(!0){case n.animeInstance(s):a=k(O,{instance:s});break;case n.object(s):{let o=k(O,s),{instance:e,toggleActions:l,snap:r}=o;n.animeInstance(e)||N("Invalid anime instance");let u=i=>{let g=[],d=i;for(;d<1;)g.push(W(d,0,1)),d=d+i;return g.map(v=>Math.round(v*e.duration))},p=i=>{if(n.num(i))return u(i);if(n.string(i))return T(i);if(n.array(i))return i},T=()=>n.inObject(e,"marks")?e.marks.map(d=>d.time):void 0,c={};switch(!0){case(n.boolean(r)&&r):c.to=T(r);break;case n.array(r):c.to=r;break;case n.num(r):c.to=u(r);break;case n.object(r):c=r,c.to=p(c.to);break}o.snap=k(R,c),n.string(l)&&(o.toggleActions=F(l)),a=o}break}return n.inObject(a,"instance")&&a.instance.reset(),a}kill(){this._it=null,this._utils=null}};export{J as default};
