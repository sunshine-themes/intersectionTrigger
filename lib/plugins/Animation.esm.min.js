/*
* Animation v1.0.0
* https://sunshine-themes.com/intersectionTrigger
*
* @license Copyright 2022, Sunshine. All rights reserved.
* Subject to the terms at https://sunshine-themes.com/intersectionTrigger/standard-licensew.
* @author: Sherif magdy, sherifmagdy@sunshine-themes.com
*/
                  
var R=()=>{};var J=["play","finish","reverse","finish"],W={to:null,after:1,speed:100,maxDistance:500,onStart:R,onComplete:R};var O={instance:null,toggleActions:J,control:!1,snap:!1};var n={function:t=>typeof t=="function",string:t=>typeof t=="string",boolean:t=>typeof t=="boolean",object:t=>t&&typeof t=="object"&&!(t instanceof Array),inObject:(t,s)=>n.object(t)&&s in t,num:t=>typeof t=="number",percent:t=>t&&t.includes("%"),pixel:t=>t&&t.includes("px"),array:t=>t instanceof Array,element:t=>t instanceof HTMLElement||t instanceof Element,doc:t=>t&&t.nodeType===9,scrollable:(t,s=null)=>s?s==="y"?t.scrollHeight>t.clientHeight:t.scrollWidth>t.clientWidth:t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth,anime:t=>n.object(t)&&t.hasOwnProperty("animatables")&&!t.hasOwnProperty("add"),tl:t=>n.object(t)&&t.hasOwnProperty("add")&&n.function(t.add),animeInstance:t=>n.anime(t)||n.tl(t)},F=(t,s,a)=>Math.min(Math.max(t,s),a),N=t=>t.split(/\s+/);var k=(t,s)=>{let a=t,o=s;return Object.entries(a).forEach(([e,u])=>{n.object(u)?k(u,o[e]=o[e]||{}):e in o||(o[e]=u)}),o},V=t=>{throw new Error(t)};var K=class{constructor(s){return this._registerIntersectionTrigger(s),this}_registerIntersectionTrigger(s){this._it=s,this._utils=this._it._utils}animate(s,a,o){let{instance:e,toggleActions:u,control:r,snap:c}=a;if(!e)return;if(r){let{animate:T}=this._utils.getTriggerStates(s,"onScroll"),l=this._utils.getTriggerStates(s,"ids"),{enter:i,leave:g}=this._utils.getTriggerData(s),{ref:d,refOpposite:v,length:h}=this._utils.dirProps(),q=this._utils.isVirtical(),x=s.getBoundingClientRect(),$=x[h]-(i*x[h]+(1-g)*x[h]),C=this._utils.getRoot(),M=e.duration,j=B=>{let A=B.getBoundingClientRect(),I=this._utils.getTriggerStates(B,"ids");this._it.rootBounds=this._utils.getRootRect(this._it.observer.rootMargin);let D=this._it.rootBounds,L=$+D[h],_=0,H=D[v]-(A[d]+i*A[h]);if(H>0&&(_=M*H/L,n.num(r)?setTimeout(()=>e.seek(_),r*1e3):e.seek(_)),c){let S=Math.round(Math.max(c.speed*17/1e3,1)),E=0,w=(f,m=!1)=>{let b=m?-1:1;if(q?C.scrollBy({top:S*b,behavior:"instant"}):C.scrollBy({left:S*b,behavior:"instant"}),E+=S,E>=f){E=0,c.onComplete(this._it);return}requestAnimationFrame(()=>w(f,m))};clearTimeout(I.snapTimeOutId);let z=setTimeout(()=>{let f=c.to.map(P=>_-P),m=f.map(P=>Math.abs(P)),b=Math.min(...m),G=f[m.indexOf(b)],y=L*b/M;if(!(y>=c.maxDistance||y<S)){if(c.onStart(this._it),G<0){w(y);return}w(y,!0)}},c.after*1e3);this._utils.setTriggerStates(B,{ids:{...I,snapTimeOutId:z}})}};switch(o){case 0:case 2:if(this._it._states.oCbFirstInvoke&&j(s),T)break;this._utils.setTriggerScrollStates(s,"animate",j);break;case 1:case 3:clearTimeout(l.snapTimeOutId),this._utils.setTriggerScrollStates(s,"animate",null);break}return}let p=u[o];if(p!=="none")switch(p){case"play":e.reversed&&e.reverse(),1>e.progress&&e[p]();break;case"restart":case"reset":e.reversed&&e.reverse(),e[p]();break;case"pause":break;case"finish":e.pause(),e.seek(e.reversed?0:e.duration);break;case"reverse":if(e.reversed)break;e[p](),e.paused&&e.play();break;case"kill":n.inObject(e,"kill")&&e.kill(),this._utils.setTriggerData(s,null,{animation:{...O}});break}}parse(s){let a={};switch(!0){case n.animeInstance(s):a=k(O,{instance:s});break;case n.object(s):{let o=k(O,s),{instance:e,toggleActions:u,snap:r}=o;n.animeInstance(e)||V("Invalid anime instance");let c=i=>{let g=[],d=i;for(;d<1;)g.push(F(d,0,1)),d=d+i;return g.map(v=>Math.round(v*e.duration))},p=i=>{if(n.num(i))return c(i);if(n.string(i))return T(i);if(n.array(i))return i},T=()=>n.inObject(e,"marks")?e.marks.map(d=>d.time):void 0,l={};switch(!0){case(n.boolean(r)&&r):l.to=T(r);break;case n.array(r):l.to=r;break;case n.num(r):l.to=c(r);break;case n.object(r):l=r,l.to=p(l.to);break}o.snap=k(W,l),n.string(u)&&(o.toggleActions=N(u)),a=o}break}return n.inObject(a,"instance")&&a.instance.reset(),a}kill(){this._it=null,this._utils=null}};export{K as default};
