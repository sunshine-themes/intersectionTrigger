/*
* Animation v1.0.0
* https://sunshine-themes.com/intersectionTrigger
*
* @license Copyright 2022, Sunshine. All rights reserved.
* Subject to the terms at https://sunshine-themes.com/intersectionTrigger/standard-licensew.
* @author: Sherif magdy, sherifmagdy@sunshine-themes.com
*/
                  
var j=Object.defineProperty;var V=t=>j(t,"__esModule",{value:!0});var q=(t,e)=>{for(var n in e)j(t,n,{get:e[n],enumerable:!0})};V(exports);q(exports,{default:()=>H});var A=()=>{};var G=["play","complete","reverse","complete"],C={to:null,after:1,speed:100,maxDistance:500,onStart:A,onComplete:A};var y={instance:null,toggleActions:G,control:!1,snap:!1};var r={function:t=>typeof t=="function",string:t=>typeof t=="string",boolean:t=>typeof t=="boolean",object:t=>t&&typeof t=="object"&&!(t instanceof Array),inObject:(t,e)=>r.object(t)&&e in t,num:t=>typeof t=="number",percent:t=>t&&t.includes("%"),pixel:t=>t&&t.includes("px"),array:t=>t instanceof Array,element:t=>t instanceof HTMLElement||t instanceof Element,doc:t=>t&&t.nodeType===9,scrollable:(t,e=null)=>e?e==="y"?t.scrollHeight>t.clientHeight:t.scrollWidth>t.clientWidth:t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth,anime:t=>r.object(t)&&t.hasOwnProperty("animatables")&&!t.hasOwnProperty("add"),tl:t=>r.object(t)&&t.hasOwnProperty("add")&&r.function(t.add),animeInstance:t=>r.anime(t)||r.tl(t)},L=(t,e,n)=>Math.min(Math.max(t,e),n),D=t=>t.split(/\s+/);var k=(t,e)=>{let n=t,o=e;return Object.entries(n).forEach(([s,u])=>{r.object(u)?k(u,o[s]=o[s]||{}):s in o||(o[s]=u)}),o},I=t=>{throw new Error(t)};var H=class{constructor(e){return this._registerIntersectionTrigger(e),this.init(),this}init(){this._snap={};let{ref:e,refOpposite:n,length:o}=this._utils.dirProps(),s=this._utils.isVirtical(),u=this._utils.getRoot();this.seek=(i,a,c)=>{if(r.num(c)){setTimeout(()=>i.seek(a),c*1e3);return}i.seek(a)},this.startSnaping=({snapDistance:i,currentDis:a,snap:c,step:l,toRef:p=!1})=>{let d=p?-1:1;if(s?u.scrollBy({top:l*d,behavior:"instant"}):u.scrollBy({left:l*d,behavior:"instant"}),a+=l,a>=i){a=0,c.onComplete(this._it);return}requestAnimationFrame(()=>this.startSnaping({snapDistance:i,currentDis:a,snap:c,step:l,toRef:p}))},this.animateHandler=(i,{enter:a,leave:c,tIL:l,instance:p,duration:d,snap:h,step:S,control:P})=>{let f=i.getBoundingClientRect(),m=this._utils.getTriggerStates(i,"ids");this._it.rootBounds=this._utils.getRootRect(this._it.observer.rootMargin);let b=this._it.rootBounds,_=l+(this._it._isREPGreater?b[o]:-b[o]),g=0,[T,$,R,z]=this._utils.getPositions(f,b,{enter:a,leave:c,ref:e,refOpposite:n,length:o}),v=R-T;if(v>0&&(g=d*v/_,this.seek(p,g,P)),h){let W=0;clearTimeout(m.snapTimeOutId);let F=setTimeout(()=>{let x=h.to.map(E=>g-E),B=x.map(E=>Math.abs(E)),M=Math.min(...B),N=x[B.indexOf(M)],O=_*M/d,w={snapDistance:O,currentDis:W,snap:h,step:S};if(!(O>=h.maxDistance||O<S)){if(h.onStart(this._it),N<0){this.startSnaping(w);return}this.startSnaping({...w,toRef:!0})}},h.after*1e3);this._utils.setTriggerStates(i,{ids:{...m,snapTimeOutId:F}})}}}_registerIntersectionTrigger(e){this._it=e,this._utils=this._it._utils}animate(e,n,o){let{instance:s,toggleActions:u,control:i,snap:a}=n;if(!s)return;if(i){let{animate:l}=this._utils.getTriggerStates(e,"onScroll"),p=this._utils.getTriggerStates(e,"ids"),{enter:d,leave:h,minPosition:S,maxPosition:P}=this._utils.getTriggerData(e),{length:f}=this._utils.dirProps(),m=e.getBoundingClientRect(),b=m[f]-(S*m[f]+(1-P)*m[f]),_=s.duration,g=0;a&&(g=Math.round(Math.max(a.speed*17/1e3,1)));let T={enter:d,leave:h,tIL:b,instance:s,duration:_,snap:a,control:i,step:g};switch(o){case 0:case 2:if(this._it._states.oCbFirstInvoke&&this.animateHandler(e,T),l)break;this._utils.setTriggerScrollStates(e,"animate",()=>this.animateHandler(e,T));break;case 1:case 3:clearTimeout(p.snapTimeOutId),this._utils.setTriggerScrollStates(e,"animate",null),this.seek(s,o===1?_:0,i);break}return}let c=u[o];if(c!=="none")switch(c){case"play":s.reversed&&s.reverse(),1>s.progress&&s[c]();break;case"restart":case"reset":s.reversed&&s.reverse(),s[c]();break;case"pause":s[c]();break;case"complete":s.pause(),s.seek(s.reversed?0:s.duration);break;case"reverse":if(s.reversed)break;s[c](),s.paused&&s.play();break;case"kill":r.inObject(s,"kill")&&s.kill(),this._utils.setTriggerData(e,null,{animation:{...y}});break}}parse(e){let n={};switch(!0){case r.animeInstance(e):n=k(y,{instance:e});break;case r.object(e):{this._params=k(y,e),r.animeInstance(this._params.instance)||I("Invalid anime instance");let{toggleActions:o,snap:s}=this._params;s&&this.parseSnap(),r.string(o)&&(this._params.toggleActions=D(o)),n=this._params}break}return r.inObject(n,"instance")&&n.instance.reset(),n}parseSnap(){let{instance:e,snap:n}=this._params,o=a=>{let c=[],l=a;for(;l<1;)c.push(L(l,0,1)),l=l+a;return c.map(p=>Math.round(p*e.duration))},s=a=>{if(r.num(a))return o(a);if(r.string(a))return u(a);if(r.array(a))return a},u=()=>r.inObject(e,"marks")?e.marks.map(l=>l.time):void 0,i={};switch(!0){case(r.boolean(n)&&n):i.to=u(n);break;case r.array(n):i.to=n;break;case r.num(n):i.to=o(n);break;case r.object(n):i=n,i.to=s(i.to);break}this._params.snap=k(C,i)}update(){}kill(){this._it=null,this._utils=null}};
