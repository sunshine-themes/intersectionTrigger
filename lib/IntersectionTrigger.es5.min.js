/*
* IntersectionTrigger v1.0.0
* https://sunshine-themes.com/intersectionTrigger
*
* @license Copyright 2022, Sunshine. All rights reserved.
* Subject to the terms at https://sunshine-themes.com/intersectionTrigger/standard-licensew.
* @author: Sherif magdy, sherifmagdy@sunshine-themes.com
*/
                  
var intersectiontrigger=(function(){var _t=Object.defineProperty;var mt=function(n,e){for(var t in e)_t(n,t,{get:e[t],enumerable:!0})};var $t={};mt($t,{default:function(){return D}});var P=function(){},bt=["add","remove","add","remove"],yt=["play","finish","reverse","finish"],N={defaults:{once:!1,onEnter:P,onLeave:P,onEnterBack:P,onLeaveBack:P,toggleClass:null,animation:null},enter:"0% 100%",leave:"100% 0%",axis:"y",name:"",root:null,onScroll:P},Q={hasEntered:!1,hasEnteredBack:!1,hasLeft:!0,hasLeftBack:!0,hasEnteredOnce:!1,onScroll:null};var x={targets:null,toggleActions:bt,classNames:null},I={instance:null,toggleActions:yt,control:!1};function St(n,e){return Et(n)||Ot(n,e)||Tt(n,e)||kt()}function kt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tt(n,e){if(!!n){if(typeof n=="string")return G(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return G(n,e)}}function G(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ot(n,e){var t=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,o=!1,a,s;try{for(t=t.call(n);!(i=(a=t.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(u){o=!0,s=u}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}return r}}function Et(n){if(Array.isArray(n))return n}function C(n){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(n)}var g={function:function(e){return typeof e=="function"},string:function(e){return typeof e=="string"},boolean:function(e){return typeof e=="boolean"},object:function(e){return e&&C(e)==="object"&&!(e instanceof Array)},inObject:function(e,t){return g.object(e)&&t in e},percent:function(e){return e&&e.includes("%")},pixel:function(e){return e&&e.includes("px")},array:function(e){return e instanceof Array},element:function(e){return e instanceof HTMLElement||e instanceof Element},doc:function(e){return e&&e.nodeType===9},scrollable:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return t?t==="y"?e.scrollHeight>e.clientHeight:e.scrollWidth>e.clientWidth:e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth},anime:function(e){return g.object(e)&&e.hasOwnProperty("animatables")&&!e.hasOwnProperty("add")},tl:function(e){return g.object(e)&&e.hasOwnProperty("add")&&g.function(e.add)},animeInstance:function(e){return g.anime(e)||g.tl(e)}},w=function(e){return e.split(/\s+/)},K=function(e,t){return e&&e.getBoundingClientRect()[t]},z=function(e,t){return t==="y"?e.scrollHeight:e.scrollWidth},T=function(e,t){g.string(e)&&(e=parseFloat(e));var r=Math.pow(10,t||0);return Math.round(e*r)/r};var b=function n(e,t){var r=e,i=t;return Object.entries(r).forEach(function(o){var a=St(o,2),s=a[0],u=a[1];g.object(u)?n(u,i[s]=i[s]||{}):s in i||(i[s]=u)}),i},y=function(e){throw new Error(e)},J=function(e){var t=e.getBoundingClientRect(),r=t.top,i=t.bottom,o=t.right,a=t.left,s=t.height,u=t.width,l=t.x,d=t.y;return{top:r,left:a,height:s,width:u,x:l,y:d,right:o-(o-a-e.clientWidth),bottom:i-(i-r-e.clientHeight)}};function Pt(n,e){var t=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Y(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(l){throw l},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=!0,a=!1,s;return{s:function(){t=t.call(n)},n:function(){var l=t.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(a)throw s}}}}function X(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function S(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?X(Object(t),!0).forEach(function(r){m(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):X(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function m(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function L(n){return It(n)||At(n)||Y(n)||wt()}function wt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Y(n,e){if(!!n){if(typeof n=="string")return j(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return j(n,e)}}function At(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function It(n){if(Array.isArray(n))return j(n)}function j(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Lt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Z(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Dt(n,e,t){return e&&Z(n.prototype,e),t&&Z(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var q=function(){function n(e){return Lt(this,n),this._it=e,this.setUtils(),this}return Dt(n,[{key:"setUtils",value:function(){var t=this;this.isVirtical=function(){return t._it.axis==="y"},this.isRootViewport=function(){return!t._it._root},this.getRoot=function(){var r;return(r=t._it._root)!==null&&r!==void 0?r:window},this.dirProps=function(){return t.isVirtical()?{ref:"top",length:"height",refOpposite:"bottom",innerLength:innerHeight}:{ref:"left",length:"width",refOpposite:"right",innerLength:innerWidth}},this.setRootMargin=function(){var r=z(t.isRootViewport()?document.body:t._it._root,t.isVirtical()?"x":"y");return t.isVirtical()?"".concat(t._it._positions.rootLeavePosition.strValue," ").concat(r,"px ").concat(t._it._positions.rootEnterPosition.strValue," ").concat(r,"px"):"".concat(r,"px ").concat(t._it._positions.rootEnterPosition.strValue," ").concat(r,"px ").concat(t._it._positions.rootLeavePosition.strValue)},this.setThreshold=function(){var r=[0,t._it._triggerParams.enter,t._it._triggerParams.leave,T(1-t._it._triggerParams.leave,2),1];return t._it.triggers.forEach(function(i){var o=t.getTriggerData(i),a=o.enter,s=o.leave;r.push(a,s,T(1-s,2))}),L(new Set(r))},this.parseQuery=function(r,i){switch(!0){case g.string(r):return L(document.querySelectorAll(r));case g.array(r):return r;case g.element(r):return[r];default:y("".concat(i," parameter must be a valid selector, an element or array of elements"))}},this.customParseQuery=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"trigger",o=i==="trigger",a=o?[]:{};return o?t.parseQuery(r,"trigger"):(a=g.string(r)?document.querySelector(r):g.element(r)?r:y("root parameter must be a valid selector or an element"),a)},this.validatePosition=function(r,i){return g.function(i)&&(i=i(t)),g.string(i)||y("".concat(r," parameter must be a string.")),i},this.setPositionData=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;r=t.validatePosition(o?"enter":"leave",r);var a=r.trim(),s=g.percent(a),u=g.pixel(a),l={};if(a=s?a.replace("%",""):u?a.replace("px",""):a,a=T(a),l.type=s?"percent":"pixel",s&&i)return l.value=a/100,l.strValue="".concat(a,"%"),l;var d=t.dirProps(),_=d.length,h=d.innerLength,c=t._it._root?K(t._it._root,_):h;switch(!0){case(s&&o):l.value=T(a/100-1,2),l.strValue="".concat(l.value*100,"%");break;case(s&&!o):l.value=-a/100,l.strValue="".concat(l.value*100,"%");break;case(u&&o):l.value=T(a-c,2),l.strValue="".concat(l.value,"px");break;case(u&&!o):l.value=-a,l.strValue="".concat(-a,"px");break}return l.guide=r,l},this.parsePositions=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";r=t.validatePosition("enter",r),i=t.validatePosition("leave",i);var o=r.trim().split(/\s+/g,2),a=i.trim().split(/\s+/g,2),s=[].concat(L(o),L(a));return{triggerEnterPosition:t.setPositionData(s[0]),rootEnterPosition:t.setPositionData(s[1],!1),triggerLeavePosition:t.setPositionData(s[2]),rootLeavePosition:t.setPositionData(s[3],!1,!1)}},this.deleteTriggerData=function(r){t._it._triggersData.delete(r)},this.hasTriggerData=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,o=t._it._triggersData.has(r);return i?o&&i in t.getTriggerData(r):o},this.getTriggerData=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return i?t.hasTriggerData(r,i)?t._it._triggersData.get(r)[i]:{}:t.hasTriggerData(r)&&t._it._triggersData.get(r)||{}},this.setTriggerData=function(r,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(o){var a=t.getTriggerData(r);g.object(a)&&t._it._triggersData.set(r,S(S({},a),o));return}t._it._triggersData.set(r,i)},this.getTriggerStates=function(r){var i=t.getTriggerData(r,"states"),o=i.hasEntered||i.hasEnteredBack;return S(S({},i),{},{hasEnteredFromOneSide:o})},this.setTriggerStates=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=t.getTriggerData(r),a=o&&S(S({},o.states),i);t.setTriggerData(r,null,{states:a})},this.onTriggerEnter=function(r){var i,o,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Enter",s=t.getTriggerStates(r),u=s.hasEnteredOnce,l=t.getTriggerData(r),d=l.onEnter,_=l.onEnterBack,h=l.toggleClass,c=l.animation,v=a==="Enter",p={callback:v?d:_,enterProp:v?"hasEntered":"hasEnteredBack",leaveProp:v?"hasLeftBack":"hasLeft",eventIndex:v?0:2};p.callback(r,t),h&&t.toggleClass(r,h,p.eventIndex),c&&t.animate(r,c,p.eventIndex);var f=u?(i={},m(i,p.enterProp,!0),m(i,p.leaveProp,!1),i):(o={},m(o,p.enterProp,!0),m(o,"hasLeft",!1),m(o,"hasLeftBack",!1),o);t.setTriggerStates(r,f),u||t.setTriggerStates(r,{hasEnteredOnce:!0})},this.onTriggerLeave=function(r){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Leave",a=t.getTriggerData(r),s=a.once,u=t.getTriggerStates(r),l=u.hasEnteredOnce,d=t.getTriggerData(r),_=d.onLeave,h=d.onLeaveBack,c=d.toggleClass,v=d.animation,p=o==="Leave",f={callback:p?_:h,leaveProp:p?"hasLeft":"hasLeftBack",eventIndex:p?1:3};f.callback(r,t),c&&t.toggleClass(r,c,f.eventIndex),v&&t.animate(r,v,f.eventIndex),t.setTriggerStates(r,(i={},m(i,f.leaveProp,!0),m(i,"hasEntered",!1),m(i,"hasEnteredBack",!1),i)),s&&l&&t._it.remove(r)},this.animate=function(r,i,o){var a=i.instance,s=i.toggleActions,u=i.control;if(!!a){if(u){switch(o){case 0:break}return}var l=s[o];if(l!=="none")switch(l){case"play":a.reversed&&a.reverse(),1>a.progress&&a[l]();break;case"restart":case"reset":a.reversed&&a.reverse(),a[l]();break;case"pause":break;case"finish":a.pause(),a.seek(a.reversed?0:a.duration);break;case"reverse":if(a.reversed)break;a[l](),a.paused&&a.play();break;case"kill":g.inObject(a,"kill")&&a.kill(),t.setTriggerData(r,null,{animation:S({},I)});break}}},this.toggleClass=function(r,i,o){var a=Pt(i),s;try{var u=function(){var _=s.value,h=_.targets,c=_.toggleActions,v=_.classNames;if(c[o]==="none")return"continue";v.forEach(function(p){return h.forEach(function(f){return f==="trigger"?r.classList[c[o]](p):f.classList[c[o]](p)})})};for(a.s();!(s=a.n()).done;)var l=u()}catch(d){a.e(d)}finally{a.f()}},this.parseToggleClass=function(r){var i=[];if(g.string(r)){var o=b(x,{targets:["trigger"],classNames:w(r)});return i.push([o]),i}return g.array(r)&&(i=r.map(function(a){var s=b(x,a),u=s.targets,l=s.classNames,d=s.toggleActions;return u&&(s.targets=t.parseQuery(u,"targets")),l&&(s.classNames=w(l)),g.string(d)&&(s.toggleActions=w(d)),s})),i},this.parseAnimation=function(r){var i={};switch(!0){case g.animeInstance(r):i=b(I,{instance:r});break;case g.object(r):{var o=b(I,r),a=o.toggleActions;g.string(a)&&(o.toggleActions=w(a)),i=o}break}return g.inObject(i,"instance")&&i.instance.reset(),i},this.toggleActions=function(r){var i=r.getBoundingClientRect();t._it.rootBounds=t.getRootRect(t._it.observer.rootMargin);var o=t._it.rootBounds,a=t.getTriggerData(r),s=a.enter,u=a.leave,l=t.getTriggerStates(r),d=l.hasEnteredFromOneSide,_=l.hasLeft,h=l.hasLeftBack,c=t.dirProps(),v=c.ref,p=c.refOpposite,f=c.length,E=!0;switch(!0){case(h&&i[v]+s*i[f]<=o[p]&&i[v]+s*i[f]>o[v]):t.onTriggerEnter(r);break;case(d&&i[v]+u*i[f]<=o[v]):t.onTriggerLeave(r);break;case(_&&i[v]+u*i[f]>=o[v]&&i[v]+u*i[f]<o[p]):t.onTriggerEnter(r,"EnterBack");break;case(d&&i[v]+s*i[f]>=o[p]):t.onTriggerLeave(r,"hasLeftBack");break;default:E=!1;break}return E},this.parseString=function(r){var i=r.split(/\s+/).map(function(o){var a=/^(-?\d*\.?\d+)(px|%)$/.exec(o);return{value:parseFloat(a[1]),unit:a[2]}});return i},this.parseRootMargin=function(r){var i=r||"0px",o=t.parseString(i);return o[1]=o[1]||o[0],o[2]=o[2]||o[0],o[3]=o[3]||o[1],o},this.expandRectByRootMargin=function(r,i){var o=t.parseRootMargin(i).map(function(s,u){return s.unit=="px"?s.value:s.value*(u%2?r.width:r.height)/100}),a={top:r.top-o[0],right:r.right+o[1],bottom:r.bottom+o[2],left:r.left-o[3]};return a.width=a.right-a.left,a.height=a.bottom-a.top,a},this.getRootRect=function(r){var i;if(t._it._root&&!g.doc(t._it._root))return i=J(t._it._root),t.expandRectByRootMargin(i,r);var o=g.doc(t._it._root)?t._it._root:document,a=o.documentElement,s=o.body;return i={top:0,left:0,right:a.clientWidth||s.clientWidth,width:a.clientWidth||s.clientWidth,bottom:a.clientHeight||s.clientHeight,height:a.clientHeight||s.clientHeight},t.expandRectByRootMargin(i,r)}}}]),n}();function R(n){return jt(n)||Ct(n)||et(n)||xt()}function xt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ct(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function jt(n){if(Array.isArray(n))return H(n)}function tt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function M(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tt(Object(t),!0).forEach(function(r){nt(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):tt(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Rt(n,e){var t=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=et(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(l){throw l},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=!0,a=!1,s;return{s:function(){t=t.call(n)},n:function(){var l=t.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(a)throw s}}}}function et(n,e){if(!!n){if(typeof n=="string")return H(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return H(n,e)}}function H(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Mt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function rt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Ht(n,e,t){return e&&rt(n.prototype,e),t&&rt(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function nt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var O=[],at=0,D=function(){function n(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Mt(this,n),nt(this,"_observerCallback",function(r,i){var o=e._utils.dirProps(),a=o.ref,s=o.refOpposite,u=o.length,l=Rt(r),d;try{for(l.s();!(d=l.n()).done;){var _=d.value,h=_.target,c=_.boundingClientRect,v=_.isIntersecting,p=_.intersectionRatio;e.rootBounds=_.rootBounds||e._utils.getRootRect(i.rootMargin);var f=e.rootBounds,E=f[u],$=E/c[u],V=e._utils.getTriggerData(h),A=V.enter,k=V.leave,F=e._utils.getTriggerStates(h),W=F.hasEnteredFromOneSide,it=F.onScroll,ot=c[u]>=E,st=A>$,ut=1-k>$,B=ot&&(st||ut),U=!!it,lt=c[a]+A*c[u]<f[s]&&c[a]+A*c[u]>f[a],ct=c[a]+k*c[u]<f[s]&&c[a]+k*c[u]>f[a],gt=c[a]+A*c[u]<f[a],ft=c[a]+k*c[u]>f[s],ht=c[a]+k*c[u]<f[a]&&p<1-k,vt=c[a]<f[a],dt=c[s]<f[a];switch(!0){case e._states.oCbFirstInvoke:switch(!0){case(!v&&vt&&dt):e._utils.onTriggerEnter(h),e._utils.onTriggerLeave(h);break;case v:switch(!0){case(lt||ct||gt&&ft):e._utils.onTriggerEnter(h);break;case ht:e._utils.onTriggerEnter(h),e._utils.onTriggerLeave(h);break}B&&e._utils.setTriggerStates(h,{onScroll:e._utils.toggleActions});break}break;case!v:switch(U&&e._utils.setTriggerStates(h,{onScroll:null}),!0){case(W&&c[s]<f[a]):e._utils.onTriggerLeave(h);break;case(W&&c[a]>f[s]):e._utils.onTriggerLeave(h,"onLeaveBack");break}break;case(v&&!U):e._utils.toggleActions(h),B&&e._utils.setTriggerStates(h,{onScroll:e._utils.toggleActions});break}}}catch(pt){l.e(pt)}finally{l.f()}e._states.oCbFirstInvoke=!1}),this._userOptions=t,this.triggers=[],this._triggersData=new WeakMap,this._guidesInstance=null,this._utils=new q(this),this.id=at,at++,O.push(this),this._setStates(),this._setInstance()}return Ht(n,[{key:"_setStates",value:function(){this._states={},this._states.oCbFirstInvoke=!0}},{key:"_addScrollListener",value:function(){var t=this,r=this._utils.getRoot();!!this._onScrollHandler&&r.removeEventListener("scroll",this._onScrollHandler,!1);var i=function(a){t.triggers.forEach(function(s){var u,l=(u=t._utils.getTriggerStates(s))===null||u===void 0?void 0:u.onScroll;l&&l(s)}),t.onScroll(a,t)};this._onScrollHandler=function(o){return requestAnimationFrame(function(){return i(o)})},r.addEventListener("scroll",this._onScrollHandler,!1)}},{key:"_createInstance",value:function(){this._threshold=this._utils.setThreshold(),this._observerOptions={root:this._root,rootMargin:this._rootMargin,threshold:this._threshold},this.observer=new IntersectionObserver(this._observerCallback,this._observerOptions),this._root=this.observer.root,this.rootBounds=this._utils.getRootRect(this.observer.rootMargin),this._isRootViewport=this._utils.isRootViewport(),this._addScrollListener()}},{key:"_setInstance",value:function(){this._defaultOptions=N,this._options=b(this._defaultOptions,this._userOptions),this.axis=g.string(this._options.axis)?this._options.axis:y("axis parameter must be a string."),this.name=g.string(this._options.name)?this._options.name:y("name parameter must be a string."),this._root=!!this._options.root&&this._utils.customParseQuery(this._options.root,"root")||null,this._positions=this._utils.parsePositions(this._options.enter,this._options.leave),this.onScroll=this._options.onScroll;var t=this._options.defaults,r=t.once,i=t.onEnter,o=t.onLeave,a=t.onEnterBack,s=t.onLeaveBack,u=t.toggleClass,l=t.animation;return this._triggerParams={enter:this._positions.triggerEnterPosition.value,leave:this._positions.triggerLeavePosition.value,once:r,onEnter:i,onLeave:o,onEnterBack:a,onLeaveBack:s,toggleClass:u,animation:l},this._rootMargin=this._utils.setRootMargin(),this._createInstance(),this}},{key:"add",value:function(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this._utils.customParseQuery(r);"enter"in i&&(i.enter=this._utils.setPositionData(i.enter).value),"leave"in i&&(i.leave=this._utils.setPositionData(i.leave).value);var a=M(M({},b(this._triggerParams,i)),{},{states:M({},Q)});a.toggleClass&&(a.toggleClass=this._utils.parseToggleClass(a.toggleClass)),a.animation&&(a.animation=this._utils.parseAnimation(a.animation)),this.triggers=[].concat(R(this.triggers),R(o)),this.triggers=R(new Set(this.triggers));var s=!1;return[i.enter,i.leave].forEach(function(u){return!t._threshold.some(function(l){return u===l})&&(s=!0)}),s?(this._disconnect(),o.forEach(function(u){return t._utils.setTriggerData(u,a)}),this._createInstance(),this.triggers.forEach(function(u){return t.observer.observe(u)})):o.forEach(function(u){t._utils.setTriggerData(u,a),t.observer.observe(u)}),this._guidesInstance&&this._guidesInstance.refresh(),this}},{key:"remove",value:function(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this._utils.customParseQuery(r);i.forEach(function(a){t._utils.deleteTriggerData(a),t.observer.unobserve(a)});var o=this.triggers.filter(function(a){var s=i.some(function(u){return a===u});return!s});return this.triggers=o,this._guidesInstance&&this._guidesInstance.refresh(),this}},{key:"_disconnect",value:function(){this.observer&&this.observer.disconnect(),this.observer=null}},{key:"kill",value:function(){this._disconnect(),removeEventListener("scroll",this._onScrollHandler,!1),this.triggers=[],this.removeGuides();var t=O.indexOf(this);~t&&O.splice(t,1)}},{key:"addGuides",value:function(t){return g.inObject(t,"_registerIntersectionTrigger")||y("Invalid Guides Instance."),t._registerIntersectionTrigger(this),t.refresh(),this._guidesInstance=t,this}},{key:"removeGuides",value:function(){return this._guidesInstance&&this._guidesInstance.kill(),this._guidesInstance=null,this}},{key:"update",value:function(){this._guidesInstance&&this._guidesInstance.refresh()}}]),n}();D.getInstances=function(){return O};D.getInstanceById=function(n){return O.find(function(e){return e.id===n})};D.update=function(){return O.forEach(function(n){return n.update()})};return $t;})();
