/*
* IntersectionTrigger v1.0.0
* https://sunshine-themes.com/intersectionTrigger
*
* @license Copyright 2022, Sunshine. All rights reserved.
* Subject to the terms at https://sunshine-themes.com/intersectionTrigger/standard-licensew.
* @author: Sherif magdy, sherifmagdy@sunshine-themes.com
*/
                  
var intersectiontrigger=(function(){var mt=Object.defineProperty;var _t=function(n,e){for(var t in e)mt(n,t,{get:e[t],enumerable:!0})};var Vt={};_t(Vt,{default:function(){return F}});var I=function(){},bt=["add","remove","add","remove"],yt=["play","finish","reverse","finish"],J={defaults:{once:!1,onEnter:I,onLeave:I,onEnterBack:I,onLeaveBack:I,toggleClass:null,animation:null},enter:"0% 100%",leave:"100% 0%",axis:"y",name:"",root:null,onScroll:I},X={hasEntered:!1,hasEnteredBack:!1,hasLeft:!0,hasLeftBack:!0,hasEnteredOnce:!1,onScroll:{backup:null,animate:null}};var $={targets:null,toggleActions:bt,classNames:null},M={instance:null,toggleActions:yt,control:!1};function St(n,e){return Et(n)||Ot(n,e)||Tt(n,e)||kt()}function kt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tt(n,e){if(!!n){if(typeof n=="string")return Y(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Y(n,e)}}function Y(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ot(n,e){var t=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,o=!1,a,s;try{for(t=t.call(n);!(i=(a=t.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(u){o=!0,s=u}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}return r}}function Et(n){if(Array.isArray(n))return n}function U(n){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(n)}var g={function:function(e){return typeof e=="function"},string:function(e){return typeof e=="string"},boolean:function(e){return typeof e=="boolean"},object:function(e){return e&&U(e)==="object"&&!(e instanceof Array)},inObject:function(e,t){return g.object(e)&&t in e},num:function(e){return typeof e=="number"},percent:function(e){return e&&e.includes("%")},pixel:function(e){return e&&e.includes("px")},array:function(e){return e instanceof Array},element:function(e){return e instanceof HTMLElement||e instanceof Element},doc:function(e){return e&&e.nodeType===9},scrollable:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return t?t==="y"?e.scrollHeight>e.clientHeight:e.scrollWidth>e.clientWidth:e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth},anime:function(e){return g.object(e)&&e.hasOwnProperty("animatables")&&!e.hasOwnProperty("add")},tl:function(e){return g.object(e)&&e.hasOwnProperty("add")&&g.function(e.add)},animeInstance:function(e){return g.anime(e)||g.tl(e)}},D=function(e){return e.split(/\s+/)},Z=function(e,t){return e&&e.getBoundingClientRect()[t]},q=function(e,t){return t==="y"?e.scrollHeight:e.scrollWidth},w=function(e,t){g.string(e)&&(e=parseFloat(e));var r=Math.pow(10,t||0);return Math.round(e*r)/r};var k=function n(e,t){var r=e,i=t;return Object.entries(r).forEach(function(o){var a=St(o,2),s=a[0],u=a[1];g.object(u)?n(u,i[s]=i[s]||{}):s in i||(i[s]=u)}),i},T=function(e){throw new Error(e)},tt=function(e){var t=e.getBoundingClientRect(),r=t.top,i=t.bottom,o=t.right,a=t.left,s=t.height,u=t.width,l=t.x,d=t.y;return{top:r,left:a,height:s,width:u,x:l,y:d,right:o-(o-a-e.clientWidth),bottom:i-(i-r-e.clientHeight)}};function Pt(n,e){var t=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=rt(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(l){throw l},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=!0,a=!1,s;return{s:function(){t=t.call(n)},n:function(){var l=t.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(a)throw s}}}}function et(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function O(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?et(Object(t),!0).forEach(function(r){y(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):et(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function y(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function H(n){return Lt(n)||At(n)||rt(n)||wt()}function wt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rt(n,e){if(!!n){if(typeof n=="string")return N(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return N(n,e)}}function At(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Lt(n){if(Array.isArray(n))return N(n)}function N(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function It(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function nt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Dt(n,e,t){return e&&nt(n.prototype,e),t&&nt(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var at=function(){function n(e){return It(this,n),this._it=e,this.setUtils(),this}return Dt(n,[{key:"setUtils",value:function(){var t=this;this.isVirtical=function(){return t._it.axis==="y"},this.isRootViewport=function(){return!t._it._root},this.getRoot=function(){var r;return(r=t._it._root)!==null&&r!==void 0?r:window},this.dirProps=function(){return t.isVirtical()?{ref:"top",length:"height",refOpposite:"bottom",innerLength:innerHeight}:{ref:"left",length:"width",refOpposite:"right",innerLength:innerWidth}},this.setRootMargin=function(){var r=q(t.isRootViewport()?document.body:t._it._root,t.isVirtical()?"x":"y");return t.isVirtical()?"".concat(t._it._positions.rootLeavePosition.strValue," ").concat(r,"px ").concat(t._it._positions.rootEnterPosition.strValue," ").concat(r,"px"):"".concat(r,"px ").concat(t._it._positions.rootEnterPosition.strValue," ").concat(r,"px ").concat(t._it._positions.rootLeavePosition.strValue)},this.setThreshold=function(){var r=[0,t._it._triggerParams.enter,t._it._triggerParams.leave,w(1-t._it._triggerParams.leave,2),1];return t._it.triggers.forEach(function(i){var o=t.getTriggerData(i),a=o.enter,s=o.leave;r.push(a,s,w(1-s,2))}),H(new Set(r))},this.parseQuery=function(r,i){switch(!0){case g.string(r):return H(document.querySelectorAll(r));case g.array(r):return r;case g.element(r):return[r];default:T("".concat(i," parameter must be a valid selector, an element or array of elements"))}},this.customParseQuery=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"trigger",o=i==="trigger",a=o?[]:{};return o?t.parseQuery(r,"trigger"):(a=g.string(r)?document.querySelector(r):g.element(r)?r:T("root parameter must be a valid selector or an element"),a)},this.validatePosition=function(r,i){return g.function(i)&&(i=i(t._it)),g.string(i)||T("".concat(r," parameter must be a string.")),i},this.setPositionData=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;r=t.validatePosition(o?"enter":"leave",r);var a=r.trim(),s=g.percent(a),u=g.pixel(a),l={};if(a=s?a.replace("%",""):u?a.replace("px",""):a,a=w(a),l.type=s?"percent":"pixel",s&&i)return l.value=a/100,l.strValue="".concat(a,"%"),l;var d=t.dirProps(),m=d.length,v=d.innerLength,c=t._it._root?Z(t._it._root,m):v;switch(!0){case(s&&o):l.value=w(a/100-1,2),l.strValue="".concat(l.value*100,"%");break;case(s&&!o):l.value=-a/100,l.strValue="".concat(l.value*100,"%");break;case(u&&o):l.value=w(a-c,2),l.strValue="".concat(l.value,"px");break;case(u&&!o):l.value=-a,l.strValue="".concat(-a,"px");break}return l.guide=r,l},this.parsePositions=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";r=t.validatePosition("enter",r),i=t.validatePosition("leave",i);var o=r.trim().split(/\s+/g,2),a=i.trim().split(/\s+/g,2),s=[].concat(H(o),H(a));return{triggerEnterPosition:t.setPositionData(s[0]),rootEnterPosition:t.setPositionData(s[1],!1),triggerLeavePosition:t.setPositionData(s[2]),rootLeavePosition:t.setPositionData(s[3],!1,!1)}},this.deleteTriggerData=function(r){t._it._triggersData.delete(r)},this.hasTriggerData=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,o=t._it._triggersData.has(r);return i?o&&i in t.getTriggerData(r):o},this.getTriggerData=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return i?t.hasTriggerData(r,i)?t._it._triggersData.get(r)[i]:{}:t.hasTriggerData(r)&&t._it._triggersData.get(r)||{}},this.setTriggerData=function(r,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(o){var a=t.getTriggerData(r);g.object(a)&&t._it._triggersData.set(r,O(O({},a),o));return}t._it._triggersData.set(r,i)},this.getTriggerStates=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,o=t.getTriggerData(r,"states"),a=o.hasEntered||o.hasEnteredBack;return i?o[i]:O(O({},o),{},{hasEnteredFromOneSide:a})},this.setTriggerStates=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=t.getTriggerData(r),a=o&&O(O({},o.states),i);t.setTriggerData(r,null,{states:a})},this.setTriggerScrollStates=function(r,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=t.getTriggerStates(r,"onScroll");if(a[i]=o,t.setTriggerStates(r,{onscroll:O({},a)}),o){t._it._states.runningScrollCbs===0&&t._it.addScrollListener(t._it._onScrollHandler),t._it._states.runningScrollCbs++;return}0<t._it._states.runningScrollCbs&&t._it._states.runningScrollCbs--,t._it._states.runningScrollCbs===0&&t._it.removeScrollListener(t._it._onScrollHandler)},this.onTriggerEnter=function(r){var i,o,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Enter",s=t.getTriggerStates(r),u=s.hasEnteredOnce,l=t.getTriggerData(r),d=l.onEnter,m=l.onEnterBack,v=l.toggleClass,c=l.animation,h=a==="Enter",p={callback:h?d:m,enterProp:h?"hasEntered":"hasEnteredBack",leaveProp:h?"hasLeftBack":"hasLeft",eventIndex:h?0:2};p.callback(r,t),v&&t.toggleClass(r,v,p.eventIndex),c&&t.animate(r,c,p.eventIndex);var f=u?(i={},y(i,p.enterProp,!0),y(i,p.leaveProp,!1),i):(o={},y(o,p.enterProp,!0),y(o,"hasLeft",!1),y(o,"hasLeftBack",!1),o);t.setTriggerStates(r,f),u||t.setTriggerStates(r,{hasEnteredOnce:!0})},this.onTriggerLeave=function(r){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Leave",a=t.getTriggerData(r),s=a.once,u=t.getTriggerStates(r),l=u.hasEnteredOnce,d=t.getTriggerData(r),m=d.onLeave,v=d.onLeaveBack,c=d.toggleClass,h=d.animation,p=o==="Leave",f={callback:p?m:v,leaveProp:p?"hasLeft":"hasLeftBack",eventIndex:p?1:3};f.callback(r,t),c&&t.toggleClass(r,c,f.eventIndex),h&&t.animate(r,h,f.eventIndex),t.setTriggerStates(r,(i={},y(i,f.leaveProp,!0),y(i,"hasEntered",!1),y(i,"hasEnteredBack",!1),i)),s&&l&&t._it.remove(r)},this.animate=function(r,i,o){var a=i.instance,s=i.toggleActions,u=i.control;if(!!a){if(u){var l=t.getTriggerStates(r,"onScroll"),d=l.animate,m=t.getTriggerData(r),v=m.enter,c=m.leave,h=t.dirProps(),p=h.ref,f=h.refOpposite,_=h.length,E=r.getBoundingClientRect(),C=E[_]-(v*E[_]+(1-c)*E[_]),P=a.duration,b=function(W){var x=W.getBoundingClientRect();t._it.rootBounds=t.getRootRect(t._it.observer.rootMargin);var j=t._it.rootBounds,R=j[f]-(x[p]+v*x[_]);if(R>0){var L=P*R/(C+j[_]);if(g.num(u)){setTimeout(function(){return a.seek(L)},u*1e3);return}a.seek(L)}};switch(o){case 0:case 2:if(t._it._states.oCbFirstInvoke&&b(r),d)break;t.setTriggerScrollStates(r,"animate",b);break;case 1:case 3:t.setTriggerScrollStates(r,"animate",null);break}return}var S=s[o];if(S!=="none")switch(S){case"play":a.reversed&&a.reverse(),1>a.progress&&a[S]();break;case"restart":case"reset":a.reversed&&a.reverse(),a[S]();break;case"pause":break;case"finish":a.pause(),a.seek(a.reversed?0:a.duration);break;case"reverse":if(a.reversed)break;a[S](),a.paused&&a.play();break;case"kill":g.inObject(a,"kill")&&a.kill(),t.setTriggerData(r,null,{animation:O({},M)});break}}},this.parseAnimation=function(r){var i={};switch(!0){case g.animeInstance(r):i=k(M,{instance:r});break;case g.object(r):{var o=k(M,r),a=o.toggleActions;g.string(a)&&(o.toggleActions=D(a)),i=o}break}return g.inObject(i,"instance")&&i.instance.reset(),i},this.toggleClass=function(r,i,o){var a=Pt(i),s;try{var u=function(){var m=s.value,v=m.targets,c=m.toggleActions,h=m.classNames;if(c[o]==="none")return"continue";h.forEach(function(p){return v.forEach(function(f){return f==="trigger"?r.classList[c[o]](p):f.classList[c[o]](p)})})};for(a.s();!(s=a.n()).done;)var l=u()}catch(d){a.e(d)}finally{a.f()}},this.parseToggleClass=function(r){var i=[];if(g.string(r)){var o=k($,{targets:["trigger"],classNames:D(r)});return i.push([o]),i}return g.array(r)&&(i=r.map(function(a){var s=k($,a),u=s.targets,l=s.classNames,d=s.toggleActions;return u&&(s.targets=t.parseQuery(u,"targets")),l&&(s.classNames=D(l)),g.string(d)&&(s.toggleActions=D(d)),s})),i},this.toggleActions=function(r){var i=r.getBoundingClientRect();t._it.rootBounds=t.getRootRect(t._it.observer.rootMargin);var o=t._it.rootBounds,a=t.getTriggerData(r),s=a.enter,u=a.leave,l=t.getTriggerStates(r),d=l.hasEnteredFromOneSide,m=l.hasLeft,v=l.hasLeftBack,c=t.dirProps(),h=c.ref,p=c.refOpposite,f=c.length,_=!0;switch(!0){case(v&&i[h]+s*i[f]<=o[p]&&i[h]+s*i[f]>o[h]):t.onTriggerEnter(r);break;case(d&&i[h]+u*i[f]<=o[h]):t.onTriggerLeave(r);break;case(m&&i[h]+u*i[f]>=o[h]&&i[h]+u*i[f]<o[p]):t.onTriggerEnter(r,"EnterBack");break;case(d&&i[h]+s*i[f]>=o[p]):t.onTriggerLeave(r,"hasLeftBack");break;default:_=!1;break}return _},this.parseString=function(r){var i=r.split(/\s+/).map(function(o){var a=/^(-?\d*\.?\d+)(px|%)$/.exec(o);return{value:parseFloat(a[1]),unit:a[2]}});return i},this.parseRootMargin=function(r){var i=r||"0px",o=t.parseString(i);return o[1]=o[1]||o[0],o[2]=o[2]||o[0],o[3]=o[3]||o[1],o},this.expandRectByRootMargin=function(r,i){var o=t.parseRootMargin(i).map(function(s,u){return s.unit=="px"?s.value:s.value*(u%2?r.width:r.height)/100}),a={top:r.top-o[0],right:r.right+o[1],bottom:r.bottom+o[2],left:r.left-o[3]};return a.width=a.right-a.left,a.height=a.bottom-a.top,a},this.getRootRect=function(r){var i;if(t._it._root&&!g.doc(t._it._root))return i=tt(t._it._root),t.expandRectByRootMargin(i,r);var o=g.doc(t._it._root)?t._it._root:document,a=o.documentElement,s=o.body;return i={top:0,left:0,right:a.clientWidth||s.clientWidth,width:a.clientWidth||s.clientWidth,bottom:a.clientHeight||s.clientHeight,height:a.clientHeight||s.clientHeight},t.expandRectByRootMargin(i,r)}}}]),n}();function Q(n){return jt(n)||xt(n)||ot(n)||Ct()}function Ct(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xt(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function jt(n){if(Array.isArray(n))return K(n)}function it(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function G(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?it(Object(t),!0).forEach(function(r){V(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):it(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Rt(n,e){var t=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=ot(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(l){throw l},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=!0,a=!1,s;return{s:function(){t=t.call(n)},n:function(){var l=t.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(a)throw s}}}}function ot(n,e){if(!!n){if(typeof n=="string")return K(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return K(n,e)}}function K(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Mt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function st(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Ht(n,e,t){return e&&st(n.prototype,e),t&&st(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function V(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var A=[],ut=0,F=function(){function n(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Mt(this,n),V(this,"_rAFCallback",function(r){e.triggers.forEach(function(i){var o=e._utils.getTriggerStates(i,"onScroll");for(var a in o)o[a]&&o[a](i,r)})}),V(this,"_onScrollHandler",function(){return requestAnimationFrame(e._rAFCallback)}),V(this,"_observerCallback",function(r,i){var o=e._utils.dirProps(),a=o.ref,s=o.refOpposite,u=o.length,l=Rt(r),d;try{for(l.s();!(d=l.n()).done;){var m=d.value,v=m.target,c=m.boundingClientRect,h=m.isIntersecting,p=m.intersectionRatio;e.rootBounds=m.rootBounds||e._utils.getRootRect(i.rootMargin);var f=e.rootBounds,_=f[u],E=_/c[u],C=e._utils.getTriggerData(v),P=C.enter,b=C.leave,S=e._utils.getTriggerStates(v),B=S.hasEnteredFromOneSide,W=S.onScroll.backup,x=c[u]>=_,j=P>E,R=1-b>E,L=x&&(j||R),z=!!W,lt=c[a]+P*c[u]<f[s]&&c[a]+P*c[u]>f[a],ct=c[a]+b*c[u]<f[s]&&c[a]+b*c[u]>f[a],gt=c[a]+P*c[u]<f[a],ft=c[a]+b*c[u]>f[s],ht=c[a]+b*c[u]<f[a]&&p<1-b,vt=c[a]<f[a],dt=c[s]<f[a];switch(!0){case e._states.oCbFirstInvoke:switch(!0){case(!h&&vt&&dt):e._utils.onTriggerEnter(v),e._utils.onTriggerLeave(v);break;case h:switch(!0){case(lt||ct||gt&&ft):e._utils.onTriggerEnter(v);break;case ht:e._utils.onTriggerEnter(v),e._utils.onTriggerLeave(v);break}L&&e._utils.setTriggerScrollStates(v,"backup",e._utils.toggleActions);break}break;case!h:switch(z&&e._utils.setTriggerScrollStates(v,"backup",null),!0){case(B&&c[s]<f[a]):e._utils.onTriggerLeave(v);break;case(B&&c[a]>f[s]):e._utils.onTriggerLeave(v,"onLeaveBack");break}break;case(h&&!z):e._utils.toggleActions(v),L&&e._utils.setTriggerScrollStates(v,"backup",e._utils.toggleActions);break}}}catch(pt){l.e(pt)}finally{l.f()}e._states.oCbFirstInvoke=!1}),this._userOptions=t,this.triggers=[],this._triggersData=new WeakMap,this._guidesInstance=null,this._utils=new at(this),this.id=ut,ut++,A.push(this),this._setStates(),this._setInstance()}return Ht(n,[{key:"_setStates",value:function(){this._states={},this._states.oCbFirstInvoke=!0,this._states.runningScrollCbs=0}},{key:"addScrollListener",value:function(t){this._utils.getRoot().addEventListener("scroll",t,!1)}},{key:"removeScrollListener",value:function(t){this._utils.getRoot().removeEventListener("scroll",t,!1)}},{key:"_createInstance",value:function(){this._threshold=this._utils.setThreshold(),this._observerOptions={root:this._root,rootMargin:this._rootMargin,threshold:this._threshold},this.observer=new IntersectionObserver(this._observerCallback,this._observerOptions),this._root=this.observer.root,this.rootBounds=this._utils.getRootRect(this.observer.rootMargin),this._isRootViewport=this._utils.isRootViewport()}},{key:"_setInstance",value:function(){this._defaultOptions=J,this._options=k(this._defaultOptions,this._userOptions),this.axis=g.string(this._options.axis)?this._options.axis:T("axis parameter must be a string."),this.name=g.string(this._options.name)?this._options.name:T("name parameter must be a string."),this._root=!!this._options.root&&this._utils.customParseQuery(this._options.root,"root")||null,this._positions=this._utils.parsePositions(this._options.enter,this._options.leave),this.customScrollHandler=this._options.onScroll;var t=this._options.defaults,r=t.once,i=t.onEnter,o=t.onLeave,a=t.onEnterBack,s=t.onLeaveBack,u=t.toggleClass,l=t.animation;return this._triggerParams={enter:this._positions.triggerEnterPosition.value,leave:this._positions.triggerLeavePosition.value,once:r,onEnter:i,onLeave:o,onEnterBack:a,onLeaveBack:s,toggleClass:u,animation:l},this._rootMargin=this._utils.setRootMargin(),this._createInstance(),this.customScrollHandler&&this.addScrollListener(this.customScrollHandler),this}},{key:"add",value:function(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this._utils.customParseQuery(r);"enter"in i&&(i.enter=this._utils.setPositionData(i.enter).value),"leave"in i&&(i.leave=this._utils.setPositionData(i.leave).value);var a=G(G({},k(this._triggerParams,i)),{},{states:G({},X)});a.toggleClass&&(a.toggleClass=this._utils.parseToggleClass(a.toggleClass)),a.animation&&(a.animation=this._utils.parseAnimation(a.animation)),this.triggers=Q(new Set([].concat(Q(this.triggers),Q(o))));var s=!1;return[i.enter,i.leave].forEach(function(u){return!t._threshold.some(function(l){return u===l})&&(s=!0)}),s?(this._disconnect(),o.forEach(function(u){return t._utils.setTriggerData(u,a)}),this._createInstance(),this.triggers.forEach(function(u){return t.observer.observe(u)})):o.forEach(function(u){t._utils.setTriggerData(u,a),t.observer.observe(u)}),this._guidesInstance&&this._guidesInstance.refresh(),this}},{key:"remove",value:function(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this._utils.customParseQuery(r);i.forEach(function(a){t._utils.deleteTriggerData(a),t.observer.unobserve(a)});var o=this.triggers.filter(function(a){var s=i.some(function(u){return a===u});return!s});return this.triggers=o,this._guidesInstance&&this._guidesInstance.refresh(),this}},{key:"_disconnect",value:function(){this.observer&&this.observer.disconnect(),this.observer=null}},{key:"kill",value:function(){this._disconnect(),this.removeScrollListener(this.customScrollHandler),this.triggers=[],this.removeGuides();var t=A.indexOf(this);~t&&A.splice(t,1)}},{key:"addGuides",value:function(t){return g.inObject(t,"_registerIntersectionTrigger")||T("Invalid Guides Instance."),t._registerIntersectionTrigger(this),t.refresh(),this._guidesInstance=t,this}},{key:"removeGuides",value:function(){return this._guidesInstance&&this._guidesInstance.kill(),this._guidesInstance=null,this}},{key:"update",value:function(){this._guidesInstance&&this._guidesInstance.refresh()}}]),n}();F.getInstances=function(){return A};F.getInstanceById=function(n){return A.find(function(e){return e.id===n})};F.update=function(){return A.forEach(function(n){return n.update()})};return Vt;})();
