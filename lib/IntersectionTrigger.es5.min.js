/*
* IntersectionTrigger v1.0.0
* https://sunshine-themes.com/intersectionTrigger
*
* @license Copyright 2022, Sunshine. All rights reserved.
* Subject to the terms at https://sunshine-themes.com/intersectionTrigger/standard-licensew.
* @author: Sherif magdy, sherifmagdy@sunshine-themes.com
*/
                  
var intersectiontrigger=(function(){var vt=Object.defineProperty;var pt=function(r,e){for(var t in e)vt(r,t,{get:e[t],enumerable:!0})};var Wt={};pt(Wt,{default:function(){return T}});var w=function(){};var Z={defaults:{enter:"0%",leave:"100%",once:!1,onEnter:w,onLeave:w,onEnterBack:w,onLeaveBack:w,toggleClass:null,animation:null},rootEnter:"100%",rootLeave:"0%",axis:"y",name:"",root:null,guides:!1,onScroll:w},q={hasEntered:!1,hasEnteredBack:!1,hasLeft:!0,hasLeftBack:!0,hasEnteredOnce:!1,onScroll:{backup:null,animate:null},ids:{snapTimeOutId:0}};function mt(r,e){return St(r)||yt(r,e)||bt(r,e)||_t()}function _t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bt(r,e){if(!!r){if(typeof r=="string")return tt(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tt(r,e)}}function tt(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function yt(r,e){var t=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],i=!0,a=!1,o,s;try{for(t=t.call(r);!(i=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(a)throw s}}return n}}function St(r){if(Array.isArray(r))return r}function H(r){return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(r)}var v={function:function(e){return typeof e=="function"},string:function(e){return typeof e=="string"},boolean:function(e){return typeof e=="boolean"},object:function(e){return e&&H(e)==="object"&&!(e instanceof Array)},inObject:function(e,t){return v.object(e)&&t in e},num:function(e){return typeof e=="number"},percent:function(e){return e&&e.includes("%")},pixel:function(e){return e&&e.includes("px")},array:function(e){return e instanceof Array},element:function(e){return e instanceof HTMLElement||e instanceof Element},doc:function(e){return e&&e.nodeType===9},scrollable:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return t?t==="y"?e.scrollHeight>e.clientHeight:e.scrollWidth>e.clientWidth:e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth},anime:function(e){return v.object(e)&&e.hasOwnProperty("animatables")&&!e.hasOwnProperty("add")},tl:function(e){return v.object(e)&&e.hasOwnProperty("add")&&v.function(e.add)},animeInstance:function(e){return v.anime(e)||v.tl(e)}};var et=function(e,t){return e&&e.getBoundingClientRect()[t]},rt=function(e,t){return t==="y"?e.scrollHeight:e.scrollWidth},I=function(e,t){v.string(e)&&(e=parseFloat(e));var n=Math.pow(10,t||0);return Math.round(e*n)/n};var F=function r(e,t){var n=e,i=t;return Object.entries(n).forEach(function(a){var o=mt(a,2),s=o[0],l=o[1];v.object(l)?r(l,i[s]=i[s]||{}):s in i||(i[s]=l)}),i},b=function(e){throw new Error(e)},W=function(e,t){return[e,t].sort(function(n,i){return n-i})},z=function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);return{value:parseFloat(t[1]),unit:t[2]}},nt=function(e){return e.split(/\s+/).map(function(t){return z(t)})};function Tt(r,e){return Et(r)||kt(r,e)||ot(r,e)||Pt()}function Pt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kt(r,e){var t=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],i=!0,a=!1,o,s;try{for(t=t.call(r);!(i=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(a)throw s}}return n}}function Et(r){if(Array.isArray(r))return r}function it(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function y(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?it(Object(t),!0).forEach(function(n){_(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):it(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function _(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function at(r){return xt(r)||wt(r)||ot(r)||Ot()}function Ot(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ot(r,e){if(!!r){if(typeof r=="string")return V(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return V(r,e)}}function wt(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function xt(r){if(Array.isArray(r))return V(r)}function V(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Lt(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function st(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function At(r,e,t){return e&&st(r.prototype,e),t&&st(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}var lt=function(){function r(e){return Lt(this,r),this._it=e,this.setUtils(),this}return At(r,[{key:"setUtils",value:function(){var t=this;this.isVirtical=function(){return t._it.axis==="y"},this.isViewport=function(){return!t._it._root},this.getRoot=function(){var n;return(n=t._it._root)!==null&&n!==void 0?n:window},this.dirProps=function(){return t.isVirtical()?{ref:"top",length:"height",refOpposite:"bottom",clientLength:document.documentElement.clientHeight}:{ref:"left",length:"width",refOpposite:"right",clientLength:document.documentElement.clientWidth}},this.setRootMargin=function(n,i){var a=t.dirProps(),o=a.length,s=a.clientLength,l=t._it._root?et(t._it._root,o):s,u=function(p,h){var d=p.value,m=p.unit,x=p.normal;if(m==="%")return x*h;if(m==="px")return d};n.pixeled=u(n,l),i.pixeled=u(i,l),t._it._isREPGreater=n.pixeled>=i.pixeled;var f={};f.fromOppRef="".concat((t._it._isREPGreater?n.pixeled:i.pixeled)-l,"px"),f.fromRef="".concat(-1*(t._it._isREPGreater?i.pixeled:n.pixeled),"px");var c=rt(t.isViewport()?document.body:t._it._root,t.isVirtical()?"x":"y");return t.isVirtical()?"".concat(f.fromRef," ").concat(c,"px ").concat(f.fromOppRef," ").concat(c,"px"):"".concat(c,"px ").concat(f.fromOppRef," ").concat(c,"px ").concat(f.fromRef)},this.setThreshold=function(){var n=t._it._defaultTriggerParams,i=n.enter,a=n.leave,o=n.maxPosition,s=[0,i,a,I(1-o,2),1];return t._it.triggers.forEach(function(l){var u=t.getTriggerData(l),f=u.enter,c=u.leave,g=u.maxPosition;s.push(f,c,I(1-g,2))}),at(new Set(s))},this.parseQuery=function(n,i){switch(!0){case v.string(n):return at(document.querySelectorAll(n));case v.array(n):return n;case v.element(n):return[n];default:b("".concat(i," parameter must be a valid selector, an element or array of elements"))}},this.customParseQuery=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"trigger",a=i==="trigger",o=a?[]:{};return a?t.parseQuery(n,"trigger"):(o=v.string(n)?document.querySelector(n):v.element(n)?n:b("root parameter must be a valid selector or an element"),o)},this.validatePosition=function(n){return v.function(n)&&(n=n(t._it)),v.string(n)||b("enter, leave, rootEnter and rootLeave parameters must be a string."),n},this.setPositionData=function(n){n=t.validatePosition(n);var i=n.trim(),a=z(i),o=I(a.value);return{original:i,unit:a.unit,value:o,normal:a.unit==="%"?o/100:null}},this.parsePositions=function(n,i,a,o){var s=[n,a,i,o].map(function(l){return t.setPositionData(t.validatePosition(l).trim())});return{tEP:s[0],rEP:s[1],tLP:s[2],rLP:s[3]}},this.deleteTriggerData=function(n){t._it._triggersData.delete(n)},this.hasTriggerData=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=t._it._triggersData.has(n);return i?a&&i in t.getTriggerData(n):a},this.getTriggerData=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return i?t.hasTriggerData(n,i)?t._it._triggersData.get(n)[i]:{}:t.hasTriggerData(n)&&t._it._triggersData.get(n)||{}},this.setTriggerData=function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(a){var o=t.getTriggerData(n);v.object(o)&&t._it._triggersData.set(n,y(y({},o),a));return}t._it._triggersData.set(n,i)},this.getTriggerStates=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=t.getTriggerData(n,"states"),o=a.hasEntered||a.hasEnteredBack;return i?a[i]:y(y({},a),{},{hasEnteredFromOneSide:o})},this.setTriggerStates=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.getTriggerData(n),o=a&&y(y({},a.states),i);t.setTriggerData(n,null,{states:o})},this.setTriggerScrollStates=function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=t.getTriggerStates(n,"onScroll");if(o[i]=a,t.setTriggerStates(n,{onscroll:y({},o)}),a){t._it._states.runningScrollCbs===0&&t._it.addScrollListener(t._it._onScrollHandler),t._it._states.runningScrollCbs++;return}0<t._it._states.runningScrollCbs&&t._it._states.runningScrollCbs--,t._it._states.runningScrollCbs===0&&t._it.removeScrollListener(t._it._onScrollHandler)},this.onTriggerEnter=function(n){var i,a,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Enter",s=t.getTriggerStates(n),l=s.hasEnteredOnce,u=t.getTriggerData(n),f=u.onEnter,c=u.onEnterBack,g=u.toggleClass,p=u.animation,h=o==="Enter",d={callback:h?f:c,enterProp:h?"hasEntered":"hasEnteredBack",leaveProp:h?"hasLeftBack":"hasLeft",eventIndex:h?0:2};if(d.callback(n,t._it),t._it.killed)return t.kill();g&&t._it.toggleClass.toggle(n,g,d.eventIndex),p&&t._it.animation.animate(n,p,d.eventIndex);var m=l?(i={},_(i,d.enterProp,!0),_(i,d.leaveProp,!1),i):(a={},_(a,d.enterProp,!0),_(a,"hasLeft",!1),_(a,"hasLeftBack",!1),a);t.setTriggerStates(n,m),l||t.setTriggerStates(n,{hasEnteredOnce:!0})},this.onTriggerLeave=function(n){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Leave",o=t.getTriggerData(n),s=o.once,l=t.getTriggerStates(n),u=l.hasEnteredOnce,f=t.getTriggerData(n),c=f.onLeave,g=f.onLeaveBack,p=f.toggleClass,h=f.animation,d=a==="Leave",m={callback:d?c:g,leaveProp:d?"hasLeft":"hasLeftBack",eventIndex:d?1:3};if(m.callback(n,t._it),t._it.killed)return t.kill();h&&t._it.animation.animate(n,h,m.eventIndex),p&&t._it.toggleClass.toggle(n,p,m.eventIndex),t.setTriggerStates(n,(i={},_(i,m.leaveProp,!0),_(i,"hasEntered",!1),_(i,"hasEnteredBack",!1),i)),s&&u&&t._it.remove(n)},this.getPositions=function(n,i,a){var o=a.enter,s=a.leave,l=a.ref,u=a.refOpposite,f=a.length,c=t._it._isREPGreater;return[n[l]+o*n[f],n[l]+s*n[f],c?i[u]:i[l],c?i[l]:i[u]]},this.toggleActions=function(n){var i=n.getBoundingClientRect();t._it.rootBounds=t.getRootRect(t._it.observer.rootMargin);var a=t._it.rootBounds,o=t.getTriggerStates(n),s=o.hasEnteredFromOneSide,l=o.hasLeft,u=o.hasLeftBack,f=o.hasEnteredOnce,c=t.getTriggerData(n),g=c.enter,p=c.leave,h=t.dirProps(),d=h.ref,m=h.refOpposite,x=h.length,P=t.getPositions(i,a,{enter:g,leave:p,ref:d,refOpposite:m,length:x}),k=Tt(P,4),L=k[0],M=k[1],B=k[2],E=k[3],O=!0;switch(!0){case(u&&B>L):t.onTriggerEnter(n);break;case(s&&E>M):t.onTriggerLeave(n);break;case(l&&f&&E<M):t.onTriggerEnter(n,"EnterBack");break;case(s&&B<L):t.onTriggerLeave(n,"hasLeftBack");break;default:O=!1;break}return O},this.parseRootMargin=function(n){var i=n||"0px",a=nt(i);return a[1]=a[1]||a[0],a[2]=a[2]||a[0],a[3]=a[3]||a[1],a},this.expandRectByRootMargin=function(n,i){var a=t.parseRootMargin(i).map(function(s,l){return s.unit=="px"?s.value:s.value*(l%2?n.width:n.height)/100}),o={top:n.top-a[0],right:n.right+a[1],bottom:n.bottom+a[2],left:n.left-a[3]};return o.width=o.right-o.left,o.height=o.bottom-o.top,o},this.getRootRect=function(n){var i;if(t._it._root&&!v.doc(t._it._root))return i=t._it._root.getBoundingClientRect(),t.expandRectByRootMargin(i,n);var a=v.doc(t._it._root)?t._it._root:document,o=a.documentElement,s=a.body;return i={top:0,left:0,right:o.clientWidth||s.clientWidth,width:o.clientWidth||s.clientWidth,bottom:o.clientHeight||s.clientHeight,height:o.clientHeight||s.clientHeight},t.expandRectByRootMargin(i,n)}}},{key:"kill",value:function(){this._it=null}}]),r}();function C(r){return It(r)||Rt(r)||G(r)||Dt()}function Dt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rt(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function It(r){if(Array.isArray(r))return Q(r)}function ut(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function U(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ut(Object(t),!0).forEach(function(n){j(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ut(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function $(r,e){return Mt(r)||jt(r,e)||G(r,e)||Ct()}function Ct(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jt(r,e){var t=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],i=!0,a=!1,o,s;try{for(t=t.call(r);!(i=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(a)throw s}}return n}}function Mt(r){if(Array.isArray(r))return r}function Bt(r,e){var t=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=G(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,o=!1,s;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function G(r,e){if(!!r){if(typeof r=="string")return Q(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Q(r,e)}}function Q(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Ht(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ct(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Ft(r,e,t){return e&&ct(r.prototype,e),t&&ct(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function j(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var N=[],S=[],ft=0,T=function(){function r(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ht(this,r),j(this,"_rAFCallback",function(n){e.triggers.forEach(function(i){var a=e._utils.getTriggerStates(i,"onScroll");for(var o in a)a[o]&&v.function(a[o])&&a[o](i,n)})}),j(this,"_onScrollHandler",function(){return e._rAFID=requestAnimationFrame(e._rAFCallback)}),j(this,"_observerCallback",function(n,i){var a=e._utils.dirProps(),o=a.ref,s=a.refOpposite,l=a.length,u=Bt(n),f;try{for(u.s();!(f=u.n()).done;){var c=f.value,g=c.target,p=c.boundingClientRect,h=c.isIntersecting;e.rootBounds=c.rootBounds||e._utils.getRootRect(i.rootMargin);var d=e.rootBounds,m=d[l],x=m/p[l],P=e._utils.getTriggerData(g),k=P.enter,L=P.leave,M=P.minPosition,B=P.maxPosition,E=e._utils.getTriggerStates(g),O=E.hasEnteredFromOneSide,gt=E.onScroll.backup,ht=e._utils.getPositions(p,d,{enter:k,leave:L,ref:o,refOpposite:s,length:l}),A=$(ht,4),K=A[0],D=A[1],J=A[2],R=A[3],X=p[l]>=m,Y=!!gt;switch(!0){case e._states.oCbFirstInvoke:switch(!0){case(!h&&R>D):e._utils.onTriggerEnter(g),e._utils.onTriggerLeave(g);break;case h:switch(!0){case(J>K&&R<D):e._utils.onTriggerEnter(g);break;case R>D:e._utils.onTriggerEnter(g),e._utils.onTriggerLeave(g);break}X&&e._utils.setTriggerScrollStates(g,"backup",e._utils.toggleActions);break}break;case!h:switch(Y&&e._utils.setTriggerScrollStates(g,"backup",null),!0){case(O&&R>D):e._utils.onTriggerLeave(g);break;case(O&&J<K):e._utils.onTriggerLeave(g,"onLeaveBack");break}break;case(h&&!Y):e._utils.toggleActions(g),X&&e._utils.setTriggerScrollStates(g,"backup",e._utils.toggleActions);break}}}catch(dt){u.e(dt)}finally{u.f()}e._states.oCbFirstInvoke=!1}),this._userOptions=t,this.triggers=[],this._triggersData=new WeakMap,this._utils=new lt(this),this.id=ft,ft++,S.push(this),this.animation=null,this.toggleClass=null,this.guides=null,this._setStates(),this._setInstance()}return Ft(r,[{key:"_setPlugin",value:function(t,n){var i=r.getRegisteredPlugins(),a=i.find(function(o){return t===o.name});a&&(this[n]=new a(this))}},{key:"_addResizeListener",value:function(){var t=this;this._removeResizeListener(),this._onResizeHandler=function(){return t.update()},this._utils.getRoot().addEventListener("resize",this._onResizeHandler,!1)}},{key:"_removeResizeListener",value:function(){this._utils.getRoot().removeEventListener("resize",this._onResizeHandler,!1)}},{key:"_setStates",value:function(){this._states={},this._states.oCbFirstInvoke=!0,this._states.runningScrollCbs=0}},{key:"addScrollListener",value:function(t){this._utils.getRoot().addEventListener("scroll",t,!1)}},{key:"removeScrollListener",value:function(t){this._utils.getRoot().removeEventListener("scroll",t,!1)}},{key:"_createInstance",value:function(){this._rootMargin=this._utils.setRootMargin(this._positionsData.rEP,this._positionsData.rLP),this._threshold=this._utils.setThreshold(),this._observerOptions={root:this._root,rootMargin:this._rootMargin,threshold:this._threshold},this.observer=new IntersectionObserver(this._observerCallback,this._observerOptions),this._root=this.observer.root,this.rootBounds=this._utils.getRootRect(this.observer.rootMargin),this._isViewport=this._utils.isViewport()}},{key:"_setInstance",value:function(){this._defaultOptions=Z,this._options=F(this._defaultOptions,this._userOptions),this.axis=v.string(this._options.axis)?this._options.axis:b("axis parameter must be a string."),this.name=v.string(this._options.name)?this._options.name:b("name parameter must be a string."),this._root=!!this._options.root&&this._utils.customParseQuery(this._options.root,"root")||null,this._positionsData=this._utils.parsePositions(this._options.defaults.enter,this._options.defaults.leave,this._options.rootEnter,this._options.rootLeave),this.customScrollHandler=this._options.onScroll;var t=this._options.defaults,n=t.once,i=t.onEnter,a=t.onLeave,o=t.onEnterBack,s=t.onLeaveBack,l=t.toggleClass,u=t.animation,f=this._positionsData.tEP.normal,c=this._positionsData.tLP.normal,g=W(f,c),p=$(g,2),h=p[0],d=p[1];return this._defaultTriggerParams={enter:f,leave:c,minPosition:h,maxPosition:d,once:n,onEnter:i,onLeave:a,onEnterBack:o,onLeaveBack:s,toggleClass:l,animation:u},this._createInstance(),this._addResizeListener(),this.customScrollHandler&&this.addScrollListener(this.customScrollHandler),this._options.guides&&(this._setPlugin("Guides","guides"),this.guides.init(this._options.guides)),this}},{key:"add",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this._utils.customParseQuery(n);"enter"in i&&(i.enter=this._utils.setPositionData(i.enter).normal),"leave"in i&&(i.leave=this._utils.setPositionData(i.leave).normal);var o=F(this._defaultTriggerParams,i),s=W(o.enter,o.leave),l=$(s,2),u=l[0],f=l[1],c=U(U({},o),{},{minPosition:u,maxPosition:f,states:U({},q)}),g=function(d,m){!t[d]&&t._setPlugin(m,d),c[d]=t[d].parse(c[d])};c.toggleClass&&g("toggleClass","ToggleClass"),c.animation&&g("animation","Animation"),this.triggers=C(new Set([].concat(C(this.triggers),C(a))));var p=!1;return[i.enter,i.leave].forEach(function(h){return!t._threshold.some(function(d){return h===d})&&(p=!0)}),p?(a.forEach(function(h){return t._utils.setTriggerData(h,c)}),this.update()):a.forEach(function(h){t._utils.setTriggerData(h,c),t.observer.observe(h)}),this.guides&&this.guides.update(),this}},{key:"remove",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this._utils.customParseQuery(n);i.forEach(function(o){t._utils.deleteTriggerData(o),t.observer.unobserve(o)});var a=this.triggers.filter(function(o){var s=i.some(function(l){return o===l});return!s});return this.triggers=a,this.guides&&this.guides.update(),this}},{key:"_disconnect",value:function(){this.observer&&this.observer.disconnect(),this.observer=null}},{key:"update",value:function(){var t=this;this._disconnect(),this._createInstance(),this.triggers.forEach(function(n){return t.observer.observe(n)}),this.guides&&this.guides.update()}},{key:"kill",value:function(){this.killed=!0,this._disconnect(),this.removeScrollListener(this._onScrollHandler),this.removeScrollListener(this.customScrollHandler),this._removeResizeListener(),this._rAFID&&cancelAnimationFrame(this._rAFID),this.guides&&this.guides.kill(),this.toggleClasss&&this.toggleClasss.kill(),this.animation&&this.animation.kill(),this.triggers=[],this.animation=this.toggleClass=this.guides=this._utils=null;var t=S.indexOf(this);~t&&S.splice(t,1)}}]),r}();T.getInstances=function(){return S};T.getInstanceById=function(r){return S.find(function(e){return e.id===r})};T.update=function(){return S.forEach(function(r){return r.update()})};T.kill=function(){return S.forEach(function(r){return r.kill()})};T.registerPlugins=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return N.push.apply(N,C(r))};T.getRegisteredPlugins=function(){return N};return Wt;})();
