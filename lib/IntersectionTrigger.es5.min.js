/*
* IntersectionTrigger v1.0.0
* https://sunshine-themes.com/intersectionTrigger
*
* @license Copyright 2022, Sunshine. All rights reserved.
* Subject to the terms at https://sunshine-themes.com/intersectionTrigger/standard-licensew.
* @author: Sherif magdy, sherifmagdy@sunshine-themes.com
*/
                  
var intersectiontrigger=(function(){var ce=Object.defineProperty;var he=function(n,a){for(var e in a)ce(n,e,{get:a[e],enumerable:!0})};var xe={};he(xe,{default:function(){return Y}});var S=function(){},H={defaults:{once:!1,onEnter:S,onLeave:S,onEnterBack:S,onLeaveBack:S,toggleClass:null},enter:"0% 100%",leave:"100% 0%",axis:"y",name:"",root:null,onScroll:S},M={hasEntered:!1,hasEnteredBack:!1,hasLeft:!0,hasLeftBack:!0,hasEnteredOnce:!1,onScroll:null};var F="add remove add remove";function fe(n,a){return de(n)||ve(n,a)||pe(n,a)||ge()}function ge(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pe(n,a){if(!!n){if(typeof n=="string")return B(n,a);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return B(n,a)}}function B(n,a){(a==null||a>n.length)&&(a=n.length);for(var e=0,t=new Array(a);e<a;e++)t[e]=n[e];return t}function ve(n,a){var e=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var t=[],r=!0,s=!1,i,l;try{for(e=e.call(n);!(r=(i=e.next()).done)&&(t.push(i.value),!(a&&t.length===a));r=!0);}catch(o){s=!0,l=o}finally{try{!r&&e.return!=null&&e.return()}finally{if(s)throw l}}return t}}function de(n){if(Array.isArray(n))return n}function T(n){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},T(n)}function _e(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function W(n,a){for(var e=0;e<a.length;e++){var t=a[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function me(n,a,e){return a&&W(n.prototype,a),e&&W(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}var $=function(){function n(a){return _e(this,n),this._it=a,this.setHelpers(),this}return me(n,[{key:"setHelpers",value:function(){var e=this;this.is={function:function(r){return typeof r=="function"},string:function(r){return typeof r=="string"},boolean:function(r){return typeof r=="boolean"},object:function(r){return r&&T(r)==="object"&&!(r instanceof Array)},inObject:function(r,s){return e.is.object(r)&&s in r},percent:function(r){return r&&r.includes("%")},pixel:function(r){return r&&r.includes("px")},array:function(r){return r instanceof Array},element:function(r){return r instanceof HTMLElement||r instanceof Element},rootViewport:function(r){return!r},doc:function(r){return r&&r.nodeType===9},scrollable:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return s?s==="y"?r.scrollHeight>r.clientHeight:r.scrollWidth>r.clientWidth:r.scrollHeight>r.clientHeight||r.scrollWidth>r.clientWidth},virtical:function(){return e._it.axis==="y"},horizontal:function(){return e._it.axis==="x"},anime:function(r){return e.is.object(r)&&r.hasOwnProperty("animatables")&&!r.hasOwnProperty("add")},tl:function(r){return e.is.object(r)&&r.hasOwnProperty("add")&&e.is.function(r.add)}},this.getBoundsProp=function(t,r){return t&&t.getBoundingClientRect()[r]},this.getRoot=function(){var t;return(t=e._it._root)!==null&&t!==void 0?t:window},this.getScrollValue=function(t,r){return r==="y"?t.scrollHeight:t.scrollWidth},this.dirProps=function(){return e.is.virtical()?{ref:"top",length:"height",refOpposite:"bottom",innerLength:innerHeight}:{ref:"left",length:"width",refOpposite:"right",innerLength:innerWidth}},this.roundFloat=function(t,r){e.is.string(t)&&(t=parseFloat(t));var s=Math.pow(10,r||0);return Math.round(t*s)/s},this.getParents=function(t){var r=[];for(t=t.parentNode;t&&t!==document&&t!==document.documentElement;t=t.parentNode)r.push(t);return r},this.mergeOptions=function(t,r){var s=t,i=r;return Object.entries(s).forEach(function(l){var o=fe(l,2),u=o[0],g=o[1];e.is.object(g)?e.mergeOptions(g,i[u]=i[u]||{}):u in i||(i[u]=g)}),i},this.throwError=function(t){throw new Error(t)},this.boundsMinusScrollbar=function(t){var r=t.getBoundingClientRect(),s=r.top,i=r.bottom,l=r.right,o=r.left,u=r.height,g=r.width,h=r.x,p=r.y;return{top:s,left:o,height:u,width:g,x:h,y:p,right:l-(l-o-t.clientWidth),bottom:i-(i-s-t.clientHeight)}}}}]),n}();function be(n,a){var e=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=U(n))||a&&n&&typeof n.length=="number"){e&&(n=e);var t=0,r=function(){};return{s:r,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(u){throw u},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=!0,i=!1,l;return{s:function(){e=e.call(n)},n:function(){var u=e.next();return s=u.done,u},e:function(u){i=!0,l=u},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(i)throw l}}}}function N(n,a){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);a&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,t)}return e}function b(n){for(var a=1;a<arguments.length;a++){var e=arguments[a]!=null?arguments[a]:{};a%2?N(Object(e),!0).forEach(function(t){_(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):N(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function _(n,a,e){return a in n?Object.defineProperty(n,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[a]=e,n}function w(n){return Se(n)||Ee(n)||U(n)||ye()}function ye(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function U(n,a){if(!!n){if(typeof n=="string")return L(n,a);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return L(n,a)}}function Ee(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Se(n){if(Array.isArray(n))return L(n)}function L(n,a){(a==null||a>n.length)&&(a=n.length);for(var e=0,t=new Array(a);e<a;e++)t[e]=n[e];return t}function ke(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function Q(n,a){for(var e=0;e<a.length;e++){var t=a[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function we(n,a,e){return a&&Q(n.prototype,a),e&&Q(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}var G=function(){function n(a){return ke(this,n),this._it=a,this._helpers=this._it._helpers,this.setUtils(),this}return we(n,[{key:"setUtils",value:function(){var e=this;this.setRootMargin=function(){var t=e._helpers.getScrollValue(e._helpers.is.rootViewport(e._it._root)?document.body:e._it._root,e._helpers.is.virtical()?"x":"y");return e._helpers.is.virtical()?"".concat(e._it._positions.rootEndPosition.strValue," ").concat(t,"px ").concat(e._it._positions.rootStartPosition.strValue," ").concat(t,"px"):"".concat(t,"px ").concat(e._it._positions.rootStartPosition.strValue," ").concat(t,"px ").concat(e._it._positions.rootEndPosition.strValue)},this.setThreshold=function(){var t=[0,e._it._triggerParams.enter,e._it._triggerParams.leave,e._helpers.roundFloat(1-e._it._triggerParams.leave,2),1];return e._it.triggers.forEach(function(r){var s=e.getTriggerData(r),i=s.enter,l=s.leave;t.push(i,l,e._helpers.roundFloat(1-l,2))}),w(new Set(t))},this.parseQuery=function(t,r){switch(!0){case e._helpers.is.string(t):return w(document.querySelectorAll(t));case e._helpers.is.array(t):return t;case e._helpers.is.element(t):return[t];default:e._helpers.throwError("".concat(r," parameter must be a valid selector, an element or array of elements"))}},this.customParseQuery=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"trigger",s=r==="trigger",i=s?[]:{};return s?e.parseQuery(t,"trigger"):(i=e._helpers.is.string(t)?document.querySelector(t):e._helpers.is.element(t)?t:e._helpers.throwError("root parameter must be a valid selector or an element"),i)},this.validatePosition=function(t,r){return e._helpers.is.function(r)&&(r=r(e)),e._helpers.is.string(r)||e._helpers.throwError("".concat(t," parameter must be a string.")),r},this.setPositionData=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;t=e.validatePosition(s?"enter":"leave",t);var i=t.trim(),l=e._helpers.is.percent(i),o=e._helpers.is.pixel(i),u={};if(i=l?i.replace("%",""):o?i.replace("px",""):i,i=e._helpers.roundFloat(i),u.type=l?"percent":"pixel",l&&r)return u.value=i/100,u.strValue="".concat(i,"%"),u;var g=e._helpers.dirProps(),h=g.length,p=g.innerLength,c=e._it._root?e._helpers.getBoundsProp(e._it._root,h):p;switch(!0){case(l&&s):u.value=e._helpers.roundFloat(i/100-1,2),u.strValue="".concat(u.value*100,"%");break;case(l&&!s):u.value=-i/100,u.strValue="".concat(u.value*100,"%");break;case(o&&s):u.value=e._helpers.roundFloat(i-c,2),u.strValue="".concat(u.value,"px");break;case(o&&!s):u.value=-i,u.strValue="".concat(-i,"px");break}return u.guide=t,u},this.parsePositions=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";t=e.validatePosition("enter",t),r=e.validatePosition("leave",r);var s={},i={},l={},o={},u=t.trim().split(/\s+/g,2),g=r.trim().split(/\s+/g,2),h=[].concat(w(u),w(g));h.forEach(function(c,f){switch(f){case 0:s=e.setPositionData(c);break;case 1:l=e.setPositionData(c,!1);break;case 2:i=e.setPositionData(c);break;case 3:o=e.setPositionData(c,!1,!1);break}});var p={triggerLeavePosition:i,triggerEnterPosition:s,rootEndPosition:o,rootStartPosition:l};return p},this.deleteTriggerData=function(t){e._it._triggersData.delete(t)},this.hasTriggerData=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=e._it._triggersData.has(t);return r?s&&r in e.getTriggerData(t):s},this.getTriggerData=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return r?e.hasTriggerData(t,r)?e._it._triggersData.get(t)[r]:{}:e.hasTriggerData(t)&&e._it._triggersData.get(t)||{}},this.setTriggerData=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(s){var i=e.getTriggerData(t);e._helpers.is.object(i)&&e._it._triggersData.set(t,b(b({},i),s));return}e._it._triggersData.set(t,r)},this.getTriggerStates=function(t){var r=e.getTriggerData(t,"states"),s=r.hasEntered||r.hasEnteredBack;return b(b({},r),{},{hasEnteredFromOneSide:s})},this.setTriggerStates=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=e.getTriggerData(t),i=s&&b(b({},s.states),r);e.setTriggerData(t,null,{states:i})},this.onTriggerEnter=function(t){var r,s,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Enter",l=e.getTriggerStates(t),o=l.hasEnteredOnce,u=e.getTriggerData(t),g=u.onEnter,h=u.onEnterBack,p=u.classNamesData,c=i==="Enter",f={callback:c?g:h,enterProp:c?"hasEntered":"hasEnteredBack",leaveProp:c?"hasLeftBack":"hasLeft",eventIndex:c?0:2};f.callback(t,e),e.toggleClass(t,p,f.eventIndex);var d=o?(r={},_(r,f.enterProp,!0),_(r,f.leaveProp,!1),r):(s={},_(s,f.enterProp,!0),_(s,"hasLeft",!1),_(s,"hasLeftBack",!1),s);e.setTriggerStates(t,d),o||e.setTriggerStates(t,{hasEnteredOnce:!0})},this.onTriggerLeave=function(t){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Leave",i=e.getTriggerData(t),l=i.once,o=e.getTriggerStates(t),u=o.hasEnteredOnce,g=e.getTriggerData(t),h=g.onLeave,p=g.onLeaveBack,c=g.classNamesData,f=s==="Leave",d={callback:f?h:p,leaveProp:f?"hasLeft":"hasLeftBack",eventIndex:f?1:3};d.callback(t,e),e.toggleClass(t,c,d.eventIndex),e.setTriggerStates(t,(r={},_(r,d.leaveProp,!0),_(r,"hasEntered",!1),_(r,"hasEnteredBack",!1),r)),l&&u&&e._it.remove(t)},this.toggleClass=function(t,r,s){var i=be(r),l;try{var o=function(){var h=l.value,p=h.targets,c=h.toggleActions,f=h.classNames;if(c[s]==="none")return"continue";f.forEach(function(d){return p.forEach(function(v){return v==="trigger"?t.classList[c[s]](d):v.classList[c[s]](d)})})};for(i.s();!(l=i.n()).done;)var u=o()}catch(g){i.e(g)}finally{i.f()}},this.parseClassNames=function(t){var r=[],s=function(l){return l.split(/\s+/)};return e._helpers.is.string(t)?(r.push({targets:["trigger"],classNames:s(t),toggleActions:s(F)}),r):(e._helpers.is.array(t)&&(r=t.map(function(i){return{targets:e.parseQuery(i.targets,"targets"),classNames:s(i.classNames),toggleActions:s(i.toggleActions)}})),r)},this.toggleActions=function(t){var r=t.getBoundingClientRect();e._it.rootBounds=e.getRootRect(e._it.observer.rootMargin);var s=e._it.rootBounds,i=e.getTriggerData(t),l=i.enter,o=i.leave,u=e.getTriggerStates(t),g=u.hasEnteredFromOneSide,h=u.hasLeft,p=u.hasLeftBack,c=e._helpers.dirProps(),f=c.ref,d=c.refOpposite,v=c.length,y=!0;switch(!0){case(p&&r[f]+l*r[v]<=s[d]&&r[f]+l*r[v]>s[f]):e.onTriggerEnter(t);break;case(g&&r[f]+o*r[v]<=s[f]):e.onTriggerLeave(t);break;case(h&&r[f]+o*r[v]>=s[f]&&r[f]+o*r[v]<s[d]):e.onTriggerEnter(t,"EnterBack");break;case(g&&r[f]+l*r[v]>=s[d]):e.onTriggerLeave(t,"hasLeftBack");break;default:y=!1;break}return y},this.validateOptions=function(t){for(var r in t){var s=t[r],i=function(g,h){switch(g){case"once":!e._helpers.is.boolean(h)&&e._helpers.throwError("once parameter must be a boolean.");break;case"axis":case"name":!e._helpers.is.string(h)&&e._helpers.throwError("axis and name parameters must be strings.");break;case"animation":!e._helpers.is.anime(h)&&!e._helpers.is.tl(h)&&e._helpers.throwError("animation parameter must be an anime instance or timeline.");break;case"toggleClass":!e._helpers.is.string(h)&&!e._helpers.is.array(h)&&e._helpers.throwError("toggleClass parameter must be a string or an Array.");break;case"onEnter":case"onEnterBack":case"onLeave":case"onLeaveBack":case"onScroll":!e._helpers.is.function(h)&&e._helpers.throwError("onEnter, onLeave, onEnterBack, onLeaveBack and onScroll parameters must be functions.");break}};if(!e._helpers.is.object(s)){i(r,s);continue}for(var l in s){var o=s[l];i(l,o)}}},this.parseString=function(t){var r=t.split(/\s+/).map(function(s){var i=/^(-?\d*\.?\d+)(px|%)$/.exec(s);return{value:parseFloat(i[1]),unit:i[2]}});return r},this.parseRootMargin=function(t){var r=t||"0px",s=e.parseString(r);return s[1]=s[1]||s[0],s[2]=s[2]||s[0],s[3]=s[3]||s[1],s},this.expandRectByRootMargin=function(t,r){var s=e.parseRootMargin(r).map(function(l,o){return l.unit=="px"?l.value:l.value*(o%2?t.width:t.height)/100}),i={top:t.top-s[0],right:t.right+s[1],bottom:t.bottom+s[2],left:t.left-s[3]};return i.width=i.right-i.left,i.height=i.bottom-i.top,i},this.getRootRect=function(t){var r;if(e._it._root&&!e._helpers.is.doc(e._it._root))return r=e._helpers.boundsMinusScrollbar(e._it._root),e.expandRectByRootMargin(r,t);var s=e._helpers.is.doc(e._it._root)?e._it._root:document,i=s.documentElement,l=s.body;return r={top:0,left:0,right:i.clientWidth||l.clientWidth,width:i.clientWidth||l.clientWidth,bottom:i.clientHeight||l.clientHeight,height:i.clientHeight||l.clientHeight},e.expandRectByRootMargin(r,t)}}}]),n}();function D(n){return Te(n)||Pe(n)||z(n)||Oe()}function Oe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pe(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Te(n){if(Array.isArray(n))return A(n)}function V(n,a){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);a&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,t)}return e}function O(n){for(var a=1;a<arguments.length;a++){var e=arguments[a]!=null?arguments[a]:{};a%2?V(Object(e),!0).forEach(function(t){J(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):V(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function Le(n,a){var e=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=z(n))||a&&n&&typeof n.length=="number"){e&&(n=e);var t=0,r=function(){};return{s:r,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(u){throw u},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=!0,i=!1,l;return{s:function(){e=e.call(n)},n:function(){var u=e.next();return s=u.done,u},e:function(u){i=!0,l=u},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(i)throw l}}}}function z(n,a){if(!!n){if(typeof n=="string")return A(n,a);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return A(n,a)}}function A(n,a){(a==null||a>n.length)&&(a=n.length);for(var e=0,t=new Array(a);e<a;e++)t[e]=n[e];return t}function De(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function K(n,a){for(var e=0;e<a.length;e++){var t=a[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Ae(n,a,e){return a&&K(n.prototype,a),e&&K(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function J(n,a,e){return a in n?Object.defineProperty(n,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[a]=e,n}var P=[],X=0,Y=function(){function n(){var a=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};De(this,n),J(this,"_observerCallback",function(t,r){var s=a._helpers.dirProps(),i=s.ref,l=s.refOpposite,o=s.length,u=Le(t),g;try{for(u.s();!(g=u.n()).done;){var h=g.value,p=h.target,c=h.boundingClientRect,f=h.isIntersecting,d=h.intersectionRatio;a.rootBounds=h.rootBounds||a._utils.getRootRect(r.rootMargin);var v=a.rootBounds,y=v[o],x=y/c[o],E=a._utils.getTriggerData(p),k=E.enter,m=E.leave,Ie=E.onEnter,je=E.onLeave,Ce=E.onLeaveBack,I=a._utils.getTriggerStates(p),j=I.hasEnteredFromOneSide,Z=I.onScroll,q=c[o]>=y,ee=k>x,te=1-m>x,C=q&&(ee||te),R=!!Z,re=c[i]+k*c[o]<v[l]&&c[i]+k*c[o]>v[i],ne=c[i]+m*c[o]<v[l]&&c[i]+m*c[o]>v[i],ae=c[i]+k*c[o]<v[i],ie=c[i]+m*c[o]>v[l],se=c[i]+m*c[o]<v[i]&&d<1-m,oe=c[i]<v[i],le=c[l]<v[i];switch(!0){case a._states.oCbFirstInvoke:switch(!0){case(!f&&oe&&le):a._utils.onTriggerEnter(p),a._utils.onTriggerLeave(p);break;case f:switch(!0){case(re||ne||ae&&ie):a._utils.onTriggerEnter(p);break;case se:a._utils.onTriggerEnter(p),a._utils.onTriggerLeave(p);break}C&&a._utils.setTriggerStates(p,{onScroll:a._utils.toggleActions});break}break;case!f:switch(R&&a._utils.setTriggerStates(p,{onScroll:null}),!0){case(j&&c[l]<v[i]):a._utils.onTriggerLeave(p);break;case(j&&c[i]>v[l]):a._utils.onTriggerLeave(p,"onLeaveBack");break}break;case(f&&!R):a._utils.toggleActions(p),C&&a._utils.setTriggerStates(p,{onScroll:a._utils.toggleActions});break}}}catch(ue){u.e(ue)}finally{u.f()}a._states.oCbFirstInvoke=!1}),this._userOptions=e,this.triggers=[],this._triggersData=new WeakMap,this._guidesInstance=null,this._helpers=new $(this),this._utils=new G(this),this.id=X,X++,P.push(this),this._setStates(),this._setInstance()}return Ae(n,[{key:"_setStates",value:function(){this._states={},this._states.oCbFirstInvoke=!0}},{key:"_addScrollListener",value:function(){var e=this,t=this._helpers.getRoot();!!this._onScrollHandler&&t.removeEventListener("scroll",this._onScrollHandler,!1),this._onScrollHandler=function(r){var s=function(){e.triggers.forEach(function(l){var o,u=(o=e._utils.getTriggerStates(l))===null||o===void 0?void 0:o.onScroll;u&&u(l)}),e.onScroll(r,e)};requestAnimationFrame(s)},t.addEventListener("scroll",this._onScrollHandler,!1)}},{key:"_createInstance",value:function(){this._threshold=this._utils.setThreshold(),this._observerOptions={root:this._root,rootMargin:this._rootMargin,threshold:this._threshold},this.observer=new IntersectionObserver(this._observerCallback,this._observerOptions),this._root=this.observer.root,this.rootBounds=this._utils.getRootRect(this.observer.rootMargin),this._isRootViewport=this._helpers.is.rootViewport(this._root),this._addScrollListener()}},{key:"_setInstance",value:function(){return this._defaultOptions=H,this._utils.validateOptions(this._userOptions),this._options=this._helpers.mergeOptions(this._defaultOptions,this._userOptions),this.axis=this._helpers.is.string(this._options.axis)?this._options.axis:this._helpers.throwError("axis parameter must be a string."),this.name=this._helpers.is.string(this._options.name)?this._options.name:this._helpers.throwError("name parameter must be a string."),this._root=!!this._options.root&&this._utils.customParseQuery(this._options.root,"root")||null,this._positions=this._utils.parsePositions(this._options.enter,this._options.leave),this.onScroll=this._options.onScroll,this._triggerParams={enter:this._positions.triggerEnterPosition.value,leave:this._positions.triggerLeavePosition.value,once:this._options.defaults.once,onEnter:this._options.defaults.onEnter,onLeave:this._options.defaults.onLeave,onEnterBack:this._options.defaults.onEnterBack,onLeaveBack:this._options.defaults.onLeaveBack,toggleClass:this._options.defaults.toggleClass},this._rootMargin=this._utils.setRootMargin(),this._createInstance(),this}},{key:"add",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this._utils.customParseQuery(t);this._utils.validateOptions(r),"enter"in r&&(r.enter=this._utils.setPositionData(r.enter).value),"leave"in r&&(r.leave=this._utils.setPositionData(r.leave).value);var i=O(O(O({},this._triggerParams),r),{},{states:O({},M)});i.classNamesData=this._utils.parseClassNames(i.toggleClass),this.triggers=[].concat(D(this.triggers),D(s)),this.triggers=D(new Set(this.triggers));var l=!1;return[r.enter,r.leave].forEach(function(o){return!e._threshold.some(function(u){return o===u})&&(l=!0)}),l?(this._disconnect(),s.forEach(function(o){return e._utils.setTriggerData(o,i)}),this._createInstance(),this.triggers.forEach(function(o){return e.observer.observe(o)})):s.forEach(function(o){e._utils.setTriggerData(o,i),e.observer.observe(o)}),this._guidesInstance&&this._guidesInstance.refresh(),this}},{key:"remove",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=this._utils.customParseQuery(t);r.forEach(function(i){e._utils.deleteTriggerData(i),e.observer.unobserve(i)});var s=this.triggers.filter(function(i){var l=r.some(function(o){return i===o});return!l});return this.triggers=s,this._guidesInstance&&this._guidesInstance.refresh(),this}},{key:"_disconnect",value:function(){this.observer&&this.observer.disconnect(),this.observer=null}},{key:"kill",value:function(){this._disconnect(),removeEventListener("scroll",this._onScrollHandler,!1),this.triggers=[],this.removeGuides();var e=P.indexOf(this);~e&&P.splice(e,1)}},{key:"addGuides",value:function(e){return this._helpers.is.inObject(e,"_registerIntersectionTrigger")||this._helpers.throwError("Invalid Guides Instance."),e._registerIntersectionTrigger(this),e.refresh(),this._guidesInstance=e,this}},{key:"removeGuides",value:function(){return this._guidesInstance&&this._guidesInstance.kill(),this._guidesInstance=null,this}}]),n}();Y.instances=P;return xe;})();
