/*
* IntersectionTrigger v1.0.0
* https://sunshine-themes.com/intersectionTrigger
*
* @license Copyright 2022, Sunshine. All rights reserved.
* Subject to the terms at https://sunshine-themes.com/intersectionTrigger/standard-licensew.
* @author: Sherif magdy, sherifmagdy@sunshine-themes.com
*/
                  
var intersectiontrigger=(function(){var vt=Object.defineProperty;var mt=function(r,e){for(var t in e)vt(r,t,{get:e[t],enumerable:!0})};var Ft={};mt(Ft,{default:function(){return E}});var x=function(){};var Z={defaults:{enter:"0%",leave:"100%",once:!1,onEnter:x,onLeave:x,onEnterBack:x,onLeaveBack:x,toggleClass:null,animation:null},rootEnter:"100%",rootLeave:"0%",axis:"y",name:"",root:null,onScroll:x},q={hasEntered:!1,hasEnteredBack:!1,hasLeft:!0,hasLeftBack:!0,hasEnteredOnce:!1,onScroll:{backup:null,animate:null},ids:{snapTimeOutId:0}};function pt(r,e){return St(r)||yt(r,e)||bt(r,e)||_t()}function _t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bt(r,e){if(!!r){if(typeof r=="string")return tt(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tt(r,e)}}function tt(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function yt(r,e){var t=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],a=!0,i=!1,o,s;try{for(t=t.call(r);!(a=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));a=!0);}catch(l){i=!0,s=l}finally{try{!a&&t.return!=null&&t.return()}finally{if(i)throw s}}return n}}function St(r){if(Array.isArray(r))return r}function H(r){return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(r)}var h={function:function(e){return typeof e=="function"},string:function(e){return typeof e=="string"},boolean:function(e){return typeof e=="boolean"},object:function(e){return e&&H(e)==="object"&&!(e instanceof Array)},inObject:function(e,t){return h.object(e)&&t in e},num:function(e){return typeof e=="number"},percent:function(e){return e&&e.includes("%")},pixel:function(e){return e&&e.includes("px")},array:function(e){return e instanceof Array},element:function(e){return e instanceof HTMLElement||e instanceof Element},doc:function(e){return e&&e.nodeType===9},scrollable:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return t?t==="y"?e.scrollHeight>e.clientHeight:e.scrollWidth>e.clientWidth:e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth},anime:function(e){return h.object(e)&&e.hasOwnProperty("animatables")&&!e.hasOwnProperty("add")},tl:function(e){return h.object(e)&&e.hasOwnProperty("add")&&h.function(e.add)},animeInstance:function(e){return h.anime(e)||h.tl(e)}};var et=function(e,t){return e&&e.getBoundingClientRect()[t]},rt=function(e,t){return t==="y"?e.scrollHeight:e.scrollWidth},j=function(e,t){h.string(e)&&(e=parseFloat(e));var n=Math.pow(10,t||0);return Math.round(e*n)/n};var W=function r(e,t){var n=e,a=t;return Object.entries(n).forEach(function(i){var o=pt(i,2),s=o[0],l=o[1];h.object(l)?r(l,a[s]=a[s]||{}):s in a||(a[s]=l)}),a},b=function(e){throw new Error(e)},F=function(e,t){return[e,t].sort(function(n,a){return n-a})},z=function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);return{value:parseFloat(t[1]),unit:t[2]}},nt=function(e){return e.split(/\s+/).map(function(t){return z(t)})};function Tt(r,e){return Et(r)||Pt(r,e)||ot(r,e)||Ot()}function Ot(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pt(r,e){var t=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],a=!0,i=!1,o,s;try{for(t=t.call(r);!(a=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));a=!0);}catch(l){i=!0,s=l}finally{try{!a&&t.return!=null&&t.return()}finally{if(i)throw s}}return n}}function Et(r){if(Array.isArray(r))return r}function at(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function y(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?at(Object(t),!0).forEach(function(n){_(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):at(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function _(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function it(r){return xt(r)||wt(r)||ot(r)||kt()}function kt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ot(r,e){if(!!r){if(typeof r=="string")return V(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return V(r,e)}}function wt(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function xt(r){if(Array.isArray(r))return V(r)}function V(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Lt(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function st(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function It(r,e,t){return e&&st(r.prototype,e),t&&st(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}var lt=function(){function r(e){return Lt(this,r),this._it=e,this.setUtils(),this}return It(r,[{key:"setUtils",value:function(){var t=this;this.isVirtical=function(){return t._it.axis==="y"},this.isViewport=function(){return!t._it._root},this.getRoot=function(){var n;return(n=t._it._root)!==null&&n!==void 0?n:window},this.dirProps=function(){return t.isVirtical()?{ref:"top",length:"height",refOpposite:"bottom",clientLength:document.documentElement.clientHeight}:{ref:"left",length:"width",refOpposite:"right",clientLength:document.documentElement.clientWidth}},this.setRootMargin=function(n,a){var i=t.dirProps(),o=i.length,s=i.clientLength,l=t._it._root?et(t._it._root,o):s,u=function(d,v){var m=d.value,p=d.unit,S=d.normal;if(p==="%")return S*v;if(p==="px")return m};n.pixeled=u(n,l),a.pixeled=u(a,l),t._it._isREPGreater=n.pixeled>=a.pixeled;var f={};f.fromOppRef="".concat((t._it._isREPGreater?n.pixeled:a.pixeled)-l,"px"),f.fromRef="".concat(-1*(t._it._isREPGreater?a.pixeled:n.pixeled),"px");var c=rt(t.isViewport()?document.body:t._it._root,t.isVirtical()?"x":"y");return t.isVirtical()?"".concat(f.fromRef," ").concat(c,"px ").concat(f.fromOppRef," ").concat(c,"px"):"".concat(c,"px ").concat(f.fromOppRef," ").concat(c,"px ").concat(f.fromRef)},this.setThreshold=function(){var n=t._it._defaultTriggerParams,a=n.enter,i=n.leave,o=n.maxPosition,s=[0,a,i,j(1-o,2),1];return t._it.triggers.forEach(function(l){var u=t.getTriggerData(l),f=u.enter,c=u.leave,g=u.maxPosition;s.push(f,c,j(1-g,2))}),it(new Set(s))},this.parseQuery=function(n,a){switch(!0){case h.string(n):return it(document.querySelectorAll(n));case h.array(n):return n;case h.element(n):return[n];default:b("".concat(a," parameter must be a valid selector, an element or array of elements"))}},this.customParseQuery=function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"trigger",i=a==="trigger",o=i?[]:{};return i?t.parseQuery(n,"trigger"):(o=h.string(n)?document.querySelector(n):h.element(n)?n:b("root parameter must be a valid selector or an element"),o)},this.validatePosition=function(n){return h.function(n)&&(n=n(t._it)),h.string(n)||b("enter, leave, rootEnter and rootLeave parameters must be a string."),n},this.setPositionData=function(n){n=t.validatePosition(n);var a=n.trim(),i=z(a),o=j(i.value);return{original:a,unit:i.unit,value:o,normal:i.unit==="%"?o/100:null}},this.parsePositions=function(n,a,i,o){var s=[n,i,a,o].map(function(l){return t.setPositionData(t.validatePosition(l).trim())});return{tEP:s[0],rEP:s[1],tLP:s[2],rLP:s[3]}},this.deleteTriggerData=function(n){t._it._triggersData.delete(n)},this.hasTriggerData=function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=t._it._triggersData.has(n);return a?i&&a in t.getTriggerData(n):i},this.getTriggerData=function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return a?t.hasTriggerData(n,a)?t._it._triggersData.get(n)[a]:{}:t.hasTriggerData(n)&&t._it._triggersData.get(n)||{}},this.setTriggerData=function(n,a){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(i){var o=t.getTriggerData(n);h.object(o)&&t._it._triggersData.set(n,y(y({},o),i));return}t._it._triggersData.set(n,a)},this.getTriggerStates=function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=t.getTriggerData(n,"states"),o=i.hasEntered||i.hasEnteredBack;return a?i[a]:y(y({},i),{},{hasEnteredFromOneSide:o})},this.setTriggerStates=function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.getTriggerData(n),o=i&&y(y({},i.states),a);t.setTriggerData(n,null,{states:o})},this.setTriggerScrollStates=function(n,a){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=t.getTriggerStates(n,"onScroll");if(o[a]=i,t.setTriggerStates(n,{onscroll:y({},o)}),i){t._it._states.runningScrollCbs===0&&t._it.addScrollListener(t._it._onScrollHandler),t._it._states.runningScrollCbs++;return}0<t._it._states.runningScrollCbs&&t._it._states.runningScrollCbs--,t._it._states.runningScrollCbs===0&&t._it.removeScrollListener(t._it._onScrollHandler)},this.onTriggerEnter=function(n){var a,i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Enter",s=t.getTriggerStates(n),l=s.hasEnteredOnce,u=t.getTriggerData(n),f=u.onEnter,c=u.onEnterBack,g=u.toggleClass,d=u.animation,v=o==="Enter",m={callback:v?f:c,enterProp:v?"hasEntered":"hasEnteredBack",leaveProp:v?"hasLeftBack":"hasLeft",eventIndex:v?0:2};m.callback(n,t),t._it.toggleClass&&g&&t._it.toggleClass.toggle(n,g,m.eventIndex),t._it.animation&&d&&t._it.animation.animate(n,d,m.eventIndex);var p=l?(a={},_(a,m.enterProp,!0),_(a,m.leaveProp,!1),a):(i={},_(i,m.enterProp,!0),_(i,"hasLeft",!1),_(i,"hasLeftBack",!1),i);t.setTriggerStates(n,p),l||t.setTriggerStates(n,{hasEnteredOnce:!0})},this.onTriggerLeave=function(n){var a,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Leave",o=t.getTriggerData(n),s=o.once,l=t.getTriggerStates(n),u=l.hasEnteredOnce,f=t.getTriggerData(n),c=f.onLeave,g=f.onLeaveBack,d=f.toggleClass,v=f.animation,m=i==="Leave",p={callback:m?c:g,leaveProp:m?"hasLeft":"hasLeftBack",eventIndex:m?1:3};p.callback(n,t),t._it.toggleClass&&d&&t._it.toggleClass.toggle(n,d,p.eventIndex),t._it.animation&&v&&t._it.animation.animate(n,v,p.eventIndex),t.setTriggerStates(n,(a={},_(a,p.leaveProp,!0),_(a,"hasEntered",!1),_(a,"hasEnteredBack",!1),a)),s&&u&&t._it.remove(n)},this.getPositions=function(n,a,i){var o=i.enter,s=i.leave,l=i.ref,u=i.refOpposite,f=i.length,c=t._it._isREPGreater;return[n[l]+o*n[f],n[l]+s*n[f],c?a[u]:a[l],c?a[l]:a[u]]},this.toggleActions=function(n){var a=n.getBoundingClientRect();t._it.rootBounds=t.getRootRect(t._it.observer.rootMargin);var i=t._it.rootBounds,o=t.getTriggerStates(n),s=o.hasEnteredFromOneSide,l=o.hasLeft,u=o.hasLeftBack,f=o.hasEnteredOnce,c=t.getTriggerData(n),g=c.enter,d=c.leave,v=t.dirProps(),m=v.ref,p=v.refOpposite,S=v.length,T=t.getPositions(a,i,{enter:g,leave:d,ref:m,refOpposite:p,length:S}),O=Tt(T,4),L=O[0],I=O[1],A=O[2],k=O[3],w=!0;switch(!0){case(u&&A>L):t.onTriggerEnter(n);break;case(s&&k>I):t.onTriggerLeave(n);break;case(l&&f&&k<I):t.onTriggerEnter(n,"EnterBack");break;case(s&&A<L):t.onTriggerLeave(n,"hasLeftBack");break;default:w=!1;break}return w},this.parseRootMargin=function(n){var a=n||"0px",i=nt(a);return i[1]=i[1]||i[0],i[2]=i[2]||i[0],i[3]=i[3]||i[1],i},this.expandRectByRootMargin=function(n,a){var i=t.parseRootMargin(a).map(function(s,l){return s.unit=="px"?s.value:s.value*(l%2?n.width:n.height)/100}),o={top:n.top-i[0],right:n.right+i[1],bottom:n.bottom+i[2],left:n.left-i[3]};return o.width=o.right-o.left,o.height=o.bottom-o.top,o},this.getRootRect=function(n){var a;if(t._it._root&&!h.doc(t._it._root))return a=t._it._root.getBoundingClientRect(),t.expandRectByRootMargin(a,n);var i=h.doc(t._it._root)?t._it._root:document,o=i.documentElement,s=i.body;return a={top:0,left:0,right:o.clientWidth||s.clientWidth,width:o.clientWidth||s.clientWidth,bottom:o.clientHeight||s.clientHeight,height:o.clientHeight||s.clientHeight},t.expandRectByRootMargin(a,n)}}}]),r}();function M(r){return Rt(r)||Dt(r)||$(r)||At()}function At(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Dt(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Rt(r){if(Array.isArray(r))return Q(r)}function ut(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function G(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ut(Object(t),!0).forEach(function(n){B(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ut(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function U(r,e){return Mt(r)||jt(r,e)||$(r,e)||Ct()}function Ct(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jt(r,e){var t=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],a=!0,i=!1,o,s;try{for(t=t.call(r);!(a=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));a=!0);}catch(l){i=!0,s=l}finally{try{!a&&t.return!=null&&t.return()}finally{if(i)throw s}}return n}}function Mt(r){if(Array.isArray(r))return r}function Bt(r,e){var t=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=$(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0,a=function(){};return{s:a,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,o=!1,s;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function $(r,e){if(!!r){if(typeof r=="string")return Q(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Q(r,e)}}function Q(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Ht(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ct(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Wt(r,e,t){return e&&ct(r.prototype,e),t&&ct(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function B(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var N=[],P=[],ft=0,E=function(){function r(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ht(this,r),B(this,"_rAFCallback",function(n){e.triggers.forEach(function(a){var i=e._utils.getTriggerStates(a,"onScroll");for(var o in i)i[o]&&h.function(i[o])&&i[o](a,n)})}),B(this,"_onScrollHandler",function(){return requestAnimationFrame(e._rAFCallback)}),B(this,"_observerCallback",function(n,a){var i=e._utils.dirProps(),o=i.ref,s=i.refOpposite,l=i.length,u=Bt(n),f;try{for(u.s();!(f=u.n()).done;){var c=f.value,g=c.target,d=c.boundingClientRect,v=c.isIntersecting;e.rootBounds=c.rootBounds||e._utils.getRootRect(a.rootMargin);var m=e.rootBounds,p=m[l],S=p/d[l],T=e._utils.getTriggerData(g),O=T.enter,L=T.leave,I=T.minPosition,A=T.maxPosition,k=e._utils.getTriggerStates(g),w=k.hasEnteredFromOneSide,gt=k.onScroll.backup,ht=e._utils.getPositions(d,m,{enter:O,leave:L,ref:o,refOpposite:s,length:l}),D=U(ht,4),K=D[0],R=D[1],J=D[2],C=D[3],X=d[l]>=p&&(I>=S||1-A>=S),Y=!!gt;switch(!0){case e._states.oCbFirstInvoke:switch(!0){case(!v&&C>R):e._utils.onTriggerEnter(g),e._utils.onTriggerLeave(g);break;case v:switch(!0){case(J>K&&C<R):e._utils.onTriggerEnter(g);break;case C>R:e._utils.onTriggerEnter(g),e._utils.onTriggerLeave(g);break}X&&e._utils.setTriggerScrollStates(g,"backup",e._utils.toggleActions);break}break;case!v:switch(Y&&e._utils.setTriggerScrollStates(g,"backup",null),!0){case(w&&C>R):e._utils.onTriggerLeave(g);break;case(w&&J<K):e._utils.onTriggerLeave(g,"onLeaveBack");break}break;case(v&&!Y):e._utils.toggleActions(g),X&&e._utils.setTriggerScrollStates(g,"backup",e._utils.toggleActions);break}}}catch(dt){u.e(dt)}finally{u.f()}e._states.oCbFirstInvoke=!1}),this._userOptions=t,this.triggers=[],this._triggersData=new WeakMap,this._guidesInstance=null,this._utils=new lt(this),this.id=ft,ft++,P.push(this),this.animation=null,this.toggleClass=null,this._setStates(),this._setPlugins(),this._setInstance()}return Wt(r,[{key:"_setPlugins",value:function(){var t=this,n=r.getRegisteredPlugins();n.forEach(function(a){switch(a.name){case"Animation":t.animation=new a(t);break;case"ToggleClass":t.toggleClass=new a(t);break}})}},{key:"_addResizeListener",value:function(){var t=this;this._removeResizeListener(),this._onResizeHandler=function(){return t.update()},this._utils.getRoot().addEventListener("resize",this._onResizeHandler,!1)}},{key:"_removeResizeListener",value:function(){this._utils.getRoot().removeEventListener("resize",this._onResizeHandler,!1)}},{key:"_setStates",value:function(){this._states={},this._states.oCbFirstInvoke=!0,this._states.runningScrollCbs=0}},{key:"addScrollListener",value:function(t){this._utils.getRoot().addEventListener("scroll",t,!1)}},{key:"removeScrollListener",value:function(t){this._utils.getRoot().removeEventListener("scroll",t,!1)}},{key:"_createInstance",value:function(){this._rootMargin=this._utils.setRootMargin(this._positionsData.rEP,this._positionsData.rLP),this._threshold=this._utils.setThreshold(),this._observerOptions={root:this._root,rootMargin:this._rootMargin,threshold:this._threshold},this.observer=new IntersectionObserver(this._observerCallback,this._observerOptions),this._root=this.observer.root,this.rootBounds=this._utils.getRootRect(this.observer.rootMargin),this._isViewport=this._utils.isViewport()}},{key:"_setInstance",value:function(){this._defaultOptions=Z,this._options=W(this._defaultOptions,this._userOptions),this.axis=h.string(this._options.axis)?this._options.axis:b("axis parameter must be a string."),this.name=h.string(this._options.name)?this._options.name:b("name parameter must be a string."),this._root=!!this._options.root&&this._utils.customParseQuery(this._options.root,"root")||null,this._positionsData=this._utils.parsePositions(this._options.defaults.enter,this._options.defaults.leave,this._options.rootEnter,this._options.rootLeave),this.customScrollHandler=this._options.onScroll;var t=this._options.defaults,n=t.once,a=t.onEnter,i=t.onLeave,o=t.onEnterBack,s=t.onLeaveBack,l=t.toggleClass,u=t.animation,f=this._positionsData.tEP.normal,c=this._positionsData.tLP.normal,g=F(f,c),d=U(g,2),v=d[0],m=d[1];return this._defaultTriggerParams={enter:f,leave:c,minPosition:v,maxPosition:m,once:n,onEnter:a,onLeave:i,onEnterBack:o,onLeaveBack:s,toggleClass:l,animation:u},this._createInstance(),this._addResizeListener(),this.customScrollHandler&&this.addScrollListener(this.customScrollHandler),this}},{key:"add",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this._utils.customParseQuery(n);"enter"in a&&(a.enter=this._utils.setPositionData(a.enter).normal),"leave"in a&&(a.leave=this._utils.setPositionData(a.leave).normal);var o=W(this._defaultTriggerParams,a),s=F(o.enter,o.leave),l=U(s,2),u=l[0],f=l[1],c=G(G({},o),{},{minPosition:u,maxPosition:f,states:G({},q)});this.toggleClass&&c.toggleClass&&(c.toggleClass=this.toggleClass.parse(c.toggleClass)),this.animation&&c.animation&&(c.animation=this.animation.parse(c.animation)),this.triggers=M(new Set([].concat(M(this.triggers),M(i))));var g=!1;return[a.enter,a.leave].forEach(function(d){return!t._threshold.some(function(v){return d===v})&&(g=!0)}),g?this.update(i,c):i.forEach(function(d){t._utils.setTriggerData(d,c),t.observer.observe(d)}),this._guidesInstance&&this._guidesInstance.update(),this}},{key:"remove",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this._utils.customParseQuery(n);a.forEach(function(o){t._utils.deleteTriggerData(o),t.observer.unobserve(o)});var i=this.triggers.filter(function(o){var s=a.some(function(l){return o===l});return!s});return this.triggers=i,this._guidesInstance&&this._guidesInstance.update(),this}},{key:"_disconnect",value:function(){this.observer&&this.observer.disconnect(),this.observer=null}},{key:"kill",value:function(){this._disconnect(),this.removeScrollListener(this.customScrollHandler),this._removeResizeListener(),this.triggers=[],this.removeGuides(),this.animation&&this.animation.kill(),this.toggleClasss&&this.toggleClasss.kill();var t=P.indexOf(this);~t&&P.splice(t,1)}},{key:"addGuides",value:function(t){return h.inObject(t,"_registerIntersectionTrigger")||b("Invalid Guides Instance."),t._registerIntersectionTrigger(this),t.update(),this._guidesInstance=t,this}},{key:"removeGuides",value:function(){return this._guidesInstance&&this._guidesInstance.kill(),this._guidesInstance=null,this}},{key:"update",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this._disconnect(),n&&n.forEach(function(i){return t._utils.setTriggerData(i,a)}),this._createInstance(),this.triggers.forEach(function(i){return t.observer.observe(i)}),this._guidesInstance&&this._guidesInstance.update()}}]),r}();E.getInstances=function(){return P};E.getInstanceById=function(r){return P.find(function(e){return e.id===r})};E.update=function(){return P.forEach(function(r){return r.update()})};E.registerPlugins=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return N.push.apply(N,M(r))};E.getRegisteredPlugins=function(){return N};return Ft;})();
