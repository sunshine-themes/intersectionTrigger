/*
* Guides v1.0.0
* https://sunshine-themes.com/intersectionTrigger
*
* @license Copyright 2022, Sunshine. All rights reserved.
* Subject to the terms at https://sunshine-themes.com/intersectionTrigger/standard-licensew.
* @author: Sherif magdy, sherifmagdy@sunshine-themes.com
*/
                  
var R=Object.defineProperty;var O=t=>R(t,"__esModule",{value:!0});var $=(t,e)=>{for(var a in e)R(t,a,{get:e[a],enumerable:!0})};O(exports);$(exports,{default:()=>L});var k={enter:{trigger:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Enter"},root:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Root Enter"}},leave:{trigger:{backgroundColor:"#ff0000",color:"#000",text:"Leave"},root:{backgroundColor:"#ff0000",color:"#000",text:"Root Leave"}}};var g={function:t=>typeof t=="function",string:t=>typeof t=="string",boolean:t=>typeof t=="boolean",object:t=>t&&typeof t=="object"&&!(t instanceof Array),inObject:(t,e)=>g.object(t)&&e in t,num:t=>typeof t=="number",percent:t=>t&&t.includes("%"),pixel:t=>t&&t.includes("px"),array:t=>t instanceof Array,element:t=>t instanceof HTMLElement||t instanceof Element,doc:t=>t&&t.nodeType===9,scrollable:(t,e=null)=>e?e==="y"?t.scrollHeight>t.clientHeight:t.scrollWidth>t.clientWidth:t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth,anime:t=>g.object(t)&&t.hasOwnProperty("animatables")&&!t.hasOwnProperty("add"),tl:t=>g.object(t)&&t.hasOwnProperty("add")&&g.function(t.add),animeInstance:t=>g.anime(t)||g.tl(t)};var w=t=>{let e=[];for(t=t.parentNode;t&&t!==document&&t!==document.documentElement;t=t.parentNode)e.push(t);return e},P=(t,e)=>{let a=t,p=e;return Object.entries(a).forEach(([r,c])=>{g.object(c)?P(c,p[r]=p[r]||{}):r in p||(p[r]=c)}),p};var b=t=>{let e=t.getBoundingClientRect(),{top:a,bottom:p,right:r,left:c,height:d,width:u,x:h,y:f}=e;return{top:a,left:c,height:d,width:u,x:h,y:f,right:r-(r-c-t.clientWidth),bottom:p-(p-a-t.clientHeight)}};var L=class{constructor(e={}){return this.params=e,this._guides=[],this}_registerIntersectionTrigger(e){this._it=e,this._utils=this._it._utils,this._addResizeListener()}_addResizeListener(){!!this._onResizeHandler&&removeEventListener("resize",this._onResizeHandler,!1),this._onResizeHandler=()=>{this.refresh()},addEventListener("resize",this._onResizeHandler,!1)}createGuides(){let e=this._utils.isVirtical(),a=d=>{let{triggerGuide:u,trigger:h,enter:f,position:_,text:G,color:z,backgroundColor:C}=d,s=(l,i,o)=>l.style[i]=o,n=document.createElement("div"),H=e?"100px":"1px",S=e?"1px":"100px",T=e?"top":"left";s(n,"width",H),s(n,"height",S),s(n,"position","absolute"),s(n,"zIndex","9999"),s(n,"backgroundColor",C),s(n,T,_),(()=>{let l={dir:e?f?"bottom":"top":"bottom",value:e?"5px":"25px"},i={dir:e||f?"right":"left",value:e?u||this._it._root?"0px":"25px":"5px"},o=document.createElement("span");o.innerText=G,n.appendChild(o),s(o,"position","absolute"),s(o,"color",z),s(o,"fontSize","16px"),s(o,"fontWeight","bold"),s(o,"backgroundColor",C),s(o,"padding","5px"),s(o,"width","max-content"),s(o,l.dir,l.value),s(o,i.dir,i.value)})(),this._guides.push(n),document.body.append(n);let B=(l,i)=>{let o=[...n.style.transform.matchAll(/(-?\d*\.?\d+)\s*(px|%)?/g)],x=o.length?o[0][1]:0,y=o.length>1?o[1][1]:0,E=parseFloat(l)+parseFloat(x),m=parseFloat(i)+parseFloat(y);s(n,"transform",`translate(${E}px,${m}px)`)},v=(l=!0)=>{let i=n.getBoundingClientRect(),o=l?b(h):this._utils.getRootRect(this._it.observer.rootMargin),x=this._it._root?b(this._it._root):b(document.body),y=e?{x:o.right-i.right,y:o.top+_*o.height-i.top}:{x:o.left+_*o.width-i.left,y:o.top-i.top},E=e?f?{x:x.right-i.left,y:o.bottom-i.bottom}:{x:x.right-i.left,y:o.top-i.top}:f?{x:o.right-i.right,y:x.bottom-i.top}:{x:o.left-i.left,y:x.bottom-i.top},m=l?y:E;B(m.x,m.y)};if(!u){s(n,e?"width":"height",this._it._isRootViewport?e?"100vw":"100vh":"100px"),s(n,"position",this._it._isRootViewport?"fixed":"absolute"),this._it._isRootViewport&&!e&&s(n,"top","0px"),this._it._isRootViewport||v(!1);return}v(),w(h).forEach(l=>{!g.scrollable(l)||l.addEventListener("scroll",i=>v(),!1)})},r=(d=>{let u=k;return g.object(d)&&(u=P(u,d)),u})(this.params),c=this._it.name;a({triggerGuide:!1,enter:!0,position:this._it._positions.rootEnterPosition.guide,text:`${c} ${r.enter.root.text}`,color:r.enter.root.color,backgroundColor:r.enter.root.backgroundColor}),a({triggerGuide:!1,enter:!1,position:this._it._positions.rootLeavePosition.guide,text:`${c} ${r.leave.root.text}`,color:r.leave.root.color,backgroundColor:r.leave.root.backgroundColor}),this._it.triggers.forEach(d=>{let{enter:u,leave:h}=this._utils.getTriggerData(d);a({triggerGuide:!0,trigger:d,enter:!0,position:u,text:`${c} ${r.enter.trigger.text}`,color:r.enter.trigger.color,backgroundColor:r.enter.trigger.backgroundColor}),a({triggerGuide:!0,trigger:d,enter:!1,position:h,text:`${c} ${r.leave.trigger.text}`,color:r.leave.trigger.color,backgroundColor:r.leave.trigger.backgroundColor})})}removeGuides=()=>{this._guides.forEach(e=>e&&e.remove()),this._guides=[]};refresh=()=>{this.removeGuides(),this.createGuides()};kill=()=>{this.removeGuides(),this._it=null,this._utils=null,removeEventListener("resize",this._onResizeHandler,!1)}};
