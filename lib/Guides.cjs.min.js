/*
* Guides v1.0.0
* https://sunshine-themes.com/intersectionTrigger
*
* @license Copyright 2022, Sunshine. All rights reserved.
* Subject to the terms at https://sunshine-themes.com/intersectionTrigger/standard-licensew.
* @author: Sherif magdy, sherifmagdy@sunshine-themes.com
*/
                  
var R=Object.defineProperty;var O=t=>R(t,"__esModule",{value:!0});var $=(t,e)=>{for(var l in e)R(t,l,{get:e[l],enumerable:!0})};O(exports);$(exports,{default:()=>G});var k={enter:{trigger:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Enter"},root:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Root Enter"}},leave:{trigger:{backgroundColor:"#ff0000",color:"#000",text:"Leave"},root:{backgroundColor:"#ff0000",color:"#000",text:"Root Leave"}}};var u={function:t=>typeof t=="function",string:t=>typeof t=="string",boolean:t=>typeof t=="boolean",object:t=>t&&typeof t=="object"&&!(t instanceof Array),inObject:(t,e)=>u.object(t)&&e in t,num:t=>typeof t=="number",percent:t=>t&&t.includes("%"),pixel:t=>t&&t.includes("px"),array:t=>t instanceof Array,element:t=>t instanceof HTMLElement||t instanceof Element,doc:t=>t&&t.nodeType===9,scrollable:(t,e=null)=>e?e==="y"?t.scrollHeight>t.clientHeight:t.scrollWidth>t.clientWidth:t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth,anime:t=>u.object(t)&&t.hasOwnProperty("animatables")&&!t.hasOwnProperty("add"),tl:t=>u.object(t)&&t.hasOwnProperty("add")&&u.function(t.add),animeInstance:t=>u.anime(t)||u.tl(t)};var w=t=>{let e=[];for(t=t.parentNode;t&&t!==document&&t!==document.documentElement;t=t.parentNode)e.push(t);return e},P=(t,e)=>{let l=t,h=e;return Object.entries(l).forEach(([r,c])=>{u.object(c)?P(c,h[r]=h[r]||{}):r in h||(h[r]=c)}),h};var m=t=>{let e=t.getBoundingClientRect(),{top:l,bottom:h,right:r,left:c,height:d,width:g,x:p,y:f}=e;return{top:l,left:c,height:d,width:g,x:p,y:f,right:r-(r-c-t.clientWidth),bottom:h-(h-l-t.clientHeight)}};var G=class{constructor(e={}){return this.params=e,this._guides=[],this}_registerIntersectionTrigger(e){this._it=e,this._utils=this._it._utils,this._addResizeListener()}_addResizeListener(){!!this._onResizeHandler&&removeEventListener("resize",this._onResizeHandler,!1),this._onResizeHandler=()=>{this.refresh()},addEventListener("resize",this._onResizeHandler,!1)}createGuides(){let e=this._utils.isVirtical(),l=d=>{let{triggerGuide:g,trigger:p,enter:f,position:_,text:L,color:z,backgroundColor:C}=d,s=(a,i,o)=>a.style[i]=o,n=document.createElement("div"),H=e?"100px":"1px",B=e?"1px":"100px",T=e?"top":"left";s(n,"width",H),s(n,"height",B),s(n,"position","absolute"),s(n,"zIndex","9999"),s(n,"backgroundColor",C),s(n,T,_),(()=>{let a={dir:e?f?"bottom":"top":"bottom",value:e?"5px":"25px"},i={dir:e||f?"right":"left",value:e?g||this._it._root?"0px":"25px":"5px"},o=document.createElement("span");o.innerText=L,n.appendChild(o),s(o,"position","absolute"),s(o,"color",z),s(o,"fontSize","16px"),s(o,"fontWeight","bold"),s(o,"backgroundColor",C),s(o,"padding","5px"),s(o,"width","max-content"),s(o,a.dir,a.value),s(o,i.dir,i.value)})(),this._guides.push(n),document.body.append(n);let A=(a,i)=>{let o=[...n.style.transform.matchAll(/(-?\d*\.?\d+)\s*(px|%)?/g)],x=o.length?o[0][1]:0,y=o.length>1?o[1][1]:0,E=parseFloat(a)+parseFloat(x),b=parseFloat(i)+parseFloat(y);s(n,"transform",`translate(${E}px,${b}px)`)},v=(a=!0)=>{let i=n.getBoundingClientRect(),o=a?m(p):this._utils.getRootRect(this._it.observer.rootMargin),x=this._it._root?m(this._it._root):m(document.body),y=e?{x:o.right-i.right,y:o.top+_*o.height-i.top}:{x:o.left+_*o.width-i.left,y:o.top-i.top},E=e?f?{x:x.right-i.left,y:o.bottom-i.bottom}:{x:x.right-i.left,y:o.top-i.top}:f?{x:o.right-i.right,y:x.bottom-i.top}:{x:o.left-i.left,y:x.bottom-i.top},b=a?y:E;A(b.x,b.y)};if(!g){s(n,e?"width":"height",this._it._isRootViewport?e?"100vw":"100vh":"100px"),s(n,"position",this._it._isRootViewport?"fixed":"absolute"),this._it._isRootViewport&&!e&&s(n,"top","0px"),this._it._isRootViewport||v(!1);return}v(),w(p).forEach(a=>{!u.scrollable(a)||a.addEventListener("scroll",i=>v(),!1)})},r=(d=>{let g=k;return u.object(d)&&(g=P(g,d)),g})(this.params),c=this._it.name;l({triggerGuide:!1,enter:!0,position:this._it._positions.rootEnterPosition.guide,text:`${c} ${r.enter.root.text}`,color:r.enter.root.color,backgroundColor:r.enter.root.backgroundColor}),l({triggerGuide:!1,enter:!1,position:this._it._positions.rootLeavePosition.guide,text:`${c} ${r.leave.root.text}`,color:r.leave.root.color,backgroundColor:r.leave.root.backgroundColor}),this._it.triggers.forEach(d=>{let{enter:g,leave:p}=this._utils.getTriggerData(d);l({triggerGuide:!0,trigger:d,enter:!0,position:g,text:`${c} ${r.enter.trigger.text}`,color:r.enter.trigger.color,backgroundColor:r.enter.trigger.backgroundColor}),l({triggerGuide:!0,trigger:d,enter:!1,position:p,text:`${c} ${r.leave.trigger.text}`,color:r.leave.trigger.color,backgroundColor:r.leave.trigger.backgroundColor})})}removeGuides=()=>{this._guides.forEach(e=>e&&e.remove()),this._guides=[]};refresh=()=>{this.removeGuides(),this.createGuides()};kill=()=>{this.removeGuides(),this._it=null,this._utils=null,removeEventListener("resize",this._onResizeHandler,!1)}};
