/*
* Guides v1.0.0
* https://sunshine-themes.com/intersectionTrigger
*
* @license Copyright 2022, Sunshine. All rights reserved.
* Subject to the terms at https://sunshine-themes.com/intersectionTrigger/standard-licensew.
* @author: Sherif magdy, sherifmagdy@sunshine-themes.com
*/
                  
var k=Object.defineProperty;var $=c=>k(c,"__esModule",{value:!0});var w=(c,e)=>{for(var d in e)k(c,d,{get:e[d],enumerable:!0})};$(exports);w(exports,{default:()=>C});var E={enter:{trigger:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Enter"},root:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Root Enter"}},leave:{trigger:{backgroundColor:"#ff0000",color:"#000",text:"Leave"},root:{backgroundColor:"#ff0000",color:"#000",text:"Root Leave"}}};var C=class{constructor(e={}){return this.params=e,this._guides=[],this}_registerIntersectionTrigger(e){this._it=e,this._helpers=this._it._helpers,this._utils=this._it._utils,this._addResizeListener()}_addResizeListener(){!!this._onResizeHandler&&removeEventListener("resize",this._onResizeHandler,!1),this._onResizeHandler=()=>{this.refresh()},addEventListener("resize",this._onResizeHandler,!1)}createGuides(){let e=this._helpers.is.virtical(),d=l=>{let{triggerGuide:a,trigger:g,enter:p,position:_,text:R,color:P,backgroundColor:v}=l,r=(n,o,t)=>n.style[o]=t,i=document.createElement("div"),G=e?"100px":"1px",y=e?"1px":"100px",z=e?"top":"left";r(i,"width",G),r(i,"height",y),r(i,"position","absolute"),r(i,"zIndex","9999"),r(i,"backgroundColor",v),r(i,z,_),(()=>{let n={dir:e?p?"bottom":"top":"bottom",value:e?"5px":"25px"},o={dir:e||p?"right":"left",value:e?a||this._it._root?"0px":"25px":"5px"},t=document.createElement("span");t.innerText=R,i.appendChild(t),r(t,"position","absolute"),r(t,"color",P),r(t,"fontSize","16px"),r(t,"fontWeight","bold"),r(t,"backgroundColor",v),r(t,"padding","5px"),r(t,"width","max-content"),r(t,n.dir,n.value),r(t,o.dir,o.value)})(),this._guides.push(i),document.body.append(i);let L=(n,o)=>{let t=[...i.style.transform.matchAll(/(-?\d*\.?\d+)\s*(px|%)?/g)],u=t.length?t[0][1]:0,b=t.length>1?t[1][1]:0,m=parseFloat(n)+parseFloat(u),f=parseFloat(o)+parseFloat(b);r(i,"transform",`translate(${m}px,${f}px)`)},x=(n=!0)=>{let o=i.getBoundingClientRect(),t=n?this._helpers.boundsMinusScrollbar(g):this._utils.getRootRect(this._it.observer.rootMargin),u=this._it._root?this._helpers.boundsMinusScrollbar(this._it._root):this._helpers.boundsMinusScrollbar(document.body),b=e?{x:t.right-o.right,y:t.top+_*t.height-o.top}:{x:t.left+_*t.width-o.left,y:t.top-o.top},m=e?p?{x:u.right-o.left,y:t.bottom-o.bottom}:{x:u.right-o.left,y:t.top-o.top}:p?{x:t.right-o.right,y:u.bottom-o.top}:{x:t.left-o.left,y:u.bottom-o.top},f=n?b:m;L(f.x,f.y)};if(!a){r(i,e?"width":"height",this._it._isRootViewport?e?"100vw":"100vh":"100px"),r(i,"position",this._it._isRootViewport?"fixed":"absolute"),this._it._isRootViewport&&!e&&r(i,"top","0px"),this._it._isRootViewport||x(!1);return}x(),this._helpers.getParents(g).forEach(n=>{!this._helpers.is.scrollable(n)||n.addEventListener("scroll",o=>x(),!1)})},s=(l=>{let a=E;return this._helpers.is.object(l)&&(a=this._helpers.mergeOptions(a,l)),a})(this.params),h=this._it.name;d({triggerGuide:!1,enter:!0,position:this._it._positions.rootStartPosition.guide,text:`${h} ${s.enter.root.text}`,color:s.enter.root.color,backgroundColor:s.enter.root.backgroundColor}),d({triggerGuide:!1,enter:!1,position:this._it._positions.rootEndPosition.guide,text:`${h} ${s.leave.root.text}`,color:s.leave.root.color,backgroundColor:s.leave.root.backgroundColor}),this._it.triggers.forEach(l=>{let{enter:a,leave:g}=this._utils.getTriggerData(l);d({triggerGuide:!0,trigger:l,enter:!0,position:a,text:`${h} ${s.enter.trigger.text}`,color:s.enter.trigger.color,backgroundColor:s.enter.trigger.backgroundColor}),d({triggerGuide:!0,trigger:l,enter:!1,position:g,text:`${h} ${s.leave.trigger.text}`,color:s.leave.trigger.color,backgroundColor:s.leave.trigger.backgroundColor})})}removeGuides=()=>{this._guides.forEach(e=>e&&e.remove()),this._guides=[]};refresh=()=>{this.removeGuides(),this.createGuides()};kill=()=>{this.removeGuides(),this._it=null,this._helpers=null,this._utils=null,removeEventListener("resize",this._onResizeHandler,!1)}};
