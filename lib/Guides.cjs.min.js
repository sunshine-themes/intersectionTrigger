/*
* Guides v1.0.0
* https://sunshine-themes.com/intersectionTrigger
*
* @license Copyright 2022, Sunshine. All rights reserved.
* Subject to the terms at https://sunshine-themes.com/intersectionTrigger/standard-licensew.
* @author: Sherif magdy, sherifmagdy@sunshine-themes.com
*/
                  
var k=Object.defineProperty;var $=g=>k(g,"__esModule",{value:!0});var w=(g,e)=>{for(var d in e)k(g,d,{get:e[d],enumerable:!0})};$(exports);w(exports,{default:()=>E});var C={enter:{trigger:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Enter"},root:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Root Enter"}},leave:{trigger:{backgroundColor:"#ff0000",color:"#000",text:"Leave"},root:{backgroundColor:"#ff0000",color:"#000",text:"Root Leave"}}};var E=class{constructor(e={}){return this.params=e,this._guides=[],this}_registerIntersectionTrigger(e){this._it=e,this._helpers=this._it._helpers,this._utils=this._it._utils,this._addResizeListener()}_addResizeListener(){!!this._onResizeHandler&&removeEventListener("resize",this._onResizeHandler,!1),this._onResizeHandler=()=>{this.refresh()},addEventListener("resize",this._onResizeHandler,!1)}createGuides(){let e=this._helpers.is.virtical(),d=l=>{let{triggerGuide:a,trigger:u,enter:p,position:_,text:R,color:P,backgroundColor:v}=l,r=(n,o,t)=>n.style[o]=t,s=document.createElement("div"),G=e?"100px":"1px",y=e?"1px":"100px",z=e?"top":"left";r(s,"width",G),r(s,"height",y),r(s,"position","absolute"),r(s,"zIndex","9999"),r(s,"backgroundColor",v),r(s,z,_),(()=>{let n={dir:e?p?"bottom":"top":"bottom",value:e?"5px":"25px"},o={dir:e||p?"right":"left",value:e?a||this._it._root?"0px":"25px":"5px"},t=document.createElement("span");t.innerText=R,s.appendChild(t),r(t,"position","absolute"),r(t,"color",P),r(t,"fontSize","16px"),r(t,"fontWeight","bold"),r(t,"backgroundColor",v),r(t,"padding","5px"),r(t,"width","max-content"),r(t,n.dir,n.value),r(t,o.dir,o.value)})(),this._guides.push(s),document.body.append(s);let L=(n,o)=>{let t=[...s.style.transform.matchAll(/(-?\d*\.?\d+)\s*(px|%)?/g)],c=t.length?t[0][1]:0,m=t.length>1?t[1][1]:0,b=parseFloat(n)+parseFloat(c),f=parseFloat(o)+parseFloat(m);r(s,"transform",`translate(${b}px,${f}px)`)},x=(n=!0)=>{let o=s.getBoundingClientRect(),t=n?this._helpers.boundsMinusScrollbar(u):this._utils.getRootRect(this._it.observer.rootMargin),c=this._it._root?this._helpers.boundsMinusScrollbar(this._it._root):this._helpers.boundsMinusScrollbar(document.body),m=e?{x:t.right-o.right,y:t.top+_*t.height-o.top}:{x:t.left+_*t.width-o.left,y:t.top-o.top},b=e?p?{x:c.right-o.left,y:t.bottom-o.bottom}:{x:c.right-o.left,y:t.top-o.top}:p?{x:t.right-o.right,y:c.bottom-o.top}:{x:t.left-o.left,y:c.bottom-o.top},f=n?m:b;L(f.x,f.y)};if(!a){r(s,e?"width":"height",this._it._isRootViewport?e?"100vw":"100vh":"100px"),r(s,"position",this._it._isRootViewport?"fixed":"absolute"),this._it._isRootViewport&&!e&&r(s,"top","0px"),this._it._isRootViewport||x(!1);return}x(),this._helpers.getParents(u).forEach(n=>{!this._helpers.is.scrollable(n)||n.addEventListener("scroll",o=>x(),!1)})},i=(l=>{let a=C;return this._helpers.is.object(l)&&(a=this._helpers.mergeOptions(a,l)),a})(this.params),h=this._it.name;d({triggerGuide:!1,enter:!0,position:this._it._positions.rootStartPosition.guide,text:`${h} ${i.enter.root.text}`,color:i.enter.root.color,backgroundColor:i.enter.root.backgroundColor}),d({triggerGuide:!1,enter:!1,position:this._it._positions.rootEndPosition.guide,text:`${h} ${i.leave.root.text}`,color:i.leave.root.color,backgroundColor:i.leave.root.backgroundColor}),this._it.triggers.forEach(l=>{let{enter:a,leave:u}=this._utils.getTriggerData(l);d({triggerGuide:!0,trigger:l,enter:!0,position:a,text:`${h} ${i.enter.trigger.text}`,color:i.enter.trigger.color,backgroundColor:i.enter.trigger.backgroundColor}),d({triggerGuide:!0,trigger:l,enter:!1,position:u,text:`${h} ${i.leave.trigger.text}`,color:i.leave.trigger.color,backgroundColor:i.leave.trigger.backgroundColor})})}removeGuides=()=>{this._guides.forEach(e=>e&&e.remove()),this._guides=[]};refresh=()=>{this.removeGuides(),this.createGuides()};kill=()=>{this.removeGuides(),this._it=null,this._helpers=null,this._utils=null,removeEventListener("resize",this._onResizeHandler,!1)}};
