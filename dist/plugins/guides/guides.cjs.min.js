/*
* IntersectionTrigger v1.1.0 
* IntersectionTrigger utilizes the most modern web technology to trigger anything by intersection. Including scroll-based animations.
* https://sunshine-themes.com/?appID=ss_app_1
*
* Copyright 2023, Sunshine. All rights reserved.
* @license: Released under the personal 'no charge' license can be viewed at http://sunshine-themes.com/?appID=ss_app_1&tab=license, Licensees of commercial or business license are granted additional rights. See http://sunshine-themes.com/?appID=ss_app_1&tab=license for details..
* @author: Sherif Magdy, sherifmagdy@sunshine-themes.com
*
* Released on: February 17, 2023
*/

var v=Object.defineProperty;var H=t=>v(t,"__esModule",{value:!0});var O=(t,e)=>{for(var i in e)v(t,i,{get:e[i],enumerable:!0})};H(exports);O(exports,{default:()=>w});var E={enter:{trigger:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Enter"},root:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Root Enter"}},leave:{trigger:{backgroundColor:"#ff0000",color:"#000",text:"Leave"},root:{backgroundColor:"#ff0000",color:"#000",text:"Root Leave"}}};var s={function:t=>typeof t=="function",string:t=>typeof t=="string",boolean:t=>typeof t=="boolean",object:t=>!!t&&typeof t=="object"&&t!==null&&!(t instanceof Array),num:t=>typeof t=="number",array:t=>t instanceof Array,element:t=>t instanceof HTMLElement,empty:t=>Object.keys(t).length===0,doc:t=>s.element(t)&&t.nodeType===9,anime:t=>s.object(t)&&t.hasOwnProperty("animatables")&&!t.hasOwnProperty("add"),tl:t=>s.object(t)&&t.hasOwnProperty("add")&&s.function(t.add),animeInstance:t=>s.anime(t)||s.tl(t),pixel:t=>t.includes("px"),inObject:(t,e)=>s.object(t)&&e in t,percent:t=>t.includes("%"),scrollable:(t,e)=>e?e==="y"?t.scrollHeight>t.clientHeight:t.scrollWidth>t.clientWidth:t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth};var C=t=>{let e=[];for(let i=t.parentElement;i&&!s.doc(i)&&i!==document.documentElement;i=i.parentElement)e.push(i);return e},b=(t,e)=>{let i={...t};for(let[a,l]of Object.entries(e)){let r=a;if(s.object(i[r])&&!s.empty(i[r])){if(!s.object(l))continue;i[r]=b(i[r],l)}else i[r]=l}return i};var y=(t,e)=>[t,e].sort((i,a)=>i-a);var p=(t,e)=>{for(let i in e)t.style[i]=e[i]},k=()=>{let t=document.createElement("div");t.style.cssText="overflow:scroll; visibility:hidden; position:absolute;",document.body.appendChild(t);let e=t.offsetWidth-t.clientWidth;return t.remove(),e};var _=class{constructor(e){this.removeGuides=()=>{this._guides.forEach(e=>e&&e.remove()),this._guides=[]};this.update=()=>{this.removeGuides(),this.createGuides()};this.kill=()=>{this._removeResizeListener(),this.removeGuides(),this._it.guides=void 0,this._it=void 0,this._utils=void 0};return this._registerIntersectionTrigger(e),this}_registerIntersectionTrigger(e){this._it=e,this._utils=this._it._utils}init(e){this.options=s.object(e)?e:{},this._guides=[],this._scrollBarWidth=k(),this.isVer=this._utils.isVertical(),this.rootEl=this._utils.getRoot(),this.scrollWidth={x:s.scrollable(this.rootEl,"x")?this._scrollBarWidth:0,y:s.scrollable(this.rootEl,"y")?this._scrollBarWidth:0},this._addResizeListener(),this.update()}_addResizeListener(){this._onResizeHandler=this.update,addEventListener("resize",this._onResizeHandler,!1)}_removeResizeListener(){removeEventListener("resize",this._onResizeHandler,!1)}_guideCreation(e,i){let{enter:a,position:l,isHigherValue:r,text:h,color:m,backgroundColor:g}=e,c=document.createElement("div");p(c,{width:this.isVer?"100px":"1px",height:this.isVer?"1px":"100px",position:"absolute",zIndex:"9999",backgroundColor:g,[this.isVer?"top":"left"]:l.toString()}),(()=>{let o={dir:this.isVer?r?"bottom":"top":"bottom",value:this.isVer?"5px":"25px"},u={dir:this.isVer||r?"right":"left",value:this.isVer?i||this._it._root?"0px":"25px":"5px"},n=document.createElement("span");n.innerText=h,c.appendChild(n),p(n,{position:"absolute",color:m,fontSize:"16px",fontWeight:"bold",backgroundColor:g,padding:"5px",width:"max-content",[o.dir]:o.value,[u.dir]:u.value})})(),this._guides.push(c),document.body.append(c);let T=(o,u)=>{let n=[...c.style.transform.matchAll(/(-?\d*\.?\d+)\s*(px|%)?/g)],f=n.length?n[0][1]:"0",d=n.length>1?n[1][1]:"0",L=o+parseFloat(f),P=u+parseFloat(d);p(c,{transform:`translate(${L}px,${P}px)`})},x=()=>{let o=c.getBoundingClientRect(),u=this.rootEl.getBoundingClientRect(),n=this._utils.getRootRect(this._it.observer.rootMargin),f={x:r?this.scrollWidth.x:0,y:r?this.scrollWidth.y:0},d={x:0,y:0};d=this.isVer?a?{x:u.right-o.left-this.scrollWidth.y,y:n.bottom-o.bottom-f.x}:{x:u.right-o.left-this.scrollWidth.y,y:n.top-o.top-f.x}:a?{x:n.right-o.right,y:u.bottom-o.top-this.scrollWidth.x}:{x:n.left-o.left,y:u.bottom-o.top-this.scrollWidth.x},i&&(n=i.getBoundingClientRect(),d=this.isVer?{x:n.right-o.right,y:n.top+l*n.height-o.top}:{x:n.left+l*n.width-o.left,y:n.top-o.top}),T(d.x,d.y)};if(!i){p(c,{[this.isVer?"width":"height"]:this._it._root?"100px":this.isVer?"100vw":"100vh",position:this._it._root?"absolute":"fixed"}),!this._it._root&&!this.isVer&&p(c,{top:"0px"}),this._it._root&&x();return}x(),C(i).forEach(o=>{!s.scrollable(o)||o.addEventListener("scroll",x,!1)})}createGuides(){let e=b(E,this.options),i=this._it.name,a=this._it._positionsData.rEP.value,l=this._it._positionsData.rLP.value;this._guideCreation({enter:!0,position:`${a}${this._it._positionsData.rEP.unit}`,isHigherValue:y(a,l)[1]===a,text:`${i} ${e.enter.root.text}`,color:e.enter.root.color,backgroundColor:e.enter.root.backgroundColor}),this._guideCreation({enter:!1,position:`${l}${this._it._positionsData.rLP.unit}`,isHigherValue:y(a,l)[1]===l,text:`${i} ${e.leave.root.text}`,color:e.leave.root.color,backgroundColor:e.leave.root.backgroundColor}),this._it.triggers.forEach(r=>{let{enter:h,leave:m,maxPosition:g}=this._utils.getTriggerData(r);this._guideCreation({enter:!0,position:h,isHigherValue:h===g,text:`${i} ${e.enter.trigger.text}`,color:e.enter.trigger.color,backgroundColor:e.enter.trigger.backgroundColor},r),this._guideCreation({enter:!1,position:m,isHigherValue:m===g,text:`${i} ${e.leave.trigger.text}`,color:e.leave.trigger.color,backgroundColor:e.leave.trigger.backgroundColor},r)})}};_.pluginName="guides";var w=_;
