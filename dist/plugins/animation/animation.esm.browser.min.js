/*
* IntersectionTrigger v1.1.0 
* IntersectionTrigger utilizes the most modern web technology to trigger anything by intersection. Including scroll-based animations.
* https://sunshine-themes.com/?appID=ss_app_1
*
* Copyright 2023, Sunshine. All rights reserved.
* @license: Released under the personal 'no charge' license can be viewed at http://sunshine-themes.com/?appID=ss_app_1&tab=license, Licensees of commercial or business license are granted additional rights. See http://sunshine-themes.com/?appID=ss_app_1&tab=license for details..
* @author: Sherif Magdy, sherifmagdy@sunshine-themes.com
*
* Released on: February 17, 2023
*/

function tt(e,t){return it(e)||nt(e,t)||rt(e,t)||et()}function et(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rt(e,t){if(!!e){if(typeof e=="string")return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}}function U(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nt(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,f,y,i,g=[],p=!0,c=!1;try{if(y=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;p=!1}else for(;!(p=(n=y.call(r)).done)&&(g.push(n.value),g.length!==t);p=!0);}catch(a){c=!0,f=a}finally{try{if(!p&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw f}}return g}}function it(e){if(Array.isArray(e))return e}function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),r.push.apply(r,n)}return r}function at(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K(Object(r),!0).forEach(function(n){ot(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ot(e,t,r){return t=st(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function st(e){var t=ut(e,"string");return E(t)==="symbol"?t:String(t)}function ut(e,t){if(E(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(E(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E(e){return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(e)}var l={function:function(t){return typeof t=="function"},string:function(t){return typeof t=="string"},boolean:function(t){return typeof t=="boolean"},object:function(t){return!!t&&E(t)==="object"&&t!==null&&!(t instanceof Array)},num:function(t){return typeof t=="number"},array:function(t){return t instanceof Array},element:function(t){return t instanceof HTMLElement},empty:function(t){return Object.keys(t).length===0},doc:function(t){return l.element(t)&&t.nodeType===9},anime:function(t){return l.object(t)&&t.hasOwnProperty("animatables")&&!t.hasOwnProperty("add")},tl:function(t){return l.object(t)&&t.hasOwnProperty("add")&&l.function(t.add)},animeInstance:function(t){return l.anime(t)||l.tl(t)},pixel:function(t){return t.includes("px")},inObject:function(t,r){return l.object(t)&&r in t},percent:function(t){return t.includes("%")},scrollable:function(t,r){return r?r==="y"?t.scrollHeight>t.clientHeight:t.scrollWidth>t.clientWidth:t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth}},q=function(t,r,n){return Math.min(Math.max(t,r),n)},$=function(t){return t.split(/\s+/)};var C=function e(t,r){for(var n=at({},t),f=0,y=Object.entries(r);f<y.length;f++){var i=tt(y[f],2),g=i[0],p=i[1],c=g;if(l.object(n[c])&&!l.empty(n[c])){if(!l.object(p))continue;n[c]=e(n[c],p)}else n[c]=p}return n},M=function(t){throw new Error(t)};var z=function(){},J={to:0,after:1,speed:100,maxDistance:500,onStart:z,onComplete:z};var R={instance:{},toggleActions:"play complete reverse complete",link:!1,snap:!1};function D(e){return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(e)}function lt(e){return mt(e)||pt(e)||ft(e)||ct()}function ct(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ft(e,t){if(!!e){if(typeof e=="string")return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}}function pt(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mt(e){if(Array.isArray(e))return W(e)}function W(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q(Object(r),!0).forEach(function(n){vt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vt(e,t,r){return t=Y(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y(n.key),n)}}function yt(e,t,r){return t&&X(e.prototype,t),r&&X(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y(e){var t=gt(e,"string");return D(t)==="symbol"?t:String(t)}function gt(e,t){if(D(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(D(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Z=function(){function e(t){return dt(this,e),this._registerIntersectionTrigger(t),this.setUtils(),this}return yt(e,[{key:"_registerIntersectionTrigger",value:function(r){this._it=r,this._utils=this._it._utils}},{key:"setUtils",value:function(){var r=this,n=this._utils.dirProps(),f=n.ref,y=n.refOpposite,i=n.length,g=this._utils.isVertical(),p=this._utils.getRoot(),c=new WeakMap;this.seekSmoothly=function(a,s,u,o){if(!r.killed){var m=a.currentTime,d=o?Math.min(m+u,s):Math.max(m-u,s);a.seek(d);var v=o?d>=s:d<=s;if(!v){var b=requestAnimationFrame(function(){return r.seekSmoothly(a,s,u,o)});c.set(a,b)}}},this.seek=function(a,s,u){if(l.num(u)){var o=a.currentTime,m=s>o,d=c.has(a)&&c.get(a)||0;cancelAnimationFrame(d),r.seekSmoothly(a,s,u,m);return}a.seek(s)},this.startSnaping=function(a){var s=a.snapDistance,u=a.currentDis,o=a.snap,m=a.step,d=a.toRef,v=d===void 0?!1:d;if(!r.killed){var b=v?-1:1;if(g?p.scrollBy({top:m*b,behavior:"instant"}):p.scrollBy({left:m*b,behavior:"instant"}),u+=m,u>=s){u=0,o.onComplete(r._it);return}requestAnimationFrame(function(){return r.startSnaping({snapDistance:s,currentDis:u,snap:o,step:m,toRef:v})})}},this.parseSnap=function(a,s){var u=a.instance,o=a.snap,m=function(P){for(var I=[],_=0;_<=1;)I.push(q(_,0,1)),_=_+P;return I.map(function(x){return Math.round(x*u.duration)})},d=function(){return l.inObject(u,"marks")?u.marks.map(function(P){return P.time}):M('"marks" feature is not available in the provided anime instance')},v=function(P){return C(J,P)},b=function(P){return l.num(P)?m(P):d()},k={},O={};if(s){var j=o,h=j.originalToParam;h&&(k=S(S({},o),{},{to:b(h)}))}else{l.boolean(o)&&(O=v({to:"marks"})),(l.array(o)||l.num(o))&&(O=v({to:o})),l.object(o)&&(O=v(o)),k=O;var T=O,w=T.to;l.string(w)&&!!w&&(k=S(S({},O),{},{originalToParam:"marks",to:d()})),l.num(w)&&!!w&&(k=S(S({},O),{},{originalToParam:w,to:m(w)}))}return k},this.getTIL=function(a,s,u){var o=a.getBoundingClientRect();return o[i]-(s*o[i]+(1-u)*o[i])},this.getSnapStep=function(a){return l.object(a)?Math.round(Math.max(a.speed*17/1e3,1)):0},this.animateHandler=function(a,s){var u=s.enter,o=s.leave,m=s.tIL,d=s.instance,v=s.snap,b=s.step,k=s.link;if(!r.killed){var O=a.getBoundingClientRect(),j=r._utils.getTriggerStates(a,"ids");r._it.rootBounds=r._utils.getRootRect(r._it.observer.rootMargin);var h=r._it.rootBounds,T=m+(r._it._isREPGreater?h[i]:-h[i]),w=d.duration,A=0,P=r._utils.getPositions(O,h,{enter:u,leave:o,ref:f,refOpposite:y,length:i}),I=P[2]-P[0];if(I>0&&(A=w*I/T,r.seek(d,A,k)),!l.boolean(v)){var _=0;clearTimeout(j.snapTimeOutId);var x=setTimeout(function(){var H=v.to.map(function(L){return A-L}),F=H.map(function(L){return Math.abs(L)}),N=Math.min.apply(Math,lt(F)),G=H[F.indexOf(N)],B=T*N/w,V={snapDistance:B,currentDis:_,snap:v,step:b};if(!(B>=v.maxDistance||B<b)){if(v.onStart(r._it),G<0){r.startSnaping(V);return}r.startSnaping(S(S({},V),{},{toRef:!0}))}},v.after*1e3);r._utils.setTriggerStates(a,{ids:S(S({},j),{},{snapTimeOutId:x})})}}}}},{key:"animate",value:function(r,n,f){var y=this,i=n.instance,g=n.toggleActions,p=n.link,c=n.snap;if(p){var a=this._utils.getTriggerStates(r,"onScroll"),s=a.animate,u=this._utils.getTriggerStates(r,"ids"),o=this._utils.getTriggerData(r),m=o.enter,d=o.leave,v=o.minPosition,b=o.maxPosition,k=this.getTIL(r,v,b),O=this.getSnapStep(c),j={enter:m,leave:d,tIL:k,instance:i,snap:c,link:l.boolean(p)?p:Math.abs(p),step:O};switch(f){case 0:case 2:if(this._it._states.oCbFirstInvoke&&this.animateHandler(r,j),s)break;this._utils.setTriggerScrollStates(r,"animate",function(){return y.animateHandler(r,j)});break;case 1:case 3:clearTimeout(u.snapTimeOutId),this._utils.setTriggerScrollStates(r,"animate"),this.seek(i,f===1?i.duration:0,p);break}return}var h=g[f],T=i.currentTime/i.duration;if(h!=="none")switch(h){case"play":i.reversed&&(i.reverse(),i.completed=!1),T<1&&i[h]();break;case"resume":T<1&&T>0&&i.play();break;case"restart":case"reset":i.reversed&&i.reverse(),i[h]();break;case"pause":i[h]();break;case"complete":i.pause(),i.seek(i.reversed?0:i.duration);break;case"reverse":!i.reversed&&i[h](),i.paused&&i.play();break;case"kill":l.inObject(i,"kill")&&i.kill(),this._utils.setTriggerData(r,{animation:void 0},!0);break}}},{key:"parse",value:function(r,n){var f={},y={};if(n){var i=r,g=i.instance,p=i.snap;!l.boolean(p)&&(y=S(S({},r),{},{snap:this.parseSnap({instance:g,snap:p},!0)}))}else{if(!l.object(r))return M('"animation" parameter is NOT valid.');if(l.animeInstance(r))f=C(R,{instance:r});else if(r.instance&&l.animeInstance(r.instance))f=C(R,r);else return M('"instance" parameter must be anime instance.');var c=f,a=c.toggleActions,s=c.snap,u=c.instance,o=c.link;y={instance:u,toggleActions:$(a),snap:!!s&&this.parseSnap({instance:u,snap:s}),link:o}}return y.instance.reset(),y}},{key:"update",value:function(){var r=this;this._it.triggers.forEach(function(n){var f=r._utils.getTriggerData(n),y=f.enter,i=f.leave,g=f.minPosition,p=f.maxPosition,c=f.animation;c=c&&r.parse(c,!0),r._utils.setTriggerData(n,{animation:c},!0);var a=r._utils.getTriggerStates(n,"onScroll"),s=a.animate;if(s&&!!c){var u=c,o=u.instance,m=u.snap,d=u.link,v=r.getTIL(n,g,p),b=r.getSnapStep(m);r._utils.setTriggerScrollStates(n,"animate"),r._utils.setTriggerScrollStates(n,"animate",function(){return r.animateHandler(n,{enter:y,leave:i,instance:o,snap:m,link:d,tIL:v,step:b})})}})}},{key:"kill",value:function(){this.killed=!0,this._it=this._utils=void 0}}]),e}();Z.pluginName="animation";var Pt=Z;export{Pt as default};
//# sourceMappingURL=animation.esm.browser.min.js.map
