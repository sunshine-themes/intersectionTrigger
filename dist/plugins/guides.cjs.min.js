/*
* IntersectionTrigger v1.0.4 
* IntersectionTrigger utilizes the most modern web technology to trigger anything by intersection. Including scroll-based animations.
* https://sunshine-themes.com/?appID=ss_app_1
*
* Copyright 2023, Sunshine. All rights reserved.
* @license: Released under the personal 'no charge' license can be viewed at http://sunshine-themes.com/?appID=ss_app_1&tab=license, Licensees of commercial or business license are granted additional rights. See http://sunshine-themes.com/?appID=ss_app_1&tab=license for details..
* @author: Sherif Magdy, sherifmagdy@sunshine-themes.com
*
* Released on: January 2, 2023
*/

var P=Object.defineProperty;var L=t=>P(t,"__esModule",{value:!0});var B=(t,e)=>{for(var o in e)P(t,o,{get:e[o],enumerable:!0})};L(exports);B(exports,{default:()=>R});var V={enter:{trigger:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Enter"},root:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Root Enter"}},leave:{trigger:{backgroundColor:"#ff0000",color:"#000",text:"Leave"},root:{backgroundColor:"#ff0000",color:"#000",text:"Root Leave"}}};var c={function:t=>typeof t=="function",string:t=>typeof t=="string",boolean:t=>typeof t=="boolean",object:t=>t&&typeof t=="object"&&!(t instanceof Array),inObject:(t,e)=>c.object(t)&&e in t,num:t=>typeof t=="number",percent:t=>t&&t.includes("%"),pixel:t=>t&&t.includes("px"),array:t=>t instanceof Array,element:t=>t instanceof HTMLElement||t instanceof Element,doc:t=>t&&t.nodeType===9,scrollable:(t,e=null)=>e?e==="y"?t.scrollHeight>t.clientHeight:t.scrollWidth>t.clientWidth:t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth,anime:t=>c.object(t)&&t.hasOwnProperty("animatables")&&!t.hasOwnProperty("add"),tl:t=>c.object(t)&&t.hasOwnProperty("add")&&c.function(t.add),animeInstance:t=>c.anime(t)||c.tl(t)};var W=t=>{let e=[];for(t=t.parentNode;t&&t!==document&&t!==document.documentElement;t=t.parentNode)e.push(t);return e},v=(t,e)=>{let o=t,s=e;return Object.entries(o).forEach(([r,n])=>{c.object(n)?v(n,s[r]=s[r]||{}):r in s||(s[r]=n)}),s};var y=(t,e)=>[t,e].sort((o,s)=>o-s);var p=(t,e)=>{for(let o in e)t.style[o]=e[o]},k=()=>{let t=document.createElement("div");t.style.cssText="overflow:scroll; visibility:hidden; position:absolute;",document.body.appendChild(t);let e=t.offsetWidth-t.clientWidth;return t.remove(),e};var E=class{constructor(e){return this._registerIntersectionTrigger(e),this}_registerIntersectionTrigger(e){this._it=e,this._utils=this._it._utils}init(e){this.options=c.object(e)?e:{},this._guides=[],this._scrollBarWidth=k(),this.isVer=this._utils.isVertical(),this.rootEl=this._it._root??document.body,this.scrollWidth={x:c.scrollable(this.rootEl,"x")?this._scrollBarWidth:0,y:c.scrollable(this.rootEl,"y")?this._scrollBarWidth:0},this._addResizeListener(),this.update()}_addResizeListener(){this._onResizeHandler=this.update,this._utils.getRoot().addEventListener("resize",this._onResizeHandler,!1)}_removeResizeListener(){this._utils.getRoot().removeEventListener("resize",this._onResizeHandler,!1)}_guideCreation(e,o=null){let{enter:s,position:r,isHigherValue:n,text:u,color:g,backgroundColor:f}=e,d=document.createElement("div");p(d,{width:this.isVer?"100px":"1px",height:this.isVer?"1px":"100px",position:"absolute",zIndex:"9999",backgroundColor:f,[this.isVer?"top":"left"]:r}),(()=>{let h={dir:this.isVer?n?"bottom":"top":"bottom",value:this.isVer?"5px":"25px"},i={dir:this.isVer||n?"right":"left",value:this.isVer?o||this._it._root?"0px":"25px":"5px"},l=document.createElement("span");l.innerText=u,d.appendChild(l),p(l,{position:"absolute",color:g,fontSize:"16px",fontWeight:"bold",backgroundColor:f,padding:"5px",width:"max-content",[h.dir]:h.value,[i.dir]:i.value})})(),this._guides.push(d),document.body.append(d);let w=(h,i)=>{let l=[...d.style.transform.matchAll(/(-?\d*\.?\d+)\s*(px|%)?/g)],a=l.length?l[0][1]:0,x=l.length>1?l[1][1]:0,b=parseFloat(h)+parseFloat(a),m=parseFloat(i)+parseFloat(x);p(d,{transform:`translate(${b}px,${m}px)`})},_=(h=!0)=>{let i=d.getBoundingClientRect(),l=this.rootEl.getBoundingClientRect(),a=this._utils.getRootRect(this._it.observer.rootMargin),x={x:n?this.scrollWidth.x:0,y:n?this.scrollWidth.y:0},b=this.isVer?s?{x:l.right-i.left-this.scrollWidth.y,y:a.bottom-i.bottom-x.x}:{x:l.right-i.left-this.scrollWidth.y,y:a.top-i.top-x.x}:s?{x:a.right-i.right,y:l.bottom-i.top-this.scrollWidth.x}:{x:a.left-i.left,y:l.bottom-i.top-this.scrollWidth.x},m={};h&&(a=o.getBoundingClientRect(),m=this.isVer?{x:a.right-i.right,y:a.top+r*a.height-i.top}:{x:a.left+r*a.width-i.left,y:a.top-i.top});let C=h?m:b;w(C.x,C.y)};if(!o){p(d,{[this.isVer?"width":"height"]:this._it._isViewport?this.isVer?"100vw":"100vh":"100px",position:this._it._isViewport?"fixed":"absolute"}),this._it._isViewport&&!this.isVer&&p(d,{top:"0px"}),this._it._isViewport||_(!1);return}_(),W(o).forEach(h=>{!c.scrollable(h)||h.addEventListener("scroll",_,!1)})}createGuides(){let o=(u=>{let g=V;return c.object(u)&&(g=v(g,u)),g})(this.options),s=this._it.name,r=this._it._positionsData.rEP.value,n=this._it._positionsData.rLP.value;this._guideCreation({enter:!0,position:`${r}${this._it._positionsData.rEP.unit}`,isHigherValue:y(r,n)[1]===r,text:`${s} ${o.enter.root.text}`,color:o.enter.root.color,backgroundColor:o.enter.root.backgroundColor}),this._guideCreation({enter:!1,position:`${n}${this._it._positionsData.rLP.unit}`,isHigherValue:y(r,n)[1]===n,text:`${s} ${o.leave.root.text}`,color:o.leave.root.color,backgroundColor:o.leave.root.backgroundColor}),this._it.triggers.forEach(u=>{let{enter:g,leave:f,maxPosition:d}=this._utils.getTriggerData(u);this._guideCreation({enter:!0,position:g,isHigherValue:g===d,text:`${s} ${o.enter.trigger.text}`,color:o.enter.trigger.color,backgroundColor:o.enter.trigger.backgroundColor},u),this._guideCreation({enter:!1,position:f,isHigherValue:f===d,text:`${s} ${o.leave.trigger.text}`,color:o.leave.trigger.color,backgroundColor:o.leave.trigger.backgroundColor},u)})}removeGuides=()=>{this._guides.forEach(e=>e&&e.remove()),this._guides=[]};update=()=>{this.removeGuides(),this.createGuides()};kill=()=>{this._removeResizeListener(),this.removeGuides(),this._it.guides=null,this._it=null,this._utils=null}};E.pluginName="guides";var R=E;
