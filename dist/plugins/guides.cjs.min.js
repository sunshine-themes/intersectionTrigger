/*
* IntersectionTrigger v1.0.1 
* IntersectionTrigger utilizes the most modern web technology to trigger anything by intersection. Including scroll-based animations.
* https://sunshine-themes.com/?appID=ss_app_1
*
* Copyright 2022, Sunshine. All rights reserved.
* @license: Released under the personal 'no charge' license can be viewed at http://sunshine-themes.com/?appID=ss_app_1&tab=license, Licensees of commercial or business license are granted additional rights. See http://sunshine-themes.com/?appID=ss_app_1&tab=license for details..
* @author: Sherif Magdy, sherifmagdy@sunshine-themes.com
*
* Released on: December 20, 2022
*/

var P=Object.defineProperty;var L=t=>P(t,"__esModule",{value:!0});var B=(t,e)=>{for(var o in e)P(t,o,{get:e[o],enumerable:!0})};L(exports);B(exports,{default:()=>R});var V={enter:{trigger:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Enter"},root:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Root Enter"}},leave:{trigger:{backgroundColor:"#ff0000",color:"#000",text:"Leave"},root:{backgroundColor:"#ff0000",color:"#000",text:"Root Leave"}}};var a={function:t=>typeof t=="function",string:t=>typeof t=="string",boolean:t=>typeof t=="boolean",object:t=>t&&typeof t=="object"&&!(t instanceof Array),inObject:(t,e)=>a.object(t)&&e in t,num:t=>typeof t=="number",percent:t=>t&&t.includes("%"),pixel:t=>t&&t.includes("px"),array:t=>t instanceof Array,element:t=>t instanceof HTMLElement||t instanceof Element,doc:t=>t&&t.nodeType===9,scrollable:(t,e=null)=>e?e==="y"?t.scrollHeight>t.clientHeight:t.scrollWidth>t.clientWidth:t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth,anime:t=>a.object(t)&&t.hasOwnProperty("animatables")&&!t.hasOwnProperty("add"),tl:t=>a.object(t)&&t.hasOwnProperty("add")&&a.function(t.add),animeInstance:t=>a.anime(t)||a.tl(t)};var W=t=>{let e=[];for(t=t.parentNode;t&&t!==document&&t!==document.documentElement;t=t.parentNode)e.push(t);return e},v=(t,e)=>{let o=t,i=e;return Object.entries(o).forEach(([r,c])=>{a.object(c)?v(c,i[r]=i[r]||{}):r in i||(i[r]=c)}),i};var y=(t,e)=>[t,e].sort((o,i)=>o-i);var p=(t,e)=>{for(let o in e)t.style[o]=e[o]},k=()=>{let t=document.createElement("div");t.style.cssText="overflow:scroll; visibility:hidden; position:absolute;",document.body.appendChild(t);let e=t.offsetWidth-t.clientWidth;return t.remove(),e};var E=class{constructor(e){return this._registerIntersectionTrigger(e),this}_registerIntersectionTrigger(e){this._it=e,this._utils=this._it._utils}init(e){this.options=a.object(e)?e:{},this._guides=[],this._scrollBarWidth=k(),this.isVer=this._utils.isVertical(),this.rootEl=this._it._root??document.body,this.scrollWidth={x:a.scrollable(this.rootEl,"x")?this._scrollBarWidth:0,y:a.scrollable(this.rootEl,"y")?this._scrollBarWidth:0},this._addResizeListener(),this.update()}_addResizeListener(){this._onResizeHandler=this.update,this._utils.getRoot().addEventListener("resize",this._onResizeHandler,!1)}_removeResizeListener(){this._utils.getRoot().removeEventListener("resize",this._onResizeHandler,!1)}_guideCreation(e,o=null){let{enter:i,position:r,isHigherValue:c,text:u,color:g,backgroundColor:f}=e,h=document.createElement("div");p(h,{width:this.isVer?"100px":"1px",height:this.isVer?"1px":"100px",position:"absolute",zIndex:"9999",backgroundColor:f,[this.isVer?"top":"left"]:r}),(()=>{let d={dir:this.isVer?i?"bottom":"top":"bottom",value:this.isVer?"5px":"25px"},s={dir:this.isVer||i?"right":"left",value:this.isVer?o||this._it._root?"0px":"25px":"5px"},n=document.createElement("span");n.innerText=u,h.appendChild(n),p(n,{position:"absolute",color:g,fontSize:"16px",fontWeight:"bold",backgroundColor:f,padding:"5px",width:"max-content",[d.dir]:d.value,[s.dir]:s.value})})(),this._guides.push(h),document.body.append(h);let w=(d,s)=>{let n=[...h.style.transform.matchAll(/(-?\d*\.?\d+)\s*(px|%)?/g)],l=n.length?n[0][1]:0,x=n.length>1?n[1][1]:0,b=parseFloat(d)+parseFloat(l),m=parseFloat(s)+parseFloat(x);p(h,{transform:`translate(${b}px,${m}px)`})},_=(d=!0)=>{let s=h.getBoundingClientRect(),n=this.rootEl.getBoundingClientRect(),l=this._utils.getRootRect(this._it.observer.rootMargin),x={x:c?this.scrollWidth.x:0,y:c?this.scrollWidth.y:0},b=this.isVer?i?{x:n.right-s.left-this.scrollWidth.y,y:l.bottom-s.bottom-x.x}:{x:n.right-s.left-this.scrollWidth.y,y:l.top-s.top-x.x}:i?{x:l.right-s.right,y:n.bottom-s.top-this.scrollWidth.x}:{x:l.left-s.left,y:n.bottom-s.top-this.scrollWidth.x},m={};d&&(l=o.getBoundingClientRect(),m=this.isVer?{x:l.right-s.right,y:l.top+r*l.height-s.top}:{x:l.left+r*l.width-s.left,y:l.top-s.top});let C=d?m:b;w(C.x,C.y)};if(!o){p(h,{[this.isVer?"width":"height"]:this._it._isViewport?this.isVer?"100vw":"100vh":"100px",position:this._it._isViewport?"fixed":"absolute"}),this._it._isViewport&&!this.isVer&&p(h,{top:"0px"}),this._it._isViewport||_(!1);return}_(),W(o).forEach(d=>{!a.scrollable(d)||d.addEventListener("scroll",_,!1)})}createGuides(){let o=(u=>{let g=V;return a.object(u)&&(g=v(g,u)),g})(this.options),i=this._it.name,r=this._it._positionsData.rEP.value,c=this._it._positionsData.rLP.value;this._guideCreation({enter:!0,position:`${r}${this._it._positionsData.rEP.unit}`,isHigherValue:y(r,c)[1]===r,text:`${i} ${o.enter.root.text}`,color:o.enter.root.color,backgroundColor:o.enter.root.backgroundColor}),this._guideCreation({enter:!1,position:`${c}${this._it._positionsData.rLP.unit}`,isHigherValue:y(r,c)[1]===c,text:`${i} ${o.leave.root.text}`,color:o.leave.root.color,backgroundColor:o.leave.root.backgroundColor}),this._it.triggers.forEach(u=>{let{enter:g,leave:f}=this._utils.getTriggerData(u);this._guideCreation({enter:!0,position:g,text:`${i} ${o.enter.trigger.text}`,color:o.enter.trigger.color,backgroundColor:o.enter.trigger.backgroundColor},u),this._guideCreation({enter:!1,position:f,text:`${i} ${o.leave.trigger.text}`,color:o.leave.trigger.color,backgroundColor:o.leave.trigger.backgroundColor},u)})}removeGuides=()=>{this._guides.forEach(e=>e&&e.remove()),this._guides=[]};update=()=>{this.removeGuides(),this.createGuides()};kill=()=>{this._removeResizeListener(),this.removeGuides(),this._it.guides=null,this._it=null,this._utils=null}};E.pluginName="guides";var R=E;
