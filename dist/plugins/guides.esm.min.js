/*
* IntersectionTrigger v1.0.0 
* IntersectionTrigger is a robust JavaScript toolset that turns developers into animation superheroes. Build high-performance animations that work in **every** major browser.
* https://sunshine-themes.com
*
* Copyright 2022, Sunshine. All rights reserved.
* @license: Released under the Standard 'no charge' license: https://sunshine-themes.com/standard-license License.
* @author: Sherif Magdy, sherifmagdy@sunshine-themes.com
*
* Released on: August 8, 2022
*/

var k={enter:{trigger:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Enter"},root:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Root Enter"}},leave:{trigger:{backgroundColor:"#ff0000",color:"#000",text:"Leave"},root:{backgroundColor:"#ff0000",color:"#000",text:"Root Leave"}}};var l={function:t=>typeof t=="function",string:t=>typeof t=="string",boolean:t=>typeof t=="boolean",object:t=>t&&typeof t=="object"&&!(t instanceof Array),inObject:(t,e)=>l.object(t)&&e in t,num:t=>typeof t=="number",percent:t=>t&&t.includes("%"),pixel:t=>t&&t.includes("px"),array:t=>t instanceof Array,element:t=>t instanceof HTMLElement||t instanceof Element,doc:t=>t&&t.nodeType===9,scrollable:(t,e=null)=>e?e==="y"?t.scrollHeight>t.clientHeight:t.scrollWidth>t.clientWidth:t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth,anime:t=>l.object(t)&&t.hasOwnProperty("animatables")&&!t.hasOwnProperty("add"),tl:t=>l.object(t)&&t.hasOwnProperty("add")&&l.function(t.add),animeInstance:t=>l.anime(t)||l.tl(t)};var R=t=>{let e=[];for(t=t.parentNode;t&&t!==document&&t!==document.documentElement;t=t.parentNode)e.push(t);return e},E=(t,e)=>{let g=t,p=e;return Object.entries(g).forEach(([s,c])=>{l.object(c)?E(c,p[s]=p[s]||{}):s in p||(p[s]=c)}),p};var P=class{constructor(e){return this._registerIntersectionTrigger(e),this}_registerIntersectionTrigger(e){this._it=e,this._utils=this._it._utils}init(e){this.options=l.object(e)?e:{},this._guides=[],this._addResizeListener(),this.update()}_addResizeListener(){this._onResizeHandler=this.update,this._utils.getRoot().addEventListener("resize",this._onResizeHandler,!1)}_removeResizeListener(){this._utils.getRoot().removeEventListener("resize",this._onResizeHandler,!1)}createGuides(){let e=this._utils.isVirtical(),g=u=>{let{triggerGuide:d,trigger:f,enter:x,position:_,text:L,color:w,backgroundColor:C}=u,r=(a,i,o)=>a.style[i]=o,n=document.createElement("div"),$=e?"100px":"1px",G=e?"1px":"100px",D=e?"top":"left";r(n,"width",$),r(n,"height",G),r(n,"position","absolute"),r(n,"zIndex","9999"),r(n,"backgroundColor",C),r(n,D,_),(()=>{let a={dir:e?x?"bottom":"top":"bottom",value:e?"5px":"25px"},i={dir:e||x?"right":"left",value:e?d||this._it._root?"0px":"25px":"5px"},o=document.createElement("span");o.innerText=L,n.appendChild(o),r(o,"position","absolute"),r(o,"color",w),r(o,"fontSize","16px"),r(o,"fontWeight","bold"),r(o,"backgroundColor",C),r(o,"padding","5px"),r(o,"width","max-content"),r(o,a.dir,a.value),r(o,i.dir,i.value)})(),this._guides.push(n),document.body.append(n);let T=(a,i)=>{let o=[...n.style.transform.matchAll(/(-?\d*\.?\d+)\s*(px|%)?/g)],h=o.length?o[0][1]:0,v=o.length>1?o[1][1]:0,y=parseFloat(a)+parseFloat(h),m=parseFloat(i)+parseFloat(v);r(n,"transform",`translate(${y}px,${m}px)`)},b=(a=!0)=>{let i=n.getBoundingClientRect(),o=a?f.getBoundingClientRect():this._utils.getRootRect(this._it.observer.rootMargin),h=(this._it._root??document.body).getBoundingClientRect(),v=e?{x:o.right-i.right,y:o.top+_*o.height-i.top}:{x:o.left+_*o.width-i.left,y:o.top-i.top},y=e?x?{x:h.right-i.left,y:o.bottom-i.bottom}:{x:h.right-i.left,y:o.top-i.top}:x?{x:o.right-i.right,y:h.bottom-i.top}:{x:o.left-i.left,y:h.bottom-i.top},m=a?v:y;T(m.x,m.y)};if(!d){r(n,e?"width":"height",this._it._isViewport?e?"100vw":"100vh":"100px"),r(n,"position",this._it._isViewport?"fixed":"absolute"),this._it._isViewport&&!e&&r(n,"top","0px"),this._it._isViewport||b(!1);return}b(),R(f).forEach(a=>{!l.scrollable(a)||a.addEventListener("scroll",()=>b(),!1)})},s=(u=>{let d=k;return l.object(u)&&(d=E(d,u)),d})(this.options),c=this._it.name;g({triggerGuide:!1,enter:!0,position:`${this._it._positionsData.rEP.value}${this._it._positionsData.rEP.unit}`,text:`${c} ${s.enter.root.text}`,color:s.enter.root.color,backgroundColor:s.enter.root.backgroundColor}),g({triggerGuide:!1,enter:!1,position:`${this._it._positionsData.rLP.value}${this._it._positionsData.rLP.unit}`,text:`${c} ${s.leave.root.text}`,color:s.leave.root.color,backgroundColor:s.leave.root.backgroundColor}),this._it.triggers.forEach(u=>{let{enter:d,leave:f}=this._utils.getTriggerData(u);g({triggerGuide:!0,trigger:u,enter:!0,position:d,text:`${c} ${s.enter.trigger.text}`,color:s.enter.trigger.color,backgroundColor:s.enter.trigger.backgroundColor}),g({triggerGuide:!0,trigger:u,enter:!1,position:f,text:`${c} ${s.leave.trigger.text}`,color:s.leave.trigger.color,backgroundColor:s.leave.trigger.backgroundColor})})}removeGuides=()=>{this._guides.forEach(e=>e&&e.remove()),this._guides=[]};update=()=>{this.removeGuides(),this.createGuides()};kill=()=>{this._removeResizeListener(),this.removeGuides(),this._it.guides=null,this._it=null,this._utils=null}};P.pluginName="guides";var H=P;export{H as default};
//# sourceMappingURL=guides.esm.min.js.map
