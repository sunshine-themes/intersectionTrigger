/*
* IntersectionTrigger v1.0.4 
* IntersectionTrigger utilizes the most modern web technology to trigger anything by intersection. Including scroll-based animations.
* https://sunshine-themes.com/?appID=ss_app_1
*
* Copyright 2023, Sunshine. All rights reserved.
* @license: Released under the personal 'no charge' license can be viewed at http://sunshine-themes.com/?appID=ss_app_1&tab=license, Licensees of commercial or business license are granted additional rights. See http://sunshine-themes.com/?appID=ss_app_1&tab=license for details..
* @author: Sherif Magdy, sherifmagdy@sunshine-themes.com
*
* Released on: February 8, 2023
*/

var y={enter:{trigger:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Enter"},root:{backgroundColor:"rgb(0, 149, 0)",color:"#000",text:"Root Enter"}},leave:{trigger:{backgroundColor:"#ff0000",color:"#000",text:"Leave"},root:{backgroundColor:"#ff0000",color:"#000",text:"Root Leave"}}};var r={function:e=>typeof e=="function",string:e=>typeof e=="string",boolean:e=>typeof e=="boolean",object:e=>!!e&&typeof e=="object"&&e!==null&&!(e instanceof Array),num:e=>typeof e=="number",array:e=>e instanceof Array,element:e=>e instanceof HTMLElement,empty:e=>Object.keys(e).length===0,doc:e=>r.element(e)&&e.nodeType===9,anime:e=>r.object(e)&&e.hasOwnProperty("animatables")&&!e.hasOwnProperty("add"),tl:e=>r.object(e)&&e.hasOwnProperty("add")&&r.function(e.add),animeInstance:e=>r.anime(e)||r.tl(e),pixel:e=>e.includes("px"),inObject:(e,t)=>r.object(e)&&t in e,percent:e=>e.includes("%"),scrollable:(e,t)=>t?t==="y"?e.scrollHeight>e.clientHeight:e.scrollWidth>e.clientWidth:e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth};var T=e=>{let t=[];for(let n=e.parentElement;n&&!r.doc(n)&&n!==document.documentElement;n=n.parentElement)t.push(n);return t},C=(e,t)=>{let n={...e};for(let[s,a]of Object.entries(t))if(r.object(n[s])&&!r.empty(n[s])){if(!r.object(a))continue;n[s]=C(n[s],a)}else n[s]=a;return n};var x=(e,t)=>[e,t].sort((n,s)=>n-s);var d=(e,t)=>{for(let n in t)e.style[n]=t[n]},v=()=>{let e=document.createElement("div");e.style.cssText="overflow:scroll; visibility:hidden; position:absolute;",document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t};var A=class{constructor(t){this.removeGuides=()=>{this._guides.forEach(t=>t&&t.remove()),this._guides=[]};this.update=()=>{this.removeGuides(),this.createGuides()};this.kill=()=>{this._removeResizeListener(),this.removeGuides(),this._it.guides=void 0,this._it=void 0,this._utils=void 0};return this._registerIntersectionTrigger(t),this}_registerIntersectionTrigger(t){this._it=t,this._utils=this._it._utils}init(t){this.options=r.object(t)?t:{},this._guides=[],this._scrollBarWidth=v(),this.isVer=this._utils.isVertical(),this.rootEl=this._utils.getRoot(),this.scrollWidth={x:r.scrollable(this.rootEl,"x")?this._scrollBarWidth:0,y:r.scrollable(this.rootEl,"y")?this._scrollBarWidth:0},this._addResizeListener(),this.update()}_addResizeListener(){this._onResizeHandler=this.update,addEventListener("resize",this._onResizeHandler,!1)}_removeResizeListener(){removeEventListener("resize",this._onResizeHandler,!1)}_guideCreation(t,n){let{enter:s,position:a,isHigherValue:c,text:p,color:f,backgroundColor:m}=t,l=document.createElement("div");d(l,{width:this.isVer?"100px":"1px",height:this.isVer?"1px":"100px",position:"absolute",zIndex:"9999",backgroundColor:m,[this.isVer?"top":"left"]:a.toString()}),(()=>{let i={dir:this.isVer?c?"bottom":"top":"bottom",value:this.isVer?"5px":"25px"},g={dir:this.isVer||c?"right":"left",value:this.isVer?n||this._it._root?"0px":"25px":"5px"},o=document.createElement("span");o.innerText=p,l.appendChild(o),d(o,{position:"absolute",color:f,fontSize:"16px",fontWeight:"bold",backgroundColor:m,padding:"5px",width:"max-content",[i.dir]:i.value,[g.dir]:g.value})})(),this._guides.push(l),document.body.append(l);let E=(i,g)=>{let o=[...l.style.transform.matchAll(/(-?\d*\.?\d+)\s*(px|%)?/g)],h=o.length?o[0][1]:"0",u=o.length>1?o[1][1]:"0",_=i+parseFloat(h),k=g+parseFloat(u);d(l,{transform:`translate(${_}px,${k}px)`})},b=()=>{let i=l.getBoundingClientRect(),g=this.rootEl.getBoundingClientRect(),o=this._utils.getRootRect(this._it.observer.rootMargin),h={x:c?this.scrollWidth.x:0,y:c?this.scrollWidth.y:0},u={x:0,y:0};u=this.isVer?s?{x:g.right-i.left-this.scrollWidth.y,y:o.bottom-i.bottom-h.x}:{x:g.right-i.left-this.scrollWidth.y,y:o.top-i.top-h.x}:s?{x:o.right-i.right,y:g.bottom-i.top-this.scrollWidth.x}:{x:o.left-i.left,y:g.bottom-i.top-this.scrollWidth.x},n&&(o=n.getBoundingClientRect(),u=this.isVer?{x:o.right-i.right,y:o.top+a*o.height-i.top}:{x:o.left+a*o.width-i.left,y:o.top-i.top}),E(u.x,u.y)};if(!n){d(l,{[this.isVer?"width":"height"]:this._it._root?"100px":this.isVer?"100vw":"100vh",position:this._it._root?"absolute":"fixed"}),!this._it._root&&!this.isVer&&d(l,{top:"0px"}),this._it._root&&b();return}b(),T(n).forEach(i=>{!r.scrollable(i)||i.addEventListener("scroll",b,!1)})}createGuides(){let t=C(y,this.options),n=this._it.name,s=this._it._positionsData.rEP.value,a=this._it._positionsData.rLP.value;this._guideCreation({enter:!0,position:`${s}${this._it._positionsData.rEP.unit}`,isHigherValue:x(s,a)[1]===s,text:`${n} ${t.enter.root.text}`,color:t.enter.root.color,backgroundColor:t.enter.root.backgroundColor}),this._guideCreation({enter:!1,position:`${a}${this._it._positionsData.rLP.unit}`,isHigherValue:x(s,a)[1]===a,text:`${n} ${t.leave.root.text}`,color:t.leave.root.color,backgroundColor:t.leave.root.backgroundColor}),this._it.triggers.forEach(c=>{let{enter:p,leave:f,maxPosition:m}=this._utils.getTriggerData(c);this._guideCreation({enter:!0,position:p,isHigherValue:p===m,text:`${n} ${t.enter.trigger.text}`,color:t.enter.trigger.color,backgroundColor:t.enter.trigger.backgroundColor},c),this._guideCreation({enter:!1,position:f,isHigherValue:f===m,text:`${n} ${t.leave.trigger.text}`,color:t.leave.trigger.color,backgroundColor:t.leave.trigger.backgroundColor},c)})}};A.pluginName="guides";var H=A;export{H as default};
//# sourceMappingURL=guides.esm.min.js.map
