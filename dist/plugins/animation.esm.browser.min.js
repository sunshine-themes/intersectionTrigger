/*
* IntersectionTrigger v1.0.4 
* IntersectionTrigger utilizes the most modern web technology to trigger anything by intersection. Including scroll-based animations.
* https://sunshine-themes.com/?appID=ss_app_1
*
* Copyright 2023, Sunshine. All rights reserved.
* @license: Released under the personal 'no charge' license can be viewed at http://sunshine-themes.com/?appID=ss_app_1&tab=license, Licensees of commercial or business license are granted additional rights. See http://sunshine-themes.com/?appID=ss_app_1&tab=license for details..
* @author: Sherif Magdy, sherifmagdy@sunshine-themes.com
*
* Released on: February 8, 2023
*/

var K=function(){},q={to:0,after:1,speed:100,maxDistance:500,onStart:K,onComplete:K};var B={instance:{},toggleActions:"play complete reverse complete",link:!1,snap:!1};function at(e,t){return lt(e)||ut(e,t)||st(e,t)||ot()}function ot(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function st(e,t){if(!!e){if(typeof e=="string")return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(e,t)}}function $(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ut(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,u,v,i,m=[],f=!0,p=!1;try{if(v=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;f=!1}else for(;!(f=(n=v.call(r)).done)&&(m.push(n.value),m.length!==t);f=!0);}catch(a){p=!0,u=a}finally{try{if(!f&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(p)throw u}}return m}}function lt(e){if(Array.isArray(e))return e}function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z(Object(r),!0).forEach(function(n){ft(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ft(e,t,r){return t=pt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pt(e){var t=mt(e,"string");return D(t)==="symbol"?t:String(t)}function mt(e,t){if(D(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(D(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D(e){return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(e)}var c={function:function(t){return typeof t=="function"},string:function(t){return typeof t=="string"},boolean:function(t){return typeof t=="boolean"},object:function(t){return!!t&&D(t)==="object"&&t!==null&&!(t instanceof Array)},num:function(t){return typeof t=="number"},array:function(t){return t instanceof Array},element:function(t){return t instanceof HTMLElement},empty:function(t){return Object.keys(t).length===0},doc:function(t){return c.element(t)&&t.nodeType===9},anime:function(t){return c.object(t)&&t.hasOwnProperty("animatables")&&!t.hasOwnProperty("add")},tl:function(t){return c.object(t)&&t.hasOwnProperty("add")&&c.function(t.add)},animeInstance:function(t){return c.anime(t)||c.tl(t)},pixel:function(t){return t.includes("px")},inObject:function(t,r){return c.object(t)&&r in t},percent:function(t){return t.includes("%")},scrollable:function(t,r){return r?r==="y"?t.scrollHeight>t.clientHeight:t.scrollWidth>t.clientWidth:t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth}},J=function(t,r,n){return Math.min(Math.max(t,r),n)},Q=function(t){return t.split(/\s+/)};var C=function e(t,r){for(var n=ct({},t),u=0,v=Object.entries(r);u<v.length;u++){var i=at(v[u],2),m=i[0],f=i[1];if(c.object(n[m])&&!c.empty(n[m])){if(!c.object(f))continue;n[m]=e(n[m],f)}else n[m]=f}return n},M=function(t){throw new Error(t)};function _(e){return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(e)}function vt(e){return gt(e)||dt(e)||X(e)||yt()}function yt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dt(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gt(e){if(Array.isArray(e))return R(e)}function bt(e,t){return Ot(e)||St(e,t)||X(e,t)||ht()}function ht(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function X(e,t){if(!!e){if(typeof e=="string")return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}}function R(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function St(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,u,v,i,m=[],f=!0,p=!1;try{if(v=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;f=!1}else for(;!(f=(n=v.call(r)).done)&&(m.push(n.value),m.length!==t);f=!0);}catch(a){p=!0,u=a}finally{try{if(!f&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(p)throw u}}return m}}function Ot(e){if(Array.isArray(e))return e}function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y(Object(r),!0).forEach(function(n){Pt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pt(e,t,r){return t=G(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,G(n.key),n)}}function kt(e,t,r){return t&&Z(e.prototype,t),r&&Z(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function G(e){var t=Tt(e,"string");return _(t)==="symbol"?t:String(t)}function Tt(e,t){if(_(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tt=function(){function e(t){return wt(this,e),this._registerIntersectionTrigger(t),this.setUtils(),this}return kt(e,[{key:"_registerIntersectionTrigger",value:function(r){this._it=r,this._utils=this._it._utils}},{key:"setUtils",value:function(){var r=this,n=this._utils.dirProps(),u=n.ref,v=n.refOpposite,i=n.length,m=this._utils.isVertical(),f=this._utils.getRoot(),p=new WeakMap;this.seekSmoothly=function(a,s,l,o){if(!r.killed){var y=a.currentTime,g=o?Math.min(y+l,s):Math.max(y-l,s);a.seek(g);var d=o?g>=s:g<=s;if(!d){var b=requestAnimationFrame(function(){return r.seekSmoothly(a,s,l,o)});p.set(a,b)}}},this.seek=function(a,s,l){if(c.num(l)){var o=a.currentTime,y=s>o,g=p.has(a)&&p.get(a)||0;cancelAnimationFrame(g),r.seekSmoothly(a,s,l,y);return}a.seek(s)},this.startSnaping=function(a){var s=a.snapDistance,l=a.currentDis,o=a.snap,y=a.step,g=a.toRef,d=g===void 0?!1:g;if(!r.killed){var b=d?-1:1;if(m?f.scrollBy({top:y*b,behavior:"instant"}):f.scrollBy({left:y*b,behavior:"instant"}),l+=y,l>=s){l=0,o.onComplete(r._it);return}requestAnimationFrame(function(){return r.startSnaping({snapDistance:s,currentDis:l,snap:o,step:y,toRef:d})})}},this.parseSnap=function(a,s){var l=a.instance,o=a.snap,y=function(w){for(var E=[],I=0;I<=1;)E.push(J(I,0,1)),I=I+w;return E.map(function(W){return Math.round(W*l.duration)})},g=function(){return c.inObject(l,"marks")?l.marks.map(function(w){return w.time}):M('"marks" feature is not available in the provided anime instance')},d=function(w){return C(q,w)},b=function(w){return c.num(w)?y(w):g()},P={},O={};if(s){var A=o,h=A.originalToParam;h&&(P=S(S({},o),{},{to:b(h)}))}else{c.boolean(o)&&(O=d({to:"marks"})),(c.array(o)||c.num(o))&&(O=d({to:o})),c.object(o)&&(O=d(o)),P=O;var T=O,k=T.to;c.string(k)&&!!k&&(P=S(S({},O),{},{originalToParam:"marks",to:g()})),c.num(k)&&!!k&&(P=S(S({},O),{},{originalToParam:k,to:y(k)})),console.log(P.to)}return P},this.getTIL=function(a,s,l){var o=a.getBoundingClientRect();return o[i]-(s*o[i]+(1-l)*o[i])},this.getSnapStep=function(a){return c.object(a)?Math.round(Math.max(a.speed*17/1e3,1)):0},this.animateHandler=function(a,s){var l=s.enter,o=s.leave,y=s.tIL,g=s.instance,d=s.snap,b=s.step,P=s.link;if(!r.killed){var O=a.getBoundingClientRect(),A=r._utils.getTriggerStates(a,"ids");r._it.rootBounds=r._utils.getRootRect(r._it.observer.rootMargin);var h=r._it.rootBounds,T=y+(r._it._isREPGreater?h[i]:-h[i]),k=g.duration,j=0,w=r._utils.getPositions(O,h,{enter:l,leave:o,ref:u,refOpposite:v,length:i}),E=bt(w,4),I=E[0],W=E[1],et=E[2],At=E[3],H=et-I;if(H>0&&(j=k*H/T,r.seek(g,j,P)),!c.boolean(d)){var rt=0;clearTimeout(A.snapTimeOutId);var nt=setTimeout(function(){var F=d.to.map(function(L){return j-L}),N=F.map(function(L){return Math.abs(L)}),V=Math.min.apply(Math,vt(N)),it=F[N.indexOf(V)],x=T*V/k,U={snapDistance:x,currentDis:rt,snap:d,step:b};if(!(x>=d.maxDistance||x<b)){if(d.onStart(r._it),it<0){r.startSnaping(U);return}r.startSnaping(S(S({},U),{},{toRef:!0}))}},d.after*1e3);r._utils.setTriggerStates(a,{ids:S(S({},A),{},{snapTimeOutId:nt})})}}}}},{key:"animate",value:function(r,n,u){var v=this,i=n.instance,m=n.toggleActions,f=n.link,p=n.snap;if(f){var a=this._utils.getTriggerStates(r,"onScroll"),s=a.animate,l=this._utils.getTriggerStates(r,"ids"),o=this._utils.getTriggerData(r),y=o.enter,g=o.leave,d=o.minPosition,b=o.maxPosition,P=this.getTIL(r,d,b),O=this.getSnapStep(p),A={enter:y,leave:g,tIL:P,instance:i,snap:p,link:c.boolean(f)?f:Math.abs(f),step:O};switch(u){case 0:case 2:if(this._it._states.oCbFirstInvoke&&this.animateHandler(r,A),s)break;this._utils.setTriggerScrollStates(r,"animate",function(){return v.animateHandler(r,A)});break;case 1:case 3:clearTimeout(l.snapTimeOutId),this._utils.setTriggerScrollStates(r,"animate"),this.seek(i,u===1?i.duration:0,f);break}return}var h=m[u],T=i.currentTime/i.duration;if(h!=="none")switch(h){case"play":i.reversed&&(i.reverse(),i.completed=!1),T<1&&i[h]();break;case"resume":T<1&&T>0&&i.play();break;case"restart":case"reset":i.reversed&&i.reverse(),i[h]();break;case"pause":i[h]();break;case"complete":i.pause(),i.seek(i.reversed?0:i.duration);break;case"reverse":!i.reversed&&i[h](),i.paused&&i.play();break;case"kill":c.inObject(i,"kill")&&i.kill(),this._utils.setTriggerData(r,{animation:void 0},!0);break}}},{key:"parse",value:function(r,n){var u={},v={};if(n){var i=r,m=i.instance,f=i.snap;!c.boolean(f)&&(v=S(S({},r),{},{snap:this.parseSnap({instance:m,snap:f},!0)}))}else{if(!c.object(r))return M('"animation" parameter is NOT valid.');if(c.animeInstance(r))u=C(B,{instance:r});else if(r.instance&&c.animeInstance(r.instance))u=C(B,r);else return M('"instance" parameter must be anime instance.');var p=u,a=p.toggleActions,s=p.snap,l=p.instance,o=p.link;v={instance:l,toggleActions:Q(a),snap:!!s&&this.parseSnap({instance:l,snap:s}),link:o}}return v.instance.reset(),v}},{key:"update",value:function(){var r=this;this._it.triggers.forEach(function(n){var u=r._utils.getTriggerData(n),v=u.enter,i=u.leave,m=u.minPosition,f=u.maxPosition,p=u.animation;p=p&&r.parse(p,!0),r._utils.setTriggerData(n,{animation:p},!0);var a=r._utils.getTriggerStates(n,"onScroll"),s=a.animate;if(s&&!!p){var l=p,o=l.instance,y=l.snap,g=l.link,d=r.getTIL(n,m,f),b=r.getSnapStep(y);r._utils.setTriggerScrollStates(n,"animate"),r._utils.setTriggerScrollStates(n,"animate",function(){return r.animateHandler(n,{enter:v,leave:i,instance:o,snap:y,link:g,tIL:d,step:b})})}})}},{key:"kill",value:function(){this.killed=!0,this._it=this._utils=void 0}}]),e}();tt.pluginName="animation";var _t=tt;export{_t as default};
//# sourceMappingURL=animation.esm.browser.min.js.map
